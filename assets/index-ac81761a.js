var fl=Object.defineProperty;var al=(t,e,n)=>e in t?fl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Wn=(t,e,n)=>(al(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function ee(){}function eo(t,e){for(const n in e)t[n]=e[n];return t}function Oi(t){return t()}function fo(){return Object.create(null)}function ht(t){t.forEach(Oi)}function pn(t){return typeof t=="function"}function Be(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let yn;function un(t,e){return t===e?!0:(yn||(yn=document.createElement("a")),yn.href=e,t===yn.href)}function dl(t){return Object.keys(t).length===0}function Ve(t,...e){if(t==null){for(const o of e)o(void 0);return ee}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function J(t){let e;return Ve(t,n=>e=n)(),e}function Y(t,e,n){t.$$.on_destroy.push(Ve(e,n))}function Ae(t,e,n,o){if(t){const i=Ti(t,e,n,o);return t[0](i)}}function Ti(t,e,n,o){return t[1]&&o?eo(n.ctx.slice(),t[1](o(e))):n.ctx}function ve(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const l=[],r=Math.max(e.dirty.length,i.length);for(let s=0;s<r;s+=1)l[s]=e.dirty[s]|i[s];return l}return e.dirty|i}return e.dirty}function Pe(t,e,n,o,i,l){if(i){const r=Ti(e,n,o,l);t.p(r,i)}}function De(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function to(t){const e={};for(const n in t)e[n]=!0;return e}function oe(t,e,n){return t.set(n),e}function Ht(t){return t&&pn(t.destroy)?t.destroy:ee}function Z(t,e){t.appendChild(e)}function G(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function En(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function te(t){return document.createElement(t)}function pt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function qt(t){return document.createTextNode(t)}function le(){return qt(" ")}function He(){return qt("")}function pe(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function Mt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function bt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function hn(t){return function(e){e.target===this&&t.call(this,e)}}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function wu(t){return t===""?null:+t}function hl(t){return Array.from(t.childNodes)}function $t(t,e){e=""+e,t.data!==e&&(t.data=e)}function ao(t,e){t.value=e??""}function W(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function ku(t,e,n){for(let o=0;o<t.options.length;o+=1){const i=t.options[o];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Cu(t){const e=t.querySelector(":checked");return e&&e.__value}let wn;function gl(){if(wn===void 0){wn=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{wn=!0}}return wn}function Bi(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const o=te("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const i=gl();let l;return i?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=pe(window,"message",r=>{r.source===o.contentWindow&&e()})):(o.src="about:blank",o.onload=()=>{l=pe(o.contentWindow,"resize",e),e()}),Z(t,o),()=>{(i||l&&o.contentWindow)&&l(),j(o)}}function _e(t,e,n){t.classList.toggle(e,!!n)}function _l(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}function Ut(t,e){return new t(e)}let mn;function gn(t){mn=t}function en(){if(!mn)throw new Error("Function called outside component initialization");return mn}function ml(t){en().$$.before_update.push(t)}function Ft(t){en().$$.on_mount.push(t)}function Wi(t){en().$$.after_update.push(t)}function Dn(t){en().$$.on_destroy.push(t)}function cn(){const t=en();return(e,n,{cancelable:o=!1}={})=>{const i=t.$$.callbacks[e];if(i){const l=_l(e,n,{cancelable:o});return i.slice().forEach(r=>{r.call(t,l)}),!l.defaultPrevented}return!0}}function Re(t,e){return en().$$.context.set(t,e),e}function Ne(t){return en().$$.context.get(t)}function xe(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(o=>o.call(this,e))}const on=[],Kt=[];let rn=[];const ho=[],Ri=Promise.resolve();let Vn=!1;function Xi(){Vn||(Vn=!0,Ri.then(ji))}function bl(){return Xi(),Ri}function bn(t){rn.push(t)}const Rn=new Set;let tn=0;function ji(){if(tn!==0)return;const t=mn;do{try{for(;tn<on.length;){const e=on[tn];tn++,gn(e),pl(e.$$)}}catch(e){throw on.length=0,tn=0,e}for(gn(null),on.length=0,tn=0;Kt.length;)Kt.pop()();for(let e=0;e<rn.length;e+=1){const n=rn[e];Rn.has(n)||(Rn.add(n),n())}rn.length=0}while(on.length);for(;ho.length;)ho.pop()();Vn=!1,Rn.clear(),gn(t)}function pl(t){if(t.fragment!==null){t.update(),ht(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(bn)}}function yl(t){const e=[],n=[];rn.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),rn=e}const Nn=new Set;let Qt;function Le(){Qt={r:0,c:[],p:Qt}}function Ie(){Qt.r||ht(Qt.c),Qt=Qt.p}function b(t,e){t&&t.i&&(Nn.delete(t),t.i(e))}function w(t,e,n,o){if(t&&t.o){if(Nn.has(t))return;Nn.add(t),Qt.c.push(()=>{Nn.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function yt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Mn(t,e){w(t,1,1,()=>{e.delete(t.key)})}function An(t,e,n,o,i,l,r,s,c,u,f,a){let g=t.length,h=l.length,_=g;const p={};for(;_--;)p[t[_].key]=_;const m=[],k=new Map,S=new Map,M=[];for(_=h;_--;){const D=a(i,l,_),H=n(D);let F=r.get(H);F?o&&M.push(()=>F.p(D,e)):(F=u(H,D),F.c()),k.set(H,m[_]=F),H in p&&S.set(H,Math.abs(_-p[H]))}const P=new Set,T=new Set;function E(D){b(D,1),D.m(s,f),r.set(D.key,D),f=D.first,h--}for(;g&&h;){const D=m[h-1],H=t[g-1],F=D.key,x=H.key;D===H?(f=D.first,g--,h--):k.has(x)?!r.has(F)||P.has(F)?E(D):T.has(x)?g--:S.get(F)>S.get(x)?(T.add(F),E(D)):(P.add(x),g--):(c(H,r),g--)}for(;g--;){const D=t[g];k.has(D.key)||c(D,r)}for(;h;)E(m[h-1]);return ht(M),m}function Gi(t,e){const n={},o={},i={$$scope:1};let l=t.length;for(;l--;){const r=t[l],s=e[l];if(s){for(const c in r)c in s||(o[c]=1);for(const c in s)i[c]||(n[c]=s[c],i[c]=1);t[l]=s}else for(const c in r)i[c]=1}for(const r in o)r in n||(n[r]=void 0);return n}function Yi(t){return typeof t=="object"&&t!==null?t:{}}function ue(t){t&&t.c()}function se(t,e,n){const{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),bn(()=>{const l=t.$$.on_mount.map(Oi).filter(pn);t.$$.on_destroy?t.$$.on_destroy.push(...l):ht(l),t.$$.on_mount=[]}),i.forEach(bn)}function ce(t,e){const n=t.$$;n.fragment!==null&&(yl(n.after_update),ht(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function wl(t,e){t.$$.dirty[0]===-1&&(on.push(t),Xi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Xe(t,e,n,o,i,l,r=null,s=[-1]){const c=mn;gn(t);const u=t.$$={fragment:null,ctx:[],props:l,update:ee,not_equal:i,bound:fo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:fo(),dirty:s,skip_bound:!1,root:e.target||c.$$.root};r&&r(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(a,g,...h)=>{const _=h.length?h[0]:g;return u.ctx&&i(u.ctx[a],u.ctx[a]=_)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](_),f&&wl(t,a)),g}):[],u.update(),f=!0,ht(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const a=hl(e.target);u.fragment&&u.fragment.l(a),a.forEach(j)}else u.fragment&&u.fragment.c();e.intro&&b(t.$$.fragment),se(t,e.target,e.anchor),ji()}gn(c)}class je{constructor(){Wn(this,"$$");Wn(this,"$$set")}$destroy(){ce(this,1),this.$destroy=ee}$on(e,n){if(!pn(n))return ee;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(e){this.$$set&&!dl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const kl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(kl);const nn=[];function vn(t,e){return{subscribe:q(t,e).subscribe}}function q(t,e=ee){let n;const o=new Set;function i(s){if(Be(t,s)&&(t=s,n)){const c=!nn.length;for(const u of o)u[1](),nn.push(u,t);if(c){for(let u=0;u<nn.length;u+=2)nn[u][0](nn[u+1]);nn.length=0}}}function l(s){i(s(t))}function r(s,c=ee){const u=[s,c];return o.add(u),o.size===1&&(n=e(i,l)||ee),s(t),()=>{o.delete(u),o.size===0&&n&&(n(),n=null)}}return{set:i,update:l,subscribe:r}}function _n(t,e,n){const o=!Array.isArray(t),i=o?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return vn(n,(r,s)=>{let c=!1;const u=[];let f=0,a=ee;const g=()=>{if(f)return;a();const _=e(o?u[0]:u,r,s);l?r(_):a=pn(_)?_:ee},h=i.map((_,p)=>Ve(_,m=>{u[p]=m,f&=~(1<<p),c&&g()},()=>{f|=1<<p}));return c=!0,g(),function(){ht(h),a(),c=!1}})}function Pn(){const t=new Map,{subscribe:e,set:n,update:o}=q(t);return{subscribe:e,set:n,update:o,add:(l,r)=>(o(s=>(s.set(r,l),s)),t),get:l=>t.get(l)||null,getAll:()=>Array.from(t.values()),delete:l=>{let r=!1;return o(s=>(s.delete(l),r=!0,s)),r},count:()=>t.size}}function Hi(t){const{id:e,inputs:n,outputs:o,resizable:i,dimensions:l,editable:r,direction:s,zIndex:c,position:u,selectionColor:f,borderWidth:a,edge:g}=t,{bgColor:h,borderColor:_,rotation:p,borderRadius:m,connections:k,textColor:S,locked:M,group:P}=t,T=Pn(),E=(F="self")=>{J(T).forEach(x=>{(F==="self"||J(x.direction)===F)&&x.recalculatePosition()})};return{id:typeof e=="string"&&e.slice(0,2)==="N-"?e:`N-${e}`,position:q({x:(u==null?void 0:u.x)||0,y:(u==null?void 0:u.y)||0}),dimensions:{width:q((l==null?void 0:l.width)||0),height:q((l==null?void 0:l.height)||(l==null?void 0:l.width))},group:q(P||null),locked:q(M||!1),inputs:q(n),outputs:q(o),recalculateAnchors:E,rotation:q(p||0),moving:q(!1),resizingWidth:q(!1),resizingHeight:q(!1),rotating:q(!1),editable:q(r||!1),resizable:q(i),anchors:T,zIndex:q(c||2),collapsed:q(!1),edge:g||null,borderRadius:q(m),bgColor:q(h||null),direction:q(s),label:q(t.label||""),borderColor:q(_||null),borderWidth:q(a),selectionColor:q(f||null),textColor:q(S||null),connections:q(k)}}const Cl=10,Sl=100,Nl=50,El="#000",Ml="#fff",Al="12px",vl=22,Pl=1.4,Dl=40;function Ll(t,e){const n=[t,e].sort();return`${n[0]}+${n[1]}`}function go(t,e,n){var s,c,u,f,a;const{source:o,target:i}=t,r={id:o.id&&i.id?Ll(o.id,i.id):"cursor",target:t.target,source:t.source,component:e,type:q((n==null?void 0:n.type)||null),color:(n==null?void 0:n.color)||q(null),width:q((n==null?void 0:n.width)||0),animated:q((n==null?void 0:n.animated)||!1),rendered:q(!1)};if(n!=null&&n.disconnect&&(r.disconnect=!0),n!=null&&n.label){const g={text:q(n==null?void 0:n.label.text),color:q(((s=n==null?void 0:n.label)==null?void 0:s.color)||El),textColor:q(((c=n==null?void 0:n.label)==null?void 0:c.textColor)||Ml),fontSize:q(((u=n==null?void 0:n.label)==null?void 0:u.fontSize)||Al),dimensions:{width:q(((f=n==null?void 0:n.label.dimensions)==null?void 0:f.width)||Sl),height:q(((a=n==null?void 0:n.label.dimensions)==null?void 0:a.height)||Nl)},borderRadius:q((n==null?void 0:n.label.borderRadius)||Cl)};r.label=g}return r}function Il(){const t=new Map,e=new Set,{subscribe:n,set:o,update:i}=q(t),l={subscribe:n,set:o,update:i,add:(r,s)=>{if(typeof s!="string"){const c=Array.from(s),u=c[0],f=c[1];if(u.connected.update(a=>a.add(f)),f.connected.update(a=>a.add(u)),l.match(...Array.from(s)).length)return;e.forEach(a=>a(r,"connection"))}i(c=>(c.set(s,r),c))},getAll:()=>Array.from(t.values()),get:r=>t.get(r)||null,match:(...r)=>Array.from(t.keys()).filter(s=>s==="cursor"?!1:r.every(c=>c?s.has(c):!0)),fetch:(r,s)=>{const c=Array.from(t.keys()).filter(u=>u==="cursor"?!1:[r,s].every(f=>f?u.has(f):!0))[0];return t.get(c)||null},delete:r=>{if(typeof r!="string"){const c=Array.from(r),u=c[0],f=c[1];u.connected.update(a=>(a.delete(f),a)),f.connected.update(a=>(a.delete(u),a))}let s=!1;return i(c=>{const u=c.get(r);return u&&(c.delete(r),s=!0,typeof r!="string"&&e.forEach(f=>f(u,"disconnection"))),c}),s},onEdgeChange:r=>(e.add(r),()=>e.delete(r)),count:()=>t.size};return l}function zl(t,e){const n=t.clientX-e.clientX,o=t.clientY-e.clientY;return Math.sqrt(n*n+o*o)}function Ol(){const t=()=>Math.floor(Math.random()*256),e=t(),n=t(),o=t();return`rgb(${e},${n},${o})`}const Tl={"(":"round","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},_o={"-":"straight","~":"bezier"},qi={"(":")","[":"]","{":"}"},Bl=/[-=~]*>(?:\s*\|(.+?)\|)?/g,Wl=t=>{const e=t.split(`
`),n={parentNodes:[],nodeList:{}};for(const o of e){const{parentNodes:i,childNodes:l,edge:r}=Rl(o);for(const s of i){n.nodeList[s.id]||n.parentNodes.push(s);for(const c of l){if(n.nodeList[s.id]){if(n.nodeList[c.id]&&n.nodeList[c.id].children.some(({node:u})=>u.id===s.id))throw new Error("Circular reference detected");n.nodeList[s.id].children.push({node:n.nodeList[c.id]||c,...r})}else s.children.push({node:n.nodeList[c.id]||c,...r}),n.nodeList[s.id]=s;n.nodeList[c.id]?n.nodeList[c.id].parents.push({node:n.nodeList[s.id]||s}):(c.parents.push({node:n.nodeList[s.id]||s}),n.nodeList[c.id]=c),n.parentNodes=n.parentNodes.filter(u=>u.id!==c.id)}}}return n},Rl=t=>{const e=[],n=[],o=t.trim();let i="";const l=o.match(Bl);if(l)i=l[0];else throw new Error("Invalid edge");const[r,s]=o.split(i);for(const u of r.split("&"))e.push(mo(u));for(const u of s.split("&"))n.push(mo(u));const c=Xl(i);return{parentNodes:e,childNodes:n,edge:c}},mo=t=>{t=t.trim();let e="",n="";const o={shape:""},i=[],l=t.split("|"),r=l[0];let s=l[1];const c=l[2];for(let u=0;u<r.length;u++)if(jl(r[u]))i.push(r[u]);else if(qi[i[i.length-1]]===r[u]){n=Tl[i.join("")];break}else e+=r[u];return n||(n="default"),o.shape=n,s||(s="Default"),c?o.props=c:o.content=e,{id:e,data:o,type:s,children:[],parents:[],depth:0,nesting:0}},Xl=t=>{t=t.trim();let e="";const[n,o]=t.split("|"),i=n[0];if(i in _o)e=_o[i];else throw new Error("Not a valid edge type");return o?{shape:e,content:o.trim(),length:Math.floor((n.trim().length-1)/2)}:{shape:e,length:Math.floor((n.trim().length-1)/2)}};function jl(t){return t in qi}function Gl(){return Math.random().toString(36).substring(7)}function bo(t,e=1){const n=Math.pow(10,e);return Math.round(t*n)/n}function Yl(t,e){const n=Math.sign(t.x).toString(),o=Math.sign(t.y).toString(),i=Math.sign(e.x).toString(),l=Math.sign(e.y).toString();return`${n}${o}${i}${l}`}function Hl(t,e){return{1001:`a ${t} ${t} 0 0 1 ${t} ${t}`,"0110":`a ${t} ${t} 0 0 0 ${t} ${t}`,"100-1":`a ${t} ${t} 0 0 0 ${t} -${t}`,"0-110":`a ${t} ${t} 0 0 1 ${t} -${t}`,"-1001":`a ${t} ${t} 0 0 0 -${t} ${t}`,"01-10":`a ${t} ${t} 0 0 1 -${t} ${t}`,"-100-1":`a ${t} ${t} 0 0 1 -${t} -${t}`,"0-1-10":`a ${t} ${t} 0 0 0 -${t} -${t}`}[e]||""}function po(t,e){const n=e*(Math.PI/180),o=t.x*Math.cos(n)-t.y*Math.sin(n),i=t.x*Math.sin(n)+t.y*Math.cos(n);return{x:o,y:i}}const ql=(t,e,n,o)=>t+` l ${e} ${n} `+o,dt=q({x:0,y:0}),Un=q(0),wt=q(!1),Jn=q(!1),Ki=vn({x:0,y:0},t=>{const e=l=>{t({x:l.clientX,y:l.clientY})},n=l=>{if(l.touches.length===2){const r=zl(l.touches[0],l.touches[1]);Un.set(r);const s={x:l.touches[0].clientX,y:l.touches[0].clientY};t(s)}else if(l.touches.length===1){const r=l.touches[0].clientX,s=l.touches[0].clientY;t({x:r,y:s}),wt.set(!0)}},o=l=>{n(l),window.addEventListener("touchend",i),window.addEventListener("touchmove",n)},i=()=>{wt.set(!1),Un.set(0),window.removeEventListener("touchmove",n)};return document.addEventListener("mousemove",e),window.addEventListener("touchstart",o,!0),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("touchstart",o),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",i)}});function Xn(t){const e=t.style.width,n=t.style.height;t.style.width="fit-content",t.style.height="fit-content";const o=t.offsetWidth,i=t.offsetHeight;return t.style.width=e,t.style.height=n,[o,i]}function Fi(t,e,n,o,i){const l={x:0,y:0},r=o.x-i.left-i.width/2,s=o.y-i.top-i.height/2,c=(r-n.x)/t,u=(s-n.y)/t;return l.x=r-c*e,l.y=s-u*e,l}const Kl=3,Fl=.1,dn={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};function Zi(t,e,n){const o=e*n,i=t-o;return Number(Math.max(Fl,Math.min(Kl,i)).toFixed(9))}const Ln=(t,e,n,o,i,l,r)=>{const{clientX:s,clientY:c}=t,u=l,f=s-n,a=c-e,g=r.x,h=r.y,_=o*(1-l)/2,p=i*(1-l)/2,m=f-g-_,k=a-h-p,S=m/u,M=k/u;return{x:S,y:M}};function Zl(t,e,n){const{top:o,left:i,width:l,height:r}=J(t),s=J(e.scale),c=J(e.translation);return{scaled:Ln({clientX:n.x,clientY:n.y},o,i,l,r,s,c),scale:s}}function Vl(t,e,n){const{scale:o,translation:i}=n,l=J(o),r=J(i),s=e.x-t.x,c=e.y-t.y,u=r.x+s*l,f=r.y+c*l;return{x:u,y:f}}function Ul(t,e){return t.x*e.x+t.y*e.y}function Jl(t,e,n){const o=[],i=e.x-t.x,l=e.y-t.y,r=xl(t.direction,e.direction),s=Ul(t.direction,e.direction)===0,c=Ql(t,e),u=Ze(t.direction,-1,-1),f=Ze(e.direction,-1,-1),a={x:Math.abs(t.direction.y),y:Math.abs(t.direction.x)},g=Ze(t.direction,i-n*t.direction.x*(s?1:r?0:2),l-n*t.direction.y*(s?1:r?0:2)),h=Ze(e.direction,i+n*e.direction.x*(s?1:r?0:2),l+n*e.direction.y*(s?1:r?0:2)),_=Math.sign(g.x)===-1||Math.sign(g.y)===-1,p=Math.sign(h.x)===1||Math.sign(h.y)===1,m=Math.abs(i),k=Math.abs(l),S=Ze(t.direction,n,n),M=Ze(f,n,n),P=Ze(e.direction,n,n),T=Ze(t.direction,m,k),E=Ze(f,m,k),D=Ze(t.direction,m/2,k/2),H=Ze(f,m/2,k/2),F=Ze(a,i,l),x=!c&&!p&&!_,ie=t.x+S.x,O=t.y+S.y,B=e.x+P.x,R=e.y+P.y;if(_&&o.push(S),c&&!p&&!_)o.push(T),o.push(E);else if(r)_||o.push(Ze(t.direction,n+m,n+k)),o.push(F),p||o.push(Ze(f,n+m,n+k));else if(x)o.push(D),o.push(F),o.push(H);else if(_&&p)if(s){const X=Math.abs(ie-B),ne=Math.abs(O-R);o.push(Ze(e.direction,m<n*2?e.direction.x*(i+e.direction.x*n):m+n,k<n*2?e.direction.y*(l+e.direction.y*n):k+n)),o.push(Ze(u,X,ne))}else{const X=Math.abs(ie-B),ne=Math.abs(O-R);o.push(Ze(a,i/2,l/2)),o.push(Ze(e.direction,X,ne)),o.push(Ze(a,i/2,l/2))}else if(_){const X=Math.abs(ie-e.x),ne=Math.abs(O-e.y);o.push(Ze(f,m<n*2?m-n:m/2,k<n*2?k-n:k/2)),o.push(Ze(u,X,ne)),o.push(Ze(f,Math.max(n,m/2),Math.max(n,k/2)))}else if(p){const X=Math.abs(B-t.x),ne=Math.abs(R-t.y);o.push(Ze(t.direction,Math.max(n,m/2),Math.max(n,k/2))),o.push(Ze(e.direction,X,ne)),o.push(Ze(t.direction,m<n*2?m-n:m/2,k<n*2?k-n:k/2))}return p&&o.push(M),o}function Ql(t,e){const{x:n,y:o}=t.direction,{x:i,y:l}=e.direction,r=e.x-t.x,s=e.y-t.y;return n*l===i*o?!1:Math.sign(s)===Math.sign(o+l)!=(Math.sign(r)===Math.sign(n+i))}function Ze(t,e,n){return{x:t.x*e,y:t.y*n}}function xl(t,e){return t.x===e.x&&t.y===e.y}function $l(t,e){const{width:n,height:o}=t,{top:i,left:l,right:r,bottom:s}=e,c=r-l,u=s-i;if(!c||!u)return{x:null,y:null,scale:null};const f=l+c/2,a=i+u/2,g=Math.min(n/c,o/u)*.8,h=n/2,_=o/2,p=h-f,m=_-a;return{x:p*g,y:m*g,scale:g}}const kn=(t,e,n)=>Math.min(Math.abs(t||e)/2,n);function jn(t,e){const o=t.getTotalLength()*e;return t.getPointAtLength(o)}function er(t,e,n,o){return _n([t,e,n,o],([l,r,s,c])=>{const u={clientX:l.x,clientY:l.y};return Ln(u,r.top,r.left,r.width,r.height,c,s)})}function tr(t,e,n,o){const i=q({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),l=q({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let r,s=J(e),c=J(n),u=J(o),f=s.width/c,a=s.height/c;function g(){const{x:_,y:p}=Ln({clientX:s.left,clientY:s.top},s.top,s.left,s.width,s.height,c,u),m=J(l);i.set({top:Math.min(m.top,p),left:Math.min(m.left,_),right:Math.max(m.right,_+f),bottom:Math.max(m.bottom,a+p)})}function h(_=!1){let p=1/0,m=1/0,k=-1/0,S=-1/0;for(const M of t.getAll()){const{x:P,y:T}=J(M.position),E=J(M.dimensions.width),D=J(M.dimensions.height);m=Math.min(m,P),p=Math.min(p,T),k=Math.max(k,P+E),S=Math.max(S,T+D)}l.set({top:p,left:m,right:k,bottom:S}),g(),_&&(r=requestAnimationFrame(()=>h(_)))}return t.subscribe(()=>{h()}),Jn.subscribe(_=>{_&&h(_),_||cancelAnimationFrame(r)}),wt.subscribe(_=>{_&&h(_),_||cancelAnimationFrame(r)}),e.subscribe(()=>{s=J(e),f=s.width/c,a=s.height/c,g()}),n.subscribe(()=>{c=J(n),f=s.width/c,a=s.height/c,g()}),o.subscribe(()=>{u=J(o),g()}),{graphBounds:i,nodeBounds:l}}function nr(t,e,n){const{width:o,height:i,top:l,left:r}=t,s={clientX:o/2,clientY:i/2};return Ln(s,l,r,o,i,n,e)}function Vi(t,e){const{zoom:n,editable:o,translation:i,direction:l,locked:r,edge:s}=e,c=q({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),u=q({top:0,left:0,width:0,height:0,bottom:0,right:0}),f=q(n),a=q(!1),g=Pn(),h=tr(g,u,f,c),_=_n([u,c,f],([m,k,S])=>nr(m,k,S));return{id:t,nodes:g,edges:Il(),transforms:{translation:c,scale:f},maxZIndex:q(2),dimensions:u,bounds:h,center:_,mounted:a,direction:l||"LR",editable:o||!1,edge:s||null,editing:q(null),cursor:er(Ki,u,c,f),locked:q(r||!1),groups:q({selected:{parent:q(null),nodes:q(new Set)},hidden:{parent:q(null),nodes:q(new Set)}}),groupBoxes:Pn(),activeGroup:q(null),initialNodePositions:q([])}}const Gn=Pn(),Cn=10;function Ui(t){const e=J(t);return Array.from(e).map(o=>J(o.position))}function or(t,e){let n;const o=J(t.groups),i=J(t.activeGroup);if(!i)return;const l=o[i].nodes;if(!l)return;const r=J(t.initialNodePositions),{x:s,y:c}=J(dt),u=Array.from(J(l)),f=J(t.groupBoxes);u.forEach(g=>g.moving.set(!0)),a();function a(){const g=J(t.cursor);let h=g.x-s,_=g.y-c;e&&(h-=h%e,_-=_%e);const p={x:h,y:_};u.forEach((m,k)=>{const{group:S,position:M}=m,P=r[k];let T;if(i==="selected"){const E=J(S);E&&(T=f.get(E))}if(!T)Ji(P,p,M);else{const E=J(m.dimensions.width),D=J(m.dimensions.height),H=xi(T,E,D);Qi(P,p,M,H)}}),J(wt)?n=requestAnimationFrame(a):cancelAnimationFrame(n)}}function Ji(t,e,n){n.set({x:t.x+e.x,y:t.y+e.y})}function Qi(t,e,n,o){n.set({x:Math.min(Math.max(o.left,t.x+e.x),o.right),y:Math.min(Math.max(o.top,t.y+e.y),o.bottom)})}function xi(t,e,n){const{x:o,y:i}=J(t.position);return{left:o+Cn,right:o+J(t.dimensions.width)-e-Cn,top:i+Cn,bottom:i+J(t.dimensions.height)-n-Cn}}function yo(t=1,e,n,o=.1){const i=J(e),{width:l,height:r,top:s,left:c}=i,u=n.scale,f=J(n.translation),a=J(u),g=Zi(a,t,o),h=Fi(a,g,f,{x:l/2+c,y:r/2+s},i);u.set(g),n.translation.set(h)}function $i(t,e,n,o,i,l,r,s,c,u,f,a){const{width:g,height:h}=i,{x:_,y:p}=o,m=J(e.position),k=q({x:_-m.x+g/2,y:p-m.y+h/2}),S=_n([e.position,k],([F,x])=>({x:F.x+x.x,y:F.y+x.y})),M=t.transforms,P=t.dimensions,T=q(c||"self"),E=()=>{const F=document.getElementById(n),x=J(T),ie=dn[x];if(!F)return;const{x:O,y:B,width:R,height:X}=F.getBoundingClientRect(),ne=J(k),A=J(S),{scaled:K,scale:I}=Zl(P,M,{x:O,y:B}),V=K.x-A.x,we=K.y-A.y;k.set({x:ne.x+V+R/I/2+ie.x*R/I/2,y:ne.y+we+X/I/2+ie.y*X/I/2})},D=_n([e.moving,e.resizingWidth,e.resizingHeight,e.rotating],([F,x,ie,O])=>F||x||ie||O),H=_n([e.rotation],([F])=>F);return{id:n,position:S,offset:k,direction:T,dynamic:q(u||!1),type:s,edge:r,moving:D,mounted:q(!1),recalculatePosition:E,connected:q(new Set),store:l||null,inputKey:f||null,edgeColor:a||q(null),rotation:H,node:e}}function ir(t){const e=JSON.parse(t),n=Vi(e.id,{...e,initialZoom:e.transforms.scale});return Object.entries(e.nodes).forEach(([o,i])=>{const r=Hi(i);Object.entries(i.anchors).forEach(([s,c])=>{const u=$i(r,s,c.position,{width:0,height:0},c.input,c.direction,c.dynamic);r.anchors.add(u,s)}),n.nodes.add(r,o)}),Object.entries(e.edges).forEach(([o,i])=>{n.edges.add(i,o)}),n}function lr(t){let e;const n=t[2].default,o=Ae(n,t,t[1],null);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,[l]){o&&o.p&&(!e||l&2)&&Pe(o,n,i,i[1],e?ve(n,i[1],l,null):De(i[1]),null)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function rr(t,e,n){let{$$slots:o={},$$scope:i}=e,{edge:l}=e;return Re("edge",l),t.$$set=r=>{"edge"in r&&n(0,l=r.edge),"$$scope"in r&&n(1,i=r.$$scope)},[l,i,o]}class el extends je{constructor(e){super(),Xe(this,e,rr,lr,Be,{edge:0})}}const sr=t=>({}),wo=t=>({}),cr=t=>({path:t[0]&1024,hovering:t[0]&8192}),ko=t=>({path:t[10],destroy:t[7],hovering:t[13]});function ur(t){let e,n,o,i,l;const r=t[89].default,s=Ae(r,t,t[88],ko),c=s||fr(t);let u=t[8]&&Co(t);return{c(){e=pt("svg"),n=pt("path"),c&&c.c(),u&&u.c(),d(n,"role","presentation"),d(n,"id",t[36]+"-target"),d(n,"class","target svelte-eznx2t"),d(n,"d",t[10]),_e(n,"cursor",t[36]==="cursor"||!t[2]&&!t[1]),W(n,"cursor",t[2]||t[13]?"pointer":"move"),W(n,"--prop-target-edge-color",t[2]||t[13]?t[6]||null:"transparent"),d(e,"class","edges-wrapper svelte-eznx2t"),W(e,"z-index",t[15])},m(f,a){G(f,e,a),Z(e,n),t[92](n),c&&c.m(e,null),u&&u.m(e,null),t[93](e),o=!0,i||(l=[pe(n,"mousedown",function(){pn(t[2])&&t[2].apply(this,arguments)}),pe(n,"mouseenter",t[90]),pe(n,"mouseleave",t[91])],i=!0)},p(f,a){t=f,(!o||a[0]&1024)&&d(n,"d",t[10]),(!o||a[0]&6|a[1]&32)&&_e(n,"cursor",t[36]==="cursor"||!t[2]&&!t[1]),a[0]&8196&&W(n,"cursor",t[2]||t[13]?"pointer":"move"),a[0]&8260&&W(n,"--prop-target-edge-color",t[2]||t[13]?t[6]||null:"transparent"),s?s.p&&(!o||a[0]&9216|a[2]&67108864)&&Pe(s,r,t,t[88],o?ve(r,t[88],a,cr):De(t[88]),ko):c&&c.p&&(!o||a[0]&263177)&&c.p(t,o?a:[-1,-1,-1,-1]),t[8]?u?(u.p(t,a),a[0]&256&&b(u,1)):(u=Co(t),u.c(),b(u,1),u.m(e,null)):u&&(Le(),w(u,1,1,()=>{u=null}),Ie()),a[0]&32768&&W(e,"z-index",t[15])},i(f){o||(b(c,f),b(u),o=!0)},o(f){w(c,f),w(u),o=!1},d(f){f&&j(e),t[92](null),c&&c.d(f),u&&u.d(),t[93](null),i=!1,ht(l)}}}function fr(t){let e;return{c(){e=pt("path"),d(e,"id",t[36]),d(e,"class","edge svelte-eznx2t"),d(e,"d",t[10]),_e(e,"animate",t[0]),W(e,"--prop-edge-color",t[18]),W(e,"--prop-stroke-width",t[3]?t[3]+"px":null)},m(n,o){G(n,e,o)},p(n,o){o[0]&1024&&d(e,"d",n[10]),o[0]&1&&_e(e,"animate",n[0]),o[0]&262144&&W(e,"--prop-edge-color",n[18]),o[0]&8&&W(e,"--prop-stroke-width",n[3]?n[3]+"px":null)},d(n){n&&j(e)}}}function Co(t){let e,n,o,i,l;const r=t[89].label,s=Ae(r,t,t[88],wo),c=s||ar(t);return{c(){e=pt("foreignObject"),n=te("span"),c&&c.c(),d(n,"class","label-wrapper svelte-eznx2t"),d(e,"x",o=t[12].x),d(e,"y",i=t[12].y),d(e,"width","100%"),d(e,"height","100%"),d(e,"class","svelte-eznx2t")},m(u,f){G(u,e,f),Z(e,n),c&&c.m(n,null),l=!0},p(u,f){s?s.p&&(!l||f[2]&67108864)&&Pe(s,r,u,u[88],l?ve(r,u[88],f,sr):De(u[88]),wo):c&&c.p&&(!l||f[0]&560)&&c.p(u,l?f:[-1,-1,-1,-1]),(!l||f[0]&4096&&o!==(o=u[12].x))&&d(e,"x",o),(!l||f[0]&4096&&i!==(i=u[12].y))&&d(e,"y",i)},i(u){l||(b(c,u),l=!0)},o(u){w(c,u),l=!1},d(u){u&&j(e),c&&c.d(u)}}}function ar(t){let e,n;return{c(){e=te("div"),n=qt(t[9]),d(e,"class","default-label svelte-eznx2t"),W(e,"--prop-label-color",t[4]),W(e,"--prop-label-text-color",t[5])},m(o,i){G(o,e,i),Z(e,n)},p(o,i){i[0]&512&&$t(n,o[9]),i[0]&16&&W(e,"--prop-label-color",o[4]),i[0]&32&&W(e,"--prop-label-text-color",o[5])},d(o){o&&j(e)}}}function dr(t){let e,n,o=t[21]&&t[22]&&ur(t);return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),G(i,e,l),n=!0},p(i,l){i[21]&&i[22]&&o.p(i,l)},i(i){n||(b(o),n=!0)},o(i){w(o),n=!1},d(i){i&&j(e),o&&o.d(i)}}}let Yn;function hr(t){const e=t.parentNode;if(!e)return;e.removeChild(t);const n=document.querySelector(".svelvet-graph-wrapper");n&&n.appendChild(t)}function gr(t,e,n){var no,oo;let o,i,l,r,s,c,u,f,a,g,h,_,p,m,k,S,M,P,T,E,D,H,F,x,ie,O,B,R,X,ne,A,K,I=ee,V=()=>(I(),I=Ve(X,$=>n(71,K=$)),X),we,Ce=ee,Me=()=>(Ce(),Ce=Ve(R,$=>n(72,we=$)),R),v,me,Q,ze,$e,he,U,ae,ye,ke,qe,ct,et,z,tt=ee,ot=()=>(tt(),tt=Ve(l,$=>n(86,z=$)),l),L,Se=ee,Ue=()=>(Se(),Se=Ve(i,$=>n(87,L=$)),i);t.$$.on_destroy.push(()=>I()),t.$$.on_destroy.push(()=>Ce()),t.$$.on_destroy.push(()=>tt()),t.$$.on_destroy.push(()=>Se());let{$$slots:be={},$$scope:it}=e;const ut=to(be),rt=Ne("edgeStore"),mt=Ne("edgeStyle"),st=Ne("raiseEdgesOnSelect"),St=Ne("edgesAboveNode");let{edge:Je=Ne("edge")}=e,{straight:ft=mt==="straight"}=e,{step:gt=mt==="step"}=e,{animate:Nt=!1}=e,{label:kt=""}=e,{enableHover:Zt=!1}=e,{edgeClick:de=null}=e,{labelPosition:At=.5}=e,{width:It=null}=e,{color:vt=null}=e,{labelColor:zt=null}=e,{textColor:Ot=null}=e,{cornerRadius:at=8}=e,{targetColor:Tt=null}=e;const Oe=Je.source,We=Je.target,Dt=Oe.direction;Y(t,Dt,$=>n(74,me=$));const Ct=We.direction;Y(t,Ct,$=>n(73,v=$));const Bt=Oe.rotation;Y(t,Bt,$=>n(81,ye=$));const Wt=We.rotation;Y(t,Wt,$=>n(80,ae=$));const Xt=Oe.position;Y(t,Xt,$=>n(85,et=$));const jt=We.position;Y(t,jt,$=>n(84,ct=$));const Vt=Oe.dynamic;Y(t,Vt,$=>n(77,$e=$));const N=We.dynamic;Y(t,N,$=>n(76,ze=$));const Ee=Oe.moving;Y(t,Ee,$=>n(79,U=$));const Ke=We.moving;Y(t,Ke,$=>n(78,he=$));const Fe=(no=Oe.node)==null?void 0:no.position;Y(t,Fe,$=>n(83,qe=$));const Qe=(oo=We.node)==null?void 0:oo.position;Y(t,Qe,$=>n(82,ke=$));const y=Je.type;Y(t,y,$=>n(75,Q=$));const re=Je.id;let ge,fe,Ye={x:0,y:0},lt=!1,Ge=!1,C=!1,Te=!1,_t=!1,Pt;Je.rendered.set(!0),Ft(()=>{setTimeout(()=>{fe&&n(12,Ye=jn(fe,At))},0),hr(Pt)}),Wi(()=>{fe&&n(12,Ye=jn(fe,At))}),Dn(()=>{Pt.remove(),cancelAnimationFrame(Yn)});function Gt(){lt&&(fe&&n(12,Ye=jn(fe,At)),Yn=requestAnimationFrame(Gt))}function zn(){if(Oe.id===null||We.id===null)return;const $=rt.match(Oe,We);rt.delete($[0]),Oe==null||Oe.connected.update(Et=>(We&&Et.delete(We),Et)),We==null||We.connected.update(Et=>(Oe&&Et.delete(Oe),Et))}const On=()=>n(13,_t=!0),nl=()=>n(13,_t=!1);function ol($){Kt[$?"unshift":"push"](()=>{fe=$,n(11,fe)})}function il($){Kt[$?"unshift":"push"](()=>{Pt=$,n(14,Pt)})}return t.$$set=$=>{"edge"in $&&n(37,Je=$.edge),"straight"in $&&n(38,ft=$.straight),"step"in $&&n(39,gt=$.step),"animate"in $&&n(0,Nt=$.animate),"label"in $&&n(40,kt=$.label),"enableHover"in $&&n(1,Zt=$.enableHover),"edgeClick"in $&&n(2,de=$.edgeClick),"labelPosition"in $&&n(41,At=$.labelPosition),"width"in $&&n(3,It=$.width),"color"in $&&n(42,vt=$.color),"labelColor"in $&&n(4,zt=$.labelColor),"textColor"in $&&n(5,Ot=$.textColor),"cornerRadius"in $&&n(43,at=$.cornerRadius),"targetColor"in $&&n(6,Tt=$.targetColor),"$$scope"in $&&n(88,it=$.$$scope)},t.$$.update=()=>{var $;if(t.$$.dirty[2]&49152&&n(53,o=$e||ze),t.$$.dirty[1]&64&&ot(n(19,l=($=Je.label)==null?void 0:$.text)),t.$$.dirty[1]&2048|t.$$.dirty[2]&33554432&&n(18,r=vt||L||null),t.$$.dirty[1]&512|t.$$.dirty[2]&16777216&&n(9,s=kt||z||""),t.$$.dirty[0]&512&&n(8,c=s||ut.label),t.$$.dirty[2]&8388608&&n(70,u=et),t.$$.dirty[2]&4194304&&n(69,f=ct),t.$$.dirty[2]&2097152&&n(54,a=qe),t.$$.dirty[2]&1048576&&n(55,g=ke),t.$$.dirty[2]&256&&n(50,h=u.x),t.$$.dirty[2]&256&&n(49,_=u.y),t.$$.dirty[2]&128&&n(52,p=f.x),t.$$.dirty[2]&128&&n(51,m=f.y),t.$$.dirty[1]&2621440&&n(68,k=p-h),t.$$.dirty[1]&1310720&&n(67,S=m-_),t.$$.dirty[2]&64&&n(66,M=Math.abs(k)),t.$$.dirty[2]&32&&n(65,P=Math.abs(S)),t.$$.dirty[2]&16&&n(63,T=Math.max(30,Math.min(600,M/2))),t.$$.dirty[2]&8&&n(61,E=Math.max(30,Math.min(600,P/2))),t.$$.dirty[1]&29458432&&o&&Oe.node&&We.node){const Et=g.x-a.x,Jt=g.y-a.y;n(46,C=Jt>0),n(47,Te=Et>0);let Yt,fn;if(C){const Lt=J(Oe.node.dimensions.height),nt=a.y+Lt;Yt=g.y-nt}else{const Lt=J(We.node.dimensions.height),nt=g.y+Lt;Yt=a.y-nt}if(Te){const Lt=J(Oe.node.dimensions.width),nt=a.x+Lt;fn=g.x-nt}else{const Lt=J(We.node.dimensions.width),nt=g.x+Lt;fn=a.x-nt}n(45,Ge=Yt>fn)}if(t.$$.dirty[1]&4308992|t.$$.dirty[2]&49152&&o){let Et,Jt;Ge?(Et=C?"south":"north",Jt=C?"north":"south"):(Et=Te?"east":"west",Jt=Te?"west":"east"),$e&&oe(Dt,me=Et,me),ze&&oe(Ct,v=Jt,v)}if(t.$$.dirty[2]&528384&&n(64,D=po(dn[me],ye||0)),t.$$.dirty[2]&264192&&n(62,H=po(dn[v],ae||0)),t.$$.dirty[1]&524288|t.$$.dirty[2]&6&&n(60,F=h+D.x*T),t.$$.dirty[1]&1074003968|t.$$.dirty[2]&4&&n(59,x=_+D.y*E),t.$$.dirty[1]&2097152|t.$$.dirty[2]&3&&n(58,ie=p+H.x*T),t.$$.dirty[1]&1074790400|t.$$.dirty[2]&1&&n(57,O=m+H.y*E),t.$$.dirty[1]&1006632960&&n(56,B=`C ${F}, ${x} ${ie}, ${O}`),t.$$.dirty[1]&37486976|t.$$.dirty[2]&8192&&(!gt||re==="cursor"||Q==="bezier")&&n(10,ge=`M ${h}, ${_} ${!ft&&B} ${p}, ${m}`),t.$$.dirty[0]&256|t.$$.dirty[1]&8192|t.$$.dirty[2]&196608&&(c&&!lt&&(U||he||re==="cursor")?(n(44,lt=!0),Gt()):lt&&!U&&!he&&re!=="cursor"&&(n(44,lt=!1),cancelAnimationFrame(Yn))),t.$$.dirty[1]&3936512|t.$$.dirty[2]&14336&&gt&&re!=="cursor"&&!(Q&&Q==="bezier")){const Et={x:h,y:_,direction:dn[me]},Jt={x:p,y:m,direction:dn[v]},Yt=Jl(Et,Jt,Dl),fn=(Lt,nt,an)=>{if(nt<Yt.length-1){const Tn=Yl(Lt,Yt[nt+1]);return Hl(an,Tn)}return""};n(10,ge=Yt.reduce((Lt,nt,an)=>{const Tn=Math.sign(nt.x),ll=Math.sign(nt.y);let io=nt.x,lo=nt.y,ro="";if(at){const so=Yt[an+1]||{x:0,y:0},co=Yt[an-1]||{x:0,y:0},rl=kn(nt.x,so.x,at),sl=kn(so.y,nt.y,at),cl=kn(co.x,nt.x,at),ul=kn(co.y,nt.y,at),uo=Math.min(cl,ul),Bn=Math.min(rl,sl);nt.x?io=nt.x-(Bn+uo)*Tn:lo=nt.y-(Bn+uo)*ll,ro=fn(nt,an,Bn)}return ql(Lt,io,lo,ro)},`M ${h}, ${_}`))}t.$$.dirty[2]&1536&&n(48,ne=Math.max(we,K)),t.$$.dirty[1]&131072|t.$$.dirty[2]&1536&&n(15,A=St==="all"?1e5:St?ne:st===!0?ne-1:st==="source"?we-1:st==="target"?K-1:0)},Ue(n(20,i=(Oe==null?void 0:Oe.edgeColor)||(We==null?void 0:We.edgeColor)||null)),Me(n(17,R=Oe.node.zIndex||0)),V(n(16,X=We.node.zIndex||0)),[Nt,Zt,de,It,zt,Ot,Tt,zn,c,s,ge,fe,Ye,_t,Pt,A,X,R,r,l,i,Oe,We,Dt,Ct,Bt,Wt,Xt,jt,Vt,N,Ee,Ke,Fe,Qe,y,re,Je,ft,gt,kt,At,vt,at,lt,Ge,C,Te,ne,_,h,m,p,o,a,g,B,O,ie,x,F,E,H,T,D,P,M,S,k,f,u,K,we,v,me,Q,ze,$e,he,U,ae,ye,ke,qe,ct,et,z,L,it,be,On,nl,ol,il]}class tl extends je{constructor(e){super(),Xe(this,e,gr,dr,Be,{edge:37,straight:38,step:39,animate:0,label:40,enableHover:1,edgeClick:2,labelPosition:41,width:3,color:42,labelColor:4,textColor:5,cornerRadius:43,targetColor:6,destroy:7},null,[-1,-1,-1,-1])}get destroy(){return this.$$.ctx[7]}}function _r(t){let e;return{c(){e=te("div"),d(e,"class","svelvet-anchor svelte-19t6skv"),_e(e,"output",t[0]),_e(e,"input",t[1]),_e(e,"connected",t[3]),_e(e,"connecting",t[2]),_e(e,"hovering",t[4]),W(e,"--prop-anchor-color",t[5])},m(n,o){G(n,e,o)},p(n,[o]){o&1&&_e(e,"output",n[0]),o&2&&_e(e,"input",n[1]),o&8&&_e(e,"connected",n[3]),o&4&&_e(e,"connecting",n[2]),o&16&&_e(e,"hovering",n[4]),o&32&&W(e,"--prop-anchor-color",n[5])},i:ee,o:ee,d(n){n&&j(e)}}}function mr(t,e,n){let{output:o}=e,{input:i}=e,{connecting:l}=e,{connected:r}=e,{hovering:s}=e,{bgColor:c}=e;return t.$$set=u=>{"output"in u&&n(0,o=u.output),"input"in u&&n(1,i=u.input),"connecting"in u&&n(2,l=u.connecting),"connected"in u&&n(3,r=u.connected),"hovering"in u&&n(4,s=u.hovering),"bgColor"in u&&n(5,c=u.bgColor)},[o,i,l,r,s,c]}class br extends je{constructor(e){super(),Xe(this,e,mr,_r,Be,{output:0,input:1,connecting:2,connected:3,hovering:4,bgColor:5})}}const pr=t=>({}),So=t=>({});function No(t){const e=t.slice(),n=e[7].component;return e[84]=n,e}function Hn(t){const e=t.slice(),n=e[14].get("cursor");return e[7]=n,e}function Eo(t,e,n){const o=t.slice();o[85]=e[n];const i=o[14].fetch(o[23],o[85]);return o[7]=i,o}const yr=t=>({}),Mo=t=>({});function qn(t){const e=t.slice(),n=e[7].component;return e[84]=n,e}const wr=t=>({linked:t[0]&512,hovering:t[0]&1024,connecting:t[0]&2048}),Ao=t=>{var e;return{linked:((e=t[9])==null?void 0:e.size)>=1,hovering:t[10],connecting:t[11]}};function vo(t){var o;let e,n;return e=new br({props:{output:t[2],input:t[1],connecting:t[11],hovering:t[10],bgColor:t[0],connected:((o=t[9])==null?void 0:o.size)>=1}}),{c(){ue(e.$$.fragment)},m(i,l){se(e,i,l),n=!0},p(i,l){var s;const r={};l[0]&4&&(r.output=i[2]),l[0]&2&&(r.input=i[1]),l[0]&2048&&(r.connecting=i[11]),l[0]&1024&&(r.hovering=i[10]),l[0]&1&&(r.bgColor=i[0]),l[0]&512&&(r.connected=((s=i[9])==null?void 0:s.size)>=1),e.$set(r)},i(i){n||(b(e.$$.fragment,i),n=!0)},o(i){w(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function kr(t){let e,n,o=!t[5]&&vo(t);return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),G(i,e,l),n=!0},p(i,l){i[5]?o&&(Le(),w(o,1,1,()=>{o=null}),Ie()):o?(o.p(i,l),l[0]&32&&b(o,1)):(o=vo(i),o.c(),b(o,1),o.m(e.parentNode,e))},i(i){n||(b(o),n=!0)},o(i){w(o),n=!1},d(i){i&&j(e),o&&o.d(i)}}}function Po(t){let e,n;return e=new el({props:{edge:t[7],$$slots:{default:[Er]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p(o,i){const l={};i[0]&512&&(l.edge=o[7]),i[0]&512|i[1]&4194304&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Cr(t){let e,n;return e=new tl({}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Sr(t){let e,n;return e=new t[84]({}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Nr(t){let e,n,o,i;const l=[Sr,Cr],r=[];function s(c,u){return c[84]?0:1}return e=s(t),n=r[e]=l[e](t),{c(){n.c(),o=He()},m(c,u){r[e].m(c,u),G(c,o,u),i=!0},p(c,u){let f=e;e=s(c),e!==f&&(Le(),w(r[f],1,1,()=>{r[f]=null}),Ie(),n=r[e],n||(n=r[e]=l[e](c),n.c()),b(n,1),n.m(o.parentNode,o))},i(c){i||(b(n),i=!0)},o(c){w(n),i=!1},d(c){c&&j(o),r[e].d(c)}}}function Er(t){let e;const n=t[49].edge,o=Ae(n,t,t[53],Mo),i=o||Nr(t);return{c(){i&&i.c()},m(l,r){i&&i.m(l,r),e=!0},p(l,r){o?o.p&&(!e||r[1]&4194304)&&Pe(o,n,l,l[53],e?ve(n,l[53],r,yr):De(l[53]),Mo):i&&i.p&&(!e||r[0]&512)&&i.p(l,e?r:[-1,-1,-1])},i(l){e||(b(i,l),e=!0)},o(l){w(i,l),e=!1},d(l){i&&i.d(l)}}}function Do(t,e){let n,o,i,l=e[7]&&e[7].source===e[23]&&Po(qn(e));return{key:t,first:null,c(){n=He(),l&&l.c(),o=He(),this.first=n},m(r,s){G(r,n,s),l&&l.m(r,s),G(r,o,s),i=!0},p(r,s){e=r,e[7]&&e[7].source===e[23]?l?(l.p(qn(e),s),s[0]&512&&b(l,1)):(l=Po(qn(e)),l.c(),b(l,1),l.m(o.parentNode,o)):l&&(Le(),w(l,1,1,()=>{l=null}),Ie())},i(r){i||(b(l),i=!0)},o(r){w(l),i=!1},d(r){r&&(j(n),j(o)),l&&l.d(r)}}}function Lo(t){let e,n,o=t[7]&&Mr(No(t));return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),G(i,e,l),n=!0},p(i,l){i[7]&&o.p(No(i),l)},i(i){n||(b(o),n=!0)},o(i){w(o),n=!1},d(i){i&&j(e),o&&o.d(i)}}}function Mr(t){let e,n;return e=new el({props:{edge:t[7],$$slots:{default:[Dr]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p(o,i){const l={};i[1]&4194304&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Ar(t){let e,n;return e=new tl({}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function vr(t){let e,n;return e=new t[84]({}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Pr(t){let e,n,o,i;const l=[vr,Ar],r=[];function s(c,u){return c[84]?0:1}return e=s(t),n=r[e]=l[e](t),{c(){n.c(),o=He()},m(c,u){r[e].m(c,u),G(c,o,u),i=!0},p:ee,i(c){i||(b(n),i=!0)},o(c){w(n),i=!1},d(c){c&&j(o),r[e].d(c)}}}function Dr(t){let e;const n=t[49].edge,o=Ae(n,t,t[53],So),i=o||Pr(t);return{c(){i&&i.c()},m(l,r){i&&i.m(l,r),e=!0},p(l,r){o&&o.p&&(!e||r[1]&4194304)&&Pe(o,n,l,l[53],e?ve(n,l[53],r,pr):De(l[53]),So)},i(l){e||(b(i,l),e=!0)},o(l){w(i,l),e=!1},d(l){i&&i.d(l)}}}function Lr(t){let e,n,o,i=[],l=new Map,r,s,c,u,f;const a=t[49].default,g=Ae(a,t,t[53],Ao),h=g||kr(t);let _=yt(Array.from(t[9]));const p=k=>k[85].id;for(let k=0;k<_.length;k+=1){let S=Eo(t,_,k),M=p(S);l.set(M,i[k]=Do(M,S))}let m=t[11]&&Lo(Hn(t));return{c(){var k;e=te("div"),h&&h.c(),o=le();for(let S=0;S<i.length;S+=1)i[S].c();r=le(),m&&m.c(),s=He(),d(e,"id",(k=t[23])==null?void 0:k.id),d(e,"class","anchor-wrapper svelte-bazd6o"),d(e,"role","button"),d(e,"tabindex","0"),d(e,"title",n=t[6]||""),_e(e,"locked",t[4])},m(k,S){G(k,e,S),h&&h.m(e,null),t[52](e),G(k,o,S);for(let M=0;M<i.length;M+=1)i[M]&&i[M].m(k,S);G(k,r,S),m&&m.m(k,S),G(k,s,S),c=!0,u||(f=[pe(e,"mouseenter",t[50]),pe(e,"mouseleave",t[51]),pe(e,"mousedown",bt(Mt(t[25]))),pe(e,"mouseup",bt(t[24])),pe(e,"touchstart",bt(Mt(t[25]))),pe(e,"touchend",bt(t[24]))],u=!0)},p(k,S){g?g.p&&(!c||S[0]&3584|S[1]&4194304)&&Pe(g,a,k,k[53],c?ve(a,k[53],S,wr):De(k[53]),Ao):h&&h.p&&(!c||S[0]&3623)&&h.p(k,c?S:[-1,-1,-1]),(!c||S[0]&64&&n!==(n=k[6]||""))&&d(e,"title",n),(!c||S[0]&16)&&_e(e,"locked",k[4]),S[0]&8405504|S[1]&4194304&&(_=yt(Array.from(k[9])),Le(),i=An(i,S,p,1,k,_,l,r.parentNode,Mn,Do,r,Eo),Ie()),k[11]?m?(m.p(Hn(k),S),S[0]&2048&&b(m,1)):(m=Lo(Hn(k)),m.c(),b(m,1),m.m(s.parentNode,s)):m&&(Le(),w(m,1,1,()=>{m=null}),Ie())},i(k){if(!c){b(h,k);for(let S=0;S<_.length;S+=1)b(i[S]);b(m),c=!0}},o(k){w(h,k);for(let S=0;S<i.length;S+=1)w(i[S]);w(m),c=!1},d(k){k&&(j(e),j(o),j(r),j(s)),h&&h.d(k),t[52](null);for(let S=0;S<i.length;S+=1)i[S].d(k);m&&m.d(k),u=!1,ht(f)}}}let Kn;const Rt=q(null);function Ir(t,e,n){if(e==="self")return;const o=t.parentNode;if(!o)return;o.removeChild(t);const i=document.querySelector(`#anchors-${e}-${n.id}`);i&&(i.appendChild(t),t&&n.recalculateAnchors())}function zr(t,e,n){let o,i,l,r,s=ee,c=()=>(s(),s=Ve(he,y=>n(54,r=y)),he),u,f=ee,a,g,h=ee,_=()=>(h(),h=Ve(i,y=>n(9,g=y)),i),p,m,k,S,M=ee,P=()=>(M(),M=Ve(l,y=>n(46,S=y)),l),T,E,D,H;Y(t,Rt,y=>n(41,u=y)),t.$$.on_destroy.push(()=>s()),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>M());let{$$slots:F={},$$scope:x}=e;const ie=Ne("dynamic"),O=Ne("node"),B=Ne("edgeStore"),R=Ne("cursorAnchor"),X=Ne("direction"),ne=Ne("mounted");Y(t,ne,y=>n(48,E=y));const A=Ne("graph"),K=Ne("nodeStore"),I=Ne("graphEdge"),V=Ne("nodeConnectEvent");Y(t,V,y=>n(42,a=y));const we=Ne("anchorsMounted");Y(t,we,y=>n(55,D=y));let{bgColor:Ce=null}=e,{id:Me=0}=e,{input:v=!1}=e,{output:me=!1}=e,{multiple:Q=me?!0:!v}=e,{dynamic:ze=ie||!1}=e,{edge:$e=null}=e,{inputsStore:he=null}=e;c();let{key:U=null}=e,{outputStore:ae=null}=e,{connections:ye=[]}=e,{edgeColor:ke=q(null)}=e,{edgeLabel:qe=""}=e,{locked:ct=!1}=e,{nodeConnect:et=!1}=e,{edgeStyle:z=null}=e,{invisible:tt=!1}=e,{direction:ot=X==="TD"?v?"north":"south":v?"west":"east"}=e,{title:L=""}=e;const Se=cn(),Ue=cn();let be,it=!1,ut=!1,rt=0,mt=v===me?null:v?"input":"output",st=[];const St=O.edge,Je=O.anchors;Y(t,Je,y=>n(47,T=y));const ft=O.resizingWidth;Y(t,ft,y=>n(45,k=y));const gt=O.resizingHeight;Y(t,gt,y=>n(44,m=y));const Nt=O.rotating;Y(t,Nt,y=>n(43,p=y));const kt=O.connections;Y(t,kt,y=>n(56,H=y));const Zt=`A-${Me||Je.count()+1}/${O.id}`,de=$i(A,O,Zt,{x:0,y:0},{width:0,height:0},he||ae||null,$e||St||I||null,mt,ot,ze,U,ke);Je.add(de,de.id),Ft(()=>{be&&de.recalculatePosition();const y=Array.from(J(O.anchors)).reduce((re,[,ge])=>(ge.type==="output"&&re++,re),0);if(H!=null&&H.length&&!v){const re=[];let ge=null;H.forEach((fe,Ye)=>{fe&&(ge===null&&(ge=Ye),(Ye-ge)%y===0?(st.push(fe),re.push(null)):re.push(fe))}),oe(kt,H=re,H)}oe(we,D++,D)}),Wi(()=>{be&&de.recalculatePosition()}),Dn(()=>{Wt(),cancelAnimationFrame(Kn)});function At(y){var C;B.delete("cursor");const re={x:y.changedTouches[0].clientX,y:y.changedTouches[0].clientY},ge=document.elementFromPoint(re.x,re.y);if(!ge)return;const fe=ge.parentElement;if(!fe)return;const Ye=fe.id,lt=Ye.split("/")[1],Ge=(C=K.get(lt))==null?void 0:C.anchors.get(Ye);Ge&&(B.delete("cursor"),It(de,Ge,y))}function It(y,re,ge){const fe=Oe(y,re);fe&&We(),ge.shiftKey||Ct(fe)}function vt(y){if("changedTouches"in y&&o){At(y);return}if(!o){if(g!=null&&g.size&&!Q){B.delete("cursor"),y.shiftKey||Ct(!1);return}u&&Tt(y)}}function zt(y){if(!ct){if(g!=null&&g.size&&!Q&&!u)return Xt();if(!u)return Ot();Tt(y)}}function Ot(){v===me?(oe(Rt,u={anchor:de,store:null,key:null},u),at(de,R)):v?(oe(Rt,u={anchor:de,store:he,key:U},u),at(R,de)):me&&(oe(Rt,u={anchor:de,store:ae,key:null},u),at(de,R))}function at(y,re,ge=!1){const fe={color:ke,label:{text:qe}};ge&&(fe.disconnect=!0),z&&(fe.type=z);const Ye=go({source:y,target:re},(y==null?void 0:y.edge)||null,fe);B.add(Ye,"cursor")}function Tt(y){if(B.delete("cursor"),!u)return;const re=u.anchor.type;if(u.anchor===de||re===de.type&&re){Ct(!1);return}de.recalculatePosition();let ge,fe;v===me?re==="input"?(ge=de,fe=u.anchor):(ge=u.anchor,fe=de):v?(ge=u.anchor,fe=de):(ge=de,fe=u.anchor),It(ge,fe,y)}function Oe(y,re){if(y===re||J(y.connected).has(de))return!1;const ge={color:ke,label:{text:qe}};z&&(ge.type=z);const fe=go({source:y,target:re},(y==null?void 0:y.edge)||null,ge);return!y.node||!re.node?!1:(B.add(fe,new Set([y,re,y.node,re.node])),!0)}function We(){if(v&&u&&u.store)r&&U&&he&&typeof he.set=="function"&&typeof he.update=="function"&&oe(he,r[U]=u.store,r);else if(me&&u&&u.store){const{store:y,key:re}=u;y&&re&&typeof y.update=="function"&&y.update(ge=>(ae&&(ge[re]=ae),ge))}}function Dt(){r&&U&&r[U]&&oe(he,r[U]=q(J(r[U])),r)}function Ct(y){(y||!a)&&(oe(Rt,u=null,u),oe(V,a=null,a))}function Bt(){it&&(be&&de.recalculatePosition(),Kn=requestAnimationFrame(Bt))}function Wt(){B.delete("cursor"),B.match(de).forEach(re=>B.delete(re)),Ct(!1),Dt()}function Xt(){if(J(de.connected).size>1)return;const y=Array.from(J(de.connected))[0];if(y.type!=="input")if(Wt(),y.type==="output"){at(y,R,!0),Dt();const re=y.store;oe(Rt,u={anchor:y,store:re,key:null},u)}else at(y,R,!0),oe(Rt,u={anchor:y,store:null,key:null},u)}function jt(){st.forEach((y,re)=>{if(!y)return;Ee(y)&&n(26,ye[re]=null,ye)}),n(40,st=st.filter(y=>y!==null))}function Vt(){ye.forEach(y=>{y&&Ee(y)})}function N(y){const re=`N-${y[0]}`,ge=K.get(re);if(!ge)return;const fe=ge.anchors.get(`A-${y[1]}/N-${y[0]}`);if(!fe)return;const Ye=B.match(de,fe);Ye&&B.delete(Ye[0])}const Ee=y=>{let re,ge,fe=null;Array.isArray(y)?(re=y[0].toString(),ge=y[1].toString()):(re=y.toString(),ge=null);const Ye=`N-${re}`,lt=K.get(Ye);if(!lt)return!1;if(ge){const Ge=`A-${ge}/${Ye}`;fe=lt.anchors.get(Ge)||null}else{const Ge=J(lt.anchors),C=Array.from(Ge.values());if(!C.length)return!1;fe=C.reduce((Te,_t)=>!Te&&_t.type==="output"?null:_t.type==="output"?Te:!Te||J(_t.connected).size<J(Te.connected).size?_t:Te,null)}if(!fe)return!1;if(Oe(de,fe),fe.store&&(he||ae)){if(v&&fe.type==="output")r&&U&&he&&typeof he.set=="function"&&typeof he.update=="function"&&oe(he,r[U]=fe.store,r);else if(me&&fe.type==="input"){const{store:Ge,inputKey:C}=fe;Ge&&C&&typeof Ge.update=="function"&&Ge.update(Te=>(ae&&(Te[C]=ae),Te))}}return!0},Ke=()=>n(10,ut=!0),Fe=()=>n(10,ut=!1);function Qe(y){Kt[y?"unshift":"push"](()=>{be=y,n(8,be)})}return t.$$set=y=>{"bgColor"in y&&n(0,Ce=y.bgColor),"id"in y&&n(27,Me=y.id),"input"in y&&n(1,v=y.input),"output"in y&&n(2,me=y.output),"multiple"in y&&n(28,Q=y.multiple),"dynamic"in y&&n(29,ze=y.dynamic),"edge"in y&&n(7,$e=y.edge),"inputsStore"in y&&c(n(3,he=y.inputsStore)),"key"in y&&n(30,U=y.key),"outputStore"in y&&n(31,ae=y.outputStore),"connections"in y&&n(26,ye=y.connections),"edgeColor"in y&&n(32,ke=y.edgeColor),"edgeLabel"in y&&n(33,qe=y.edgeLabel),"locked"in y&&n(4,ct=y.locked),"nodeConnect"in y&&n(34,et=y.nodeConnect),"edgeStyle"in y&&n(35,z=y.edgeStyle),"invisible"in y&&n(5,tt=y.invisible),"direction"in y&&n(36,ot=y.direction),"title"in y&&n(6,L=y.title),"$$scope"in y&&n(53,x=y.$$scope)},t.$$.update=()=>{if(t.$$.dirty[1]&1024&&n(11,o=(u==null?void 0:u.anchor)===de),t.$$.dirty[0]&536871168|t.$$.dirty[1]&32768&&ze&&be&&Ir(be,S,O),t.$$.dirty[0]&67108864|t.$$.dirty[1]&131072&&E===K.count()&&ye.length&&Vt(),t.$$.dirty[1]&2056&&et&&a&&vt(a),t.$$.dirty[1]&131584&&E===K.count()&&st.length&&jt(),t.$$.dirty[0]&768|t.$$.dirty[1]&98304&&be&&de.recalculatePosition(),t.$$.dirty[1]&28800&&(!it&&(k||m||p)?(n(38,it=!0),Bt()):!k&&!m&&it&&!p&&(n(38,it=!1),cancelAnimationFrame(Kn))),t.$$.dirty[0]&512|t.$$.dirty[1]&256&&g){if(g.size<rt)Ue("disconnection",{node:O,anchor:de});else if(g.size>rt){const y=Array.from(g),re=y[y.length-1];Se("connection",{node:O,anchor:de,connectedNode:re.node,connectedAnchor:re})}n(39,rt=g.size)}},_(n(13,i=de&&de.connected)),P(n(12,l=de==null?void 0:de.direction)),[Ce,v,me,he,ct,tt,L,$e,be,g,ut,o,l,i,B,ne,V,we,Je,ft,gt,Nt,kt,de,vt,zt,ye,Me,Q,ze,U,ae,ke,qe,et,z,ot,N,it,rt,st,u,a,p,m,k,S,T,E,F,Ke,Fe,Qe,x]}class In extends je{constructor(e){super(),Xe(this,e,zr,Lr,Be,{bgColor:0,id:27,input:1,output:2,multiple:28,dynamic:29,edge:7,inputsStore:3,key:30,outputStore:31,connections:26,edgeColor:32,edgeLabel:33,locked:4,nodeConnect:34,edgeStyle:35,invisible:5,direction:36,title:6,disconnect:37},null,[-1,-1,-1])}get disconnect(){return this.$$.ctx[37]}}function Io(t){let e,n,o,i,l;return{c(){e=te("div"),n=le(),o=te("div"),d(e,"class","left svelte-1ryxg7v"),_e(e,"width",t[0]),d(o,"class","right svelte-1ryxg7v"),_e(o,"width",t[0])},m(r,s){G(r,e,s),G(r,n,s),G(r,o,s),i||(l=[Ht(t[16].call(null,e,{left:t[3]})),Ht(t[16].call(null,o,{right:t[4]}))],i=!0)},p(r,s){s[0]&1&&_e(e,"width",r[0]),s[0]&1&&_e(o,"width",r[0])},d(r){r&&(j(e),j(n),j(o)),i=!1,ht(l)}}}function zo(t){let e,n,o,i,l;return{c(){e=te("div"),n=le(),o=te("div"),d(e,"class","top svelte-1ryxg7v"),_e(e,"height",t[1]),d(o,"class","bottom svelte-1ryxg7v"),_e(o,"height",t[1])},m(r,s){G(r,e,s),G(r,n,s),G(r,o,s),i||(l=[Ht(t[16].call(null,e,{top:t[5]})),Ht(t[16].call(null,o,{bottom:t[6]}))],i=!0)},p(r,s){s[0]&2&&_e(e,"height",r[1]),s[0]&2&&_e(o,"height",r[1])},d(r){r&&(j(e),j(n),j(o)),i=!1,ht(l)}}}function Or(t){let e,n,o;return{c(){e=te("div"),d(e,"class","svelte-1ryxg7v"),_e(e,"both",t[7])},m(i,l){G(i,e,l),n||(o=Ht(t[16].call(null,e,{both:t[7]})),n=!0)},p:ee,d(i){i&&j(e),n=!1,o()}}}function Oo(t){let e,n,o;return{c(){e=te("div"),d(e,"class","svelte-1ryxg7v"),_e(e,"rotation",t[2])},m(i,l){G(i,e,l),n||(o=Ht(t[17].call(null,e)),n=!0)},p(i,l){l[0]&4&&_e(e,"rotation",i[2])},d(i){i&&j(e),n=!1,o()}}}function Tr(t){let e,n,o,i,l=t[0]&&Io(t),r=t[1]&&zo(t),s=t[7]&&Or(t),c=t[2]&&Oo(t);return{c(){l&&l.c(),e=le(),r&&r.c(),n=le(),s&&s.c(),o=le(),c&&c.c(),i=He()},m(u,f){l&&l.m(u,f),G(u,e,f),r&&r.m(u,f),G(u,n,f),s&&s.m(u,f),G(u,o,f),c&&c.m(u,f),G(u,i,f)},p(u,f){u[0]?l?l.p(u,f):(l=Io(u),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),u[1]?r?r.p(u,f):(r=zo(u),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),u[7]&&s.p(u,f),u[2]?c?c.p(u,f):(c=Oo(u),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i:ee,o:ee,d(u){u&&(j(e),j(n),j(o),j(i)),l&&l.d(u),r&&r.d(u),s&&s.d(u),c&&c.d(u)}}}function Br(t){return t*(180/Math.PI)}function Wr(t,e,n){let o,i,l,r,s,c,u,f,a,g,h,_;Y(t,dt,U=>n(38,u=U));const p=Ne("graph"),m=Ne("node"),k=Ne("resized");let{width:S=!1}=e,{height:M=!1}=e,{rotation:P=!1}=e,{minHeight:T=0}=e,{minWidth:E=0}=e,D,H=S,F=S,x=M,ie=M,O=S&&M,B=0,R=0,X=J(m.position);const ne=m.position;Y(t,ne,U=>n(32,h=U));const A=m.resizingWidth;Y(t,A,U=>n(31,g=U));const K=m.resizingHeight;Y(t,K,U=>n(30,a=U));const I=m.rotating;Y(t,I,U=>n(28,c=U));const V=m.rotation;Y(t,V,U=>n(29,f=U));const we=m.dimensions.height;Y(t,we,U=>n(26,r=U));const Ce=m.dimensions.width;Y(t,Ce,U=>n(27,s=U));const Me=p.cursor;Y(t,Me,U=>n(33,_=U));let v,me,Q=1;Ft(()=>{try{D=document.querySelector(`#${m.id}`),D&&n(19,[E,T]=Xn(D),E,n(18,T))}catch(U){console.error(U)}});function ze(U,ae){const ye=qe=>{qe.stopPropagation(),qe.preventDefault(),ae.left||ae.top?n(23,Q=-1):n(23,Q=1),Jn.set(!0),oe(dt,u=J(Me),u),n(21,v=s),n(22,me=r),n(20,X=h),ae.both?oe(A,g=!0,g):oe(A,g=!1,g),oe(A,g=ae.left||ae.right||ae.both||!1,g),oe(K,a=ae.top||ae.bottom||ae.both||!1,a),D&&n(19,[E,T]=Xn(D),E,n(18,T)),window.addEventListener("mouseup",ke)},ke=()=>{oe(A,g=!1,g),oe(K,a=!1,a),Jn.set(!1),window.removeEventListener("mouseup",ke)};return U.addEventListener("mousedown",ye),{destroy(){U.removeEventListener("mousedown",ye)}}}function $e(U){const ae=ke=>{ke.stopPropagation(),ke.preventDefault(),B=f,oe(dt,u=J(Me),u);const qe=u.x-l.x,ct=u.y-l.y;R=Math.atan2(ct,qe),oe(I,c=!0,c),window.addEventListener("mouseup",ye)},ye=()=>{oe(I,c=!1,c),window.removeEventListener("mouseup",ye)};return U.addEventListener("mousedown",ae),{destroy(){U.removeEventListener("mousedown",ae)}}}function he(){const U=J(Me),ae=U.x-l.x,ye=U.y-l.y,ke=Math.atan2(ye,ae),qe=R-ke;return B-Br(qe)}return ml(()=>{D&&n(19,[E,T]=Xn(D),E,n(18,T)),s<E&&k.set(!1),r<T&&k.set(!1)}),t.$$set=U=>{"width"in U&&n(0,S=U.width),"height"in U&&n(1,M=U.height),"rotation"in U&&n(2,P=U.rotation),"minHeight"in U&&n(18,T=U.minHeight),"minWidth"in U&&n(19,E=U.minWidth)},t.$$.update=()=>{if(t.$$.dirty[0]&268435456|t.$$.dirty[1]&4&&c&&oe(V,f=he(),f),t.$$.dirty[0]&1624506368|t.$$.dirty[1]&4&&a){const U=J(dt),ae=_,ye=Math.max(T,me+(ae.y-U.y)*Q);ye>T?(k.set(!0),oe(we,r=ye,r)):k.set(!1),Q===-1&&oe(ne,h={x:X.x,y:X.y+ae.y-U.y},h),f!==0&&m.position.update(ke=>({y:X.y-(ye-me)/2,x:ke.x}))}if(t.$$.dirty[0]&548929536|t.$$.dirty[1]&5&&g){const U=J(dt),ae=_,ye=Math.max(E,v+(ae.x-U.x)*Q);ye>E?(k.set(!0),oe(Ce,s=ye,s)):k.set(!1),Q===-1&&oe(ne,h={x:X.x+ae.x-U.x,y:X.y},h),f!==0&&m.position.update(ke=>({x:X.x-(ye-v)/2,y:ke.y}))}t.$$.dirty[1]&2&&n(25,o=h.x),t.$$.dirty[1]&2&&n(24,i=h.y),t.$$.dirty[0]&251658240&&(l={x:o+s/2,y:i+r/2})},[S,M,P,H,F,x,ie,O,ne,A,K,I,V,we,Ce,Me,ze,$e,T,E,X,v,me,Q,i,o,r,s,c,f,a,g,h,_]}class Rr extends je{constructor(e){super(),Xe(this,e,Wr,Tr,Be,{width:0,height:1,rotation:2,minHeight:18,minWidth:19},null,[-1,-1])}}function To(t,e,n){const o=t.slice();return o[28]=e[n],o[34]=n,o}function Bo(t,e,n){const o=t.slice();return o[28]=e[n],o[34]=n,o}function Wo(t,e,n){const o=t.slice();return o[28]=e[n],o}function Ro(t,e,n){const o=t.slice();return o[28]=e[n],o}function Xr(t){let e,n=[],o=new Map,i,l,r=[],s=new Map,c,u=yt({length:t[2]});const f=h=>h[34];for(let h=0;h<u.length;h+=1){let _=Bo(t,u,h),p=f(_);o.set(p,n[h]=Xo(p,_))}let a=yt({length:t[3]});const g=h=>h[34];for(let h=0;h<a.length;h+=1){let _=To(t,a,h),p=g(_);s.set(p,r[h]=jo(p,_))}return{c(){e=te("div");for(let h=0;h<n.length;h+=1)n[h].c();i=le(),l=te("div");for(let h=0;h<r.length;h+=1)r[h].c();d(e,"class","input-anchors svelte-j5bq7k"),_e(e,"top",t[14]),_e(e,"left",t[16]),d(l,"class","output-anchors svelte-j5bq7k"),_e(l,"bottom",t[15]),_e(l,"right",t[17])},m(h,_){G(h,e,_);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);G(h,i,_),G(h,l,_);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(l,null);c=!0},p(h,_){_[0]&16388&&(u=yt({length:h[2]}),Le(),n=An(n,_,f,1,h,u,o,e,Mn,Xo,null,Bo),Ie()),_[0]&16392&&(a=yt({length:h[3]}),Le(),r=An(r,_,g,1,h,a,s,l,Mn,jo,null,To),Ie())},i(h){if(!c){for(let _=0;_<u.length;_+=1)b(n[_]);for(let _=0;_<a.length;_+=1)b(r[_]);c=!0}},o(h){for(let _=0;_<n.length;_+=1)w(n[_]);for(let _=0;_<r.length;_+=1)w(r[_]);c=!1},d(h){h&&(j(e),j(i),j(l));for(let _=0;_<n.length;_+=1)n[_].d();for(let _=0;_<r.length;_+=1)r[_].d()}}}function jr(t){let e,n,o,i=yt({length:t[2]}),l=[];for(let f=0;f<i.length;f+=1)l[f]=Go(Ro(t,i,f));const r=f=>w(l[f],1,1,()=>{l[f]=null});let s=yt({length:t[3]}),c=[];for(let f=0;f<s.length;f+=1)c[f]=Yo(Wo(t,s,f));const u=f=>w(c[f],1,1,()=>{c[f]=null});return{c(){for(let f=0;f<l.length;f+=1)l[f].c();e=le();for(let f=0;f<c.length;f+=1)c[f].c();n=He()},m(f,a){for(let g=0;g<l.length;g+=1)l[g]&&l[g].m(f,a);G(f,e,a);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(f,a);G(f,n,a),o=!0},p(f,a){if(a[0]&4){const g=i.length;i=yt({length:f[2]});let h;for(h=g;h<i.length;h+=1){const _=Ro(f,i,h);l[h]?b(l[h],1):(l[h]=Go(_),l[h].c(),b(l[h],1),l[h].m(e.parentNode,e))}for(Le(),h=i.length;h<l.length;h+=1)r(h);Ie()}if(a[0]&8){const g=s.length;s=yt({length:f[3]});let h;for(h=g;h<s.length;h+=1){const _=Wo(f,s,h);c[h]?b(c[h],1):(c[h]=Yo(_),c[h].c(),b(c[h],1),c[h].m(n.parentNode,n))}for(Le(),h=s.length;h<c.length;h+=1)u(h);Ie()}},i(f){if(!o){for(let a=0;a<i.length;a+=1)b(l[a]);for(let a=0;a<s.length;a+=1)b(c[a]);o=!0}},o(f){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)w(l[a]);c=c.filter(Boolean);for(let a=0;a<c.length;a+=1)w(c[a]);o=!1},d(f){f&&(j(e),j(n)),En(l,f),En(c,f)}}}function Xo(t,e){let n,o,i;return o=new In({props:{input:!0,direction:e[14]?"north":"west"}}),o.$on("connection",e[22]),o.$on("disconnection",e[23]),{key:t,first:null,c(){n=He(),ue(o.$$.fragment),this.first=n},m(l,r){G(l,n,r),se(o,l,r),i=!0},p(l,r){e=l},i(l){i||(b(o.$$.fragment,l),i=!0)},o(l){w(o.$$.fragment,l),i=!1},d(l){l&&j(n),ce(o,l)}}}function jo(t,e){let n,o,i;return o=new In({props:{output:!0,direction:e[14]?"south":"east"}}),o.$on("connection",e[24]),o.$on("disconnection",e[25]),{key:t,first:null,c(){n=He(),ue(o.$$.fragment),this.first=n},m(l,r){G(l,n,r),se(o,l,r),i=!0},p(l,r){e=l},i(l){i||(b(o.$$.fragment,l),i=!0)},o(l){w(o.$$.fragment,l),i=!1},d(l){l&&j(n),ce(o,l)}}}function Go(t){let e,n;return e=new In({}),e.$on("connection",t[18]),e.$on("disconnection",t[19]),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Yo(t){let e,n;return e=new In({}),e.$on("connection",t[20]),e.$on("disconnection",t[21]),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Ho(t){let e,n;return e=new Rr({props:{width:!0,height:!0,rotation:!0}}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Gr(t){let e,n,o,i,l,r,s,c=`${t[1]}px`,u;const f=[jr,Xr],a=[];function g(_,p){return _[7]?0:1}n=g(t),o=a[n]=f[n](t);let h=t[6]&&Ho();return{c(){e=te("div"),o.c(),i=le(),l=te("p"),r=qt(t[5]),s=le(),h&&h.c(),d(l,"class","svelte-j5bq7k"),W(l,"color",t[4]),d(e,"class","default-node svelte-j5bq7k"),_e(e,"selected",t[0]),W(e,"border-radius",c)},m(_,p){G(_,e,p),a[n].m(e,null),Z(e,i),Z(e,l),Z(l,r),Z(e,s),h&&h.m(e,null),u=!0},p(_,p){o.p(_,p),(!u||p[0]&32)&&$t(r,_[5]),p[0]&16&&W(l,"color",_[4]),_[6]?h?p[0]&64&&b(h,1):(h=Ho(),h.c(),b(h,1),h.m(e,null)):h&&(Le(),w(h,1,1,()=>{h=null}),Ie()),(!u||p[0]&1)&&_e(e,"selected",_[0]),p[0]&2&&c!==(c=`${_[1]}px`)&&W(e,"border-radius",c)},i(_){u||(b(o),b(h),u=!0)},o(_){w(o),w(h),u=!1},d(_){_&&j(e),a[n].d(),h&&h.d()}}}function Yr(t,e,n){let o,i,l,r,s,c;const u=Ne("dynamic"),f=Ne("node");let{selected:a}=e;const g=f.label;Y(t,g,X=>n(5,s=X));const h=f.borderRadius;Y(t,h,X=>n(1,o=X));const _=f.textColor;Y(t,_,X=>n(4,r=X));const p=f.inputs;Y(t,p,X=>n(2,i=X));const m=f.outputs;Y(t,m,X=>n(3,l=X));const k=f.resizable;Y(t,k,X=>n(6,c=X));const S=J(f.direction);let M=S==="TD",P=S==="TD",T=S!=="TD",E=S!=="TD";function D(X){xe.call(this,t,X)}function H(X){xe.call(this,t,X)}function F(X){xe.call(this,t,X)}function x(X){xe.call(this,t,X)}function ie(X){xe.call(this,t,X)}function O(X){xe.call(this,t,X)}function B(X){xe.call(this,t,X)}function R(X){xe.call(this,t,X)}return t.$$set=X=>{"selected"in X&&n(0,a=X.selected)},[a,o,i,l,r,s,c,u,g,h,_,p,m,k,M,P,T,E,D,H,F,x,ie,O,B,R]}class Hr extends je{constructor(e){super(),Xe(this,e,Yr,Gr,Be,{selected:0},null,[-1,-1])}}const qr=t=>({}),qo=t=>({}),Kr=t=>({}),Ko=t=>({}),Fr=t=>({}),Fo=t=>({}),Zr=t=>({}),Zo=t=>({}),Vr=t=>({selected:t[0]&2048}),Vo=t=>({grabHandle:t[50],selected:t[11],destroy:t[48]}),Ur=t=>({selected:t[0]&2048}),Uo=t=>({grabHandle:t[50],selected:t[11],destroy:t[48]});function Jo(t){let e,n,o,i,l,r,s,c,u,f,a,g,h,_,p,m=`${t[14].y}px`,k=`${t[14].x}px`,S=`rotate(${t[20]}deg)`,M,P,T;const E=[Qr,Jr],D=[];function H(A,K){return A[12]?1:0}n=H(t),o=D[n]=E[n](t);const F=t[61].anchorWest,x=Ae(F,t,t[60],Zo),ie=t[61].anchorEast,O=Ae(ie,t,t[60],Fo),B=t[61].anchorNorth,R=Ae(B,t,t[60],Ko),X=t[61].anchorSouth,ne=Ae(X,t,t[60],qo);return{c(){e=te("div"),o.c(),i=le(),l=te("div"),x&&x.c(),s=le(),c=te("div"),O&&O.c(),f=le(),a=te("div"),R&&R.c(),h=le(),_=te("div"),ne&&ne.c(),d(l,"id",r=`anchors-west-${t[0].id}`),d(l,"class","anchors left svelte-1iknrz0"),d(c,"id",u=`anchors-east-${t[0].id}`),d(c,"class","anchors right svelte-1iknrz0"),d(a,"id",g=`anchors-north-${t[0].id}`),d(a,"class","anchors top svelte-1iknrz0"),d(_,"id",p=`anchors-south-${t[0].id}`),d(_,"class","anchors bottom svelte-1iknrz0"),d(e,"id",t[30]),d(e,"class","svelvet-node svelte-1iknrz0"),d(e,"role","button"),d(e,"title",t[10]),d(e,"tabindex",0),_e(e,"selected",t[11]),_e(e,"locked",t[16]||t[15]),W(e,"top",m),W(e,"left",k),W(e,"z-index",t[17]),W(e,"width",t[12]?t[19]+"px":"fit-content"),W(e,"height",t[12]?t[18]+"px":"fit-content"),W(e,"transform",S),W(e,"--prop-background-color",t[21]||(t[1]||t[2]?null:"transparent")),W(e,"--prop-text-color",t[22]),W(e,"--prop-border-color",t[23]),W(e,"--prop-selection-color",t[24]),W(e,"--prop-border-radius",t[25]?`${t[25]}px`:t[1]||t[2]?null:"0px"),W(e,"--prop-border-width",t[26]||(t[1]||t[2]?null:"0px"))},m(A,K){G(A,e,K),D[n].m(e,null),Z(e,i),Z(e,l),x&&x.m(l,null),Z(e,s),Z(e,c),O&&O.m(c,null),Z(e,f),Z(e,a),R&&R.m(a,null),Z(e,h),Z(e,_),ne&&ne.m(_,null),M=!0,P||(T=[pe(e,"contextmenu",bt(Mt(t[62]))),pe(e,"mouseup",t[49]),Ht(t[50].call(null,e))],P=!0)},p(A,K){let I=n;n=H(A),n===I?D[n].p(A,K):(Le(),w(D[I],1,1,()=>{D[I]=null}),Ie(),o=D[n],o?o.p(A,K):(o=D[n]=E[n](A),o.c()),b(o,1),o.m(e,i)),x&&x.p&&(!M||K[1]&536870912)&&Pe(x,F,A,A[60],M?ve(F,A[60],K,Zr):De(A[60]),Zo),(!M||K[0]&1&&r!==(r=`anchors-west-${A[0].id}`))&&d(l,"id",r),O&&O.p&&(!M||K[1]&536870912)&&Pe(O,ie,A,A[60],M?ve(ie,A[60],K,Fr):De(A[60]),Fo),(!M||K[0]&1&&u!==(u=`anchors-east-${A[0].id}`))&&d(c,"id",u),R&&R.p&&(!M||K[1]&536870912)&&Pe(R,B,A,A[60],M?ve(B,A[60],K,Kr):De(A[60]),Ko),(!M||K[0]&1&&g!==(g=`anchors-north-${A[0].id}`))&&d(a,"id",g),ne&&ne.p&&(!M||K[1]&536870912)&&Pe(ne,X,A,A[60],M?ve(X,A[60],K,qr):De(A[60]),qo),(!M||K[0]&1&&p!==(p=`anchors-south-${A[0].id}`))&&d(_,"id",p),(!M||K[0]&1024)&&d(e,"title",A[10]),(!M||K[0]&2048)&&_e(e,"selected",A[11]),(!M||K[0]&98304)&&_e(e,"locked",A[16]||A[15]),K[0]&16384&&m!==(m=`${A[14].y}px`)&&W(e,"top",m),K[0]&16384&&k!==(k=`${A[14].x}px`)&&W(e,"left",k),K[0]&131072&&W(e,"z-index",A[17]),K[0]&528384&&W(e,"width",A[12]?A[19]+"px":"fit-content"),K[0]&266240&&W(e,"height",A[12]?A[18]+"px":"fit-content"),K[0]&1048576&&S!==(S=`rotate(${A[20]}deg)`)&&W(e,"transform",S),K[0]&2097158&&W(e,"--prop-background-color",A[21]||(A[1]||A[2]?null:"transparent")),K[0]&4194304&&W(e,"--prop-text-color",A[22]),K[0]&8388608&&W(e,"--prop-border-color",A[23]),K[0]&16777216&&W(e,"--prop-selection-color",A[24]),K[0]&33554438&&W(e,"--prop-border-radius",A[25]?`${A[25]}px`:A[1]||A[2]?null:"0px"),K[0]&67108870&&W(e,"--prop-border-width",A[26]||(A[1]||A[2]?null:"0px"))},i(A){M||(b(o),b(x,A),b(O,A),b(R,A),b(ne,A),M=!0)},o(A){w(o),w(x,A),w(O,A),w(R,A),w(ne,A),M=!1},d(A){A&&j(e),D[n].d(),x&&x.d(A),O&&O.d(A),R&&R.d(A),ne&&ne.d(A),P=!1,ht(T)}}}function Jr(t){let e;const n=t[61].default,o=Ae(n,t,t[60],Vo);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[0]&2048|l[1]&536870912)&&Pe(o,n,i,i[60],e?ve(n,i[60],l,Vr):De(i[60]),Vo)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function Qr(t){let e,n,o;const i=t[61].default,l=Ae(i,t,t[60],Uo);return{c(){e=te("div"),l&&l.c(),bn(()=>t[63].call(e)),W(e,"width","fit-content"),W(e,"height","fit-content")},m(r,s){G(r,e,s),l&&l.m(e,null),n=Bi(e,t[63].bind(e)),o=!0},p(r,s){l&&l.p&&(!o||s[0]&2048|s[1]&536870912)&&Pe(l,i,r,r[60],o?ve(i,r[60],s,Ur):De(r[60]),Uo)},i(r){o||(b(l,r),o=!0)},o(r){w(l,r),o=!1},d(r){r&&j(e),l&&l.d(r),n()}}}function xr(t){let e,n,o=!t[13]&&Jo(t);return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),G(i,e,l),n=!0},p(i,l){i[13]?o&&(Le(),w(o,1,1,()=>{o=null}),Ie()):o?(o.p(i,l),l[0]&8192&&b(o,1)):(o=Jo(i),o.c(),b(o,1),o.m(e.parentNode,e))},i(i){n||(b(o),n=!0)},o(i){w(o),n=!1},d(i){i&&j(e),o&&o.d(i)}}}const $r=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);function es(t,e,n){let o,i,l,r,s,c,u,f=ee,a=()=>(f(),f=Ve(rt,C=>n(66,u=C)),rt),g,h=ee,_=()=>(h(),h=Ve(Je,C=>n(67,g=C)),Je),p,m,k=ee,S=()=>(k(),k=Ve(ft,C=>n(68,m=C)),ft),M,P,T,E=ee,D=()=>(E(),E=Ve(gt,C=>n(71,T=C)),gt),H,F,x,ie=ee,O=()=>(ie(),ie=Ve(ut,C=>n(16,x=C)),ut),B,R=ee,X=()=>(R(),R=Ve(mt,C=>n(73,B=C)),mt),ne,A,K,I,V=ee,we=()=>(V(),V=Ve(st,C=>n(75,I=C)),st),Ce,Me,v,me,Q,ze,$e,he,U,ae,ye,ke;Y(t,dt,C=>n(65,c=C)),Y(t,wt,C=>n(70,P=C)),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>k()),t.$$.on_destroy.push(()=>E()),t.$$.on_destroy.push(()=>ie()),t.$$.on_destroy.push(()=>R()),t.$$.on_destroy.push(()=>V());let{$$slots:qe={},$$scope:ct}=e;const et=Ne("mounted"),z=Ne("duplicate");Y(t,z,C=>n(56,Me=C));const tt=Ne("graphDOMElement");Y(t,tt,C=>n(74,A=C));const ot=cn();let{node:L}=e,{isDefault:Se}=e,{useDefaults:Ue}=e,{center:be}=e,{nodeStore:it}=e,{locked:ut}=e;O();let{groups:rt}=e;a();let{maxZIndex:mt}=e;X();let{centerPoint:st}=e;we();let{cursor:St}=e,{initialNodePositions:Je}=e;_();let{activeGroup:ft}=e;S();let{editing:gt}=e;D();let{dimensionsProvided:Nt=!1}=e,{title:kt}=e;const Zt=q(0),de=q(null);Y(t,de,C=>n(64,s=C));const At=L.id,It=L.position;Y(t,It,C=>n(59,Q=C));const vt=L.dimensions.width;Y(t,vt,C=>n(19,Ce=C));const zt=L.dimensions.height;Y(t,zt,C=>n(18,K=C));const Ot=L.selectionColor;Y(t,Ot,C=>n(24,ae=C));const at=L.editable;Y(t,at,C=>n(72,H=C));const Tt=L.locked;Y(t,Tt,C=>n(15,F=C));const Oe=L.zIndex;Y(t,Oe,C=>n(17,ne=C));const We=L.bgColor;Y(t,We,C=>n(21,$e=C));const Dt=L.borderRadius;Y(t,Dt,C=>n(25,ye=C));const Ct=L.textColor;Y(t,Ct,C=>n(22,he=C));const Bt=L.group;Y(t,Bt,C=>n(69,M=C));const Wt=L.borderColor;Y(t,Wt,C=>n(23,U=C));const Xt=L.borderWidth;Y(t,Xt,C=>n(26,ke=C));const jt=L.rotation;Y(t,jt,C=>n(20,ze=C));const{selected:Vt,hidden:N}=u,Ee=N.nodes;Y(t,Ee,C=>n(58,me=C));const Ke=Vt.nodes;Y(t,Ke,C=>n(55,p=C));const Fe=q(!1);Y(t,Fe,C=>n(57,v=C)),Re("node",L),Re("anchorsMounted",Zt),Re("resized",Fe),Re("nodeConnectEvent",de),Ft(()=>{if(be){const C={x:I.x-Ce/2,y:I.y-K/2};L.position.set(C),wt.set(!0),wt.set(!1)}et.update(C=>C+1)}),Dn(()=>{i&&(p.delete(L),Ke.set(p)),et.update(C=>C-1)});function Qe(){i?(L&&p.delete(L),Ke.set(p)):(L&&p.add(L),Ke.set(p))}function y(C){oe(dt,c=J(St),c),A.focus(),ne!==B&&ne!==1/0&&oe(Oe,ne=oe(mt,++B,B),ne);const Te=C.target;if(!$r.has(Te.tagName)&&(C.preventDefault(),ot("nodeClicked",{node:L,e:C}),!(x||F))){if("touches"in C){if(C.touches&&C.touches.length>1)return}else C.button===2&&H&&oe(gt,T=L,T);oe(wt,P=!0,P),re(C)}}function re(C){let Te,_t,Pt=!1;const Gt=M;Gt&&(Te=u[Gt],_t=J(Te.parent),Pt=_t===L),Pt?oe(ft,m=Gt,m):oe(ft,m="selected",m),!C.shiftKey&&i?oe(ft,m="selected",m):(!C.shiftKey&&!i&&!C.shiftKey&&(p.clear(),Ke.set(p)),Qe()),oe(Je,g=Ui(u.selected.nodes),g)}function ge(){it.delete(At)}function fe(C){const Te=J(St),_t=Te.x-c.x,Pt=Te.y-c.y;Math.abs(_t)+Math.abs(Pt)<4&&ot("nodeReleased",{e:C,node:L}),oe(de,s=C,s)}function Ye(C){return C.addEventListener("mousedown",y),C.addEventListener("touchstart",y),{destroy(){C.removeEventListener("mousedown",y),C.removeEventListener("touchstart",y)}}}function lt(C){xe.call(this,t,C)}function Ge(){K=this.clientHeight,zt.set(K),Ce=this.clientWidth,vt.set(Ce)}return t.$$set=C=>{"node"in C&&n(0,L=C.node),"isDefault"in C&&n(1,Se=C.isDefault),"useDefaults"in C&&n(2,Ue=C.useDefaults),"center"in C&&n(51,be=C.center),"nodeStore"in C&&n(52,it=C.nodeStore),"locked"in C&&O(n(3,ut=C.locked)),"groups"in C&&a(n(4,rt=C.groups)),"maxZIndex"in C&&X(n(5,mt=C.maxZIndex)),"centerPoint"in C&&we(n(6,st=C.centerPoint)),"cursor"in C&&n(53,St=C.cursor),"initialNodePositions"in C&&_(n(7,Je=C.initialNodePositions)),"activeGroup"in C&&S(n(8,ft=C.activeGroup)),"editing"in C&&D(n(9,gt=C.editing)),"dimensionsProvided"in C&&n(54,Nt=C.dimensionsProvided),"title"in C&&n(10,kt=C.title),"$$scope"in C&&n(60,ct=C.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&268435456&&n(14,o=Q),t.$$.dirty[0]&1|t.$$.dirty[1]&16777216&&n(11,i=p.has(L)),t.$$.dirty[0]&1|t.$$.dirty[1]&134217728&&n(13,l=me.has(L)),t.$$.dirty[1]&75497472&&n(12,r=Nt||v),t.$$.dirty[0]&2049|t.$$.dirty[1]&33554432&&i&&Me&&ot("duplicate",L)},[L,Se,Ue,ut,rt,mt,st,Je,ft,gt,kt,i,r,l,o,F,x,ne,K,Ce,ze,$e,he,U,ae,ye,ke,z,tt,de,At,It,vt,zt,Ot,at,Tt,Oe,We,Dt,Ct,Bt,Wt,Xt,jt,Ee,Ke,Fe,ge,fe,Ye,be,it,St,Nt,p,Me,v,me,Q,ct,qe,lt,Ge]}class ts extends je{constructor(e){super(),Xe(this,e,es,xr,Be,{node:0,isDefault:1,useDefaults:2,center:51,nodeStore:52,locked:3,groups:4,maxZIndex:5,centerPoint:6,cursor:53,initialNodePositions:7,activeGroup:8,editing:9,dimensionsProvided:54,title:10},null,[-1,-1,-1])}}const ns=t=>({selected:t[1]&262144,grabHandle:t[1]&524288,node:t[0]&128,destroy:t[1]&131072}),Qo=t=>({selected:t[49],grabHandle:t[50],disconnect:t[14],connect:t[13],node:t[7],destroy:t[48]}),os=t=>({}),xo=t=>({slot:"anchorWest"}),is=t=>({}),$o=t=>({slot:"anchorEast"}),ls=t=>({}),ei=t=>({slot:"anchorNorth"}),rs=t=>({}),ti=t=>({slot:"anchorSouth"});function ni(t){let e,n;return e=new ts({props:{node:t[7],center:t[5]||t[0]==="center",isDefault:t[8],useDefaults:t[4],dimensionsProvided:!!t[1]||!!t[2]||!!t[3]||t[8]||!1,nodeStore:t[11].nodes,locked:t[11].locked,groups:t[11].groups,title:t[6],maxZIndex:t[11].maxZIndex,centerPoint:t[11].center,cursor:t[11].cursor,activeGroup:t[11].activeGroup,editing:t[11].editing,initialNodePositions:t[11].initialNodePositions,$$slots:{anchorSouth:[ds],anchorNorth:[as],anchorEast:[fs],anchorWest:[us],default:[cs,({destroy:o,selected:i,grabHandle:l})=>({48:o,49:i,50:l}),({destroy:o,selected:i,grabHandle:l})=>[0,(o?131072:0)|(i?262144:0)|(l?524288:0)]]},$$scope:{ctx:t}}}),e.$on("nodeClicked",t[41]),e.$on("nodeMount",t[42]),e.$on("nodeReleased",t[43]),e.$on("duplicate",t[44]),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p(o,i){const l={};i[0]&128&&(l.node=o[7]),i[0]&33&&(l.center=o[5]||o[0]==="center"),i[0]&256&&(l.isDefault=o[8]),i[0]&16&&(l.useDefaults=o[4]),i[0]&270&&(l.dimensionsProvided=!!o[1]||!!o[2]||!!o[3]||o[8]||!1),i[0]&64&&(l.title=o[6]),i[0]&384|i[1]&933888&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function oi(t){let e,n;return e=new Hr({props:{selected:t[49]}}),e.$on("connection",t[39]),e.$on("disconnection",t[40]),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p(o,i){const l={};i[1]&262144&&(l.selected=o[49]),e.$set(l)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function ss(t){let e,n,o=t[8]&&oi(t);return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),G(i,e,l),n=!0},p(i,l){i[8]?o?(o.p(i,l),l[0]&256&&b(o,1)):(o=oi(i),o.c(),b(o,1),o.m(e.parentNode,e)):o&&(Le(),w(o,1,1,()=>{o=null}),Ie())},i(i){n||(b(o),n=!0)},o(i){w(o),n=!1},d(i){i&&j(e),o&&o.d(i)}}}function cs(t){let e;const n=t[38].default,o=Ae(n,t,t[45],Qo),i=o||ss(t);return{c(){i&&i.c()},m(l,r){i&&i.m(l,r),e=!0},p(l,r){o?o.p&&(!e||r[0]&128|r[1]&933888)&&Pe(o,n,l,l[45],e?ve(n,l[45],r,ns):De(l[45]),Qo):i&&i.p&&(!e||r[0]&256|r[1]&262144)&&i.p(l,e?r:[-1,-1])},i(l){e||(b(i,l),e=!0)},o(l){w(i,l),e=!1},d(l){i&&i.d(l)}}}function us(t){let e;const n=t[38].anchorWest,o=Ae(n,t,t[45],xo);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&16384)&&Pe(o,n,i,i[45],e?ve(n,i[45],l,os):De(i[45]),xo)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function fs(t){let e;const n=t[38].anchorEast,o=Ae(n,t,t[45],$o);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&16384)&&Pe(o,n,i,i[45],e?ve(n,i[45],l,is):De(i[45]),$o)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function as(t){let e;const n=t[38].anchorNorth,o=Ae(n,t,t[45],ei);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&16384)&&Pe(o,n,i,i[45],e?ve(n,i[45],l,ls):De(i[45]),ei)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function ds(t){let e;const n=t[38].anchorSouth,o=Ae(n,t,t[45],ti);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&16384)&&Pe(o,n,i,i[45],e?ve(n,i[45],l,rs):De(i[45]),ti)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function hs(t){let e=t[7]&&t[10].get(t[7].id),n,o,i=e&&ni(t);return{c(){i&&i.c(),n=He()},m(l,r){i&&i.m(l,r),G(l,n,r),o=!0},p(l,r){r[0]&1152&&(e=l[7]&&l[10].get(l[7].id)),e?i?(i.p(l,r),r[0]&1152&&b(i,1)):(i=ni(l),i.c(),b(i,1),i.m(n.parentNode,n)):i&&(Le(),w(i,1,1,()=>{i=null}),Ie())},i(l){o||(b(i),o=!0)},o(l){w(i),o=!1},d(l){l&&j(n),i&&i.d(l)}}}function gs(t,e,n){let o,i,l=ee,r=()=>(l(),l=Ve(o,z=>n(37,i=z)),o),s;t.$$.on_destroy.push(()=>l());let{$$slots:c={},$$scope:u}=e;const f=to(c),a=Ne("graph"),g=Ne("group");let{position:h={x:0,y:0}}=e,{drop:_=!1}=e,{dimensions:p=null}=e,{id:m=0}=e,{bgColor:k=null}=e,{borderRadius:S=null}=e,{borderColor:M=null}=e,{borderWidth:P=null}=e,{selectionColor:T=null}=e,{textColor:E=null}=e,{resizable:D=!1}=e,{label:H=""}=e,{inputs:F=1}=e,{outputs:x=1}=e,{width:ie=null}=e,{height:O=null}=e,{TD:B=!1}=e,{LR:R=!1}=e,{zIndex:X=1}=e,{editable:ne=!1}=e,{locked:A=!1}=e,{rotation:K=0}=e,{edge:I=null}=e,{connections:V=[]}=e,{useDefaults:we=!1}=e,{center:Ce=!1}=e,{dynamic:Me=!1}=e,{title:v=""}=e;const me=a.nodes;Y(t,me,z=>n(10,s=z)),Re("dynamic",Me);let Q,ze=!0;Ft(()=>{const z=B?"TD":R?"LR":a.direction,tt=a.groupBoxes.get(g),ot=a.nodes.count()+1;n(8,ze=!f.default),(f.anchorWest||f.anchorEast||f.anchorNorth||f.anchorSouth)&&n(8,ze=!1);const L=p||(ie||O?{width:ie||O||200,height:O||ie||100}:ze?{width:200,height:100}:{width:0,height:0}),Se={id:m||ot,position:_==="cursor"?{x:J(a.cursor).x,y:J(a.cursor).y}:tt?{x:J(tt.position).x+h.x,y:J(tt.position).y+h.y}:h,dimensions:L,editable:ne||a.editable,label:H,group:g,resizable:D,inputs:F,outputs:x,zIndex:X,direction:z,locked:A,rotation:K};V.length&&(Se.connections=V),P&&(Se.borderWidth=P),S&&(Se.borderRadius=S),M&&(Se.borderColor=M),T&&(Se.selectionColor=T),E&&(Se.textColor=E),k&&(Se.bgColor=k),I&&(Se.edge=I),n(7,Q=Hi(Se)),tt&&a.groups.update(Ue=>{const be=J(Ue[g].nodes);return Ue[g].nodes.set(new Set([...be,Q])),Ue}),a.nodes.add(Q,Q.id)}),Dn(()=>{a.nodes.delete(Q.id)});function $e(z){Q&&Q.connections.set([z])}function he(z){if(!Q)return;(Array.isArray(z)?z:[z]).forEach(ot=>{const[L,Se]=Array.isArray(ot)?ot:[ot,null],Ue=`N-${L}`,be=a.nodes.get(Ue);if(!be)return;let it=null;const ut=Se?`A-${Se}/${Ue}`:null;ut&&(it=be.anchors.get(ut));const rt=a.edges.match(Q,be,it);rt.length&&a.edges.delete(rt[rt.length-1])})}Re("connect",$e),Re("disconnect",he);let U=h;function ae(z){xe.call(this,t,z)}function ye(z){xe.call(this,t,z)}function ke(z){xe.call(this,t,z)}function qe(z){xe.call(this,t,z)}function ct(z){xe.call(this,t,z)}function et(z){xe.call(this,t,z)}return t.$$set=z=>{"position"in z&&n(15,h=z.position),"drop"in z&&n(0,_=z.drop),"dimensions"in z&&n(1,p=z.dimensions),"id"in z&&n(16,m=z.id),"bgColor"in z&&n(17,k=z.bgColor),"borderRadius"in z&&n(18,S=z.borderRadius),"borderColor"in z&&n(19,M=z.borderColor),"borderWidth"in z&&n(20,P=z.borderWidth),"selectionColor"in z&&n(21,T=z.selectionColor),"textColor"in z&&n(22,E=z.textColor),"resizable"in z&&n(23,D=z.resizable),"label"in z&&n(24,H=z.label),"inputs"in z&&n(25,F=z.inputs),"outputs"in z&&n(26,x=z.outputs),"width"in z&&n(2,ie=z.width),"height"in z&&n(3,O=z.height),"TD"in z&&n(27,B=z.TD),"LR"in z&&n(28,R=z.LR),"zIndex"in z&&n(29,X=z.zIndex),"editable"in z&&n(30,ne=z.editable),"locked"in z&&n(31,A=z.locked),"rotation"in z&&n(32,K=z.rotation),"edge"in z&&n(33,I=z.edge),"connections"in z&&n(34,V=z.connections),"useDefaults"in z&&n(4,we=z.useDefaults),"center"in z&&n(5,Ce=z.center),"dynamic"in z&&n(35,Me=z.dynamic),"title"in z&&n(6,v=z.title),"$$scope"in z&&n(45,u=z.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&128|t.$$.dirty[1]&8&&Q&&Q.connections.set(V),t.$$.dirty[0]&131200&&Q&&Q.bgColor.set(k),t.$$.dirty[0]&16777344&&Q&&Q.label.set(H),t.$$.dirty[0]&4194432&&Q&&Q.textColor.set(E),t.$$.dirty[0]&524416&&Q&&Q.borderColor.set(M),t.$$.dirty[0]&2097280&&Q&&Q.selectionColor.set(T),t.$$.dirty[0]&8388736&&Q&&Q.resizable.set(D),t.$$.dirty[0]&1073741952&&Q&&Q.editable.set(ne),t.$$.dirty[0]&128|t.$$.dirty[1]&1&&Q&&Q.locked.set(A),t.$$.dirty[0]&33554560&&Q&&Q.inputs.set(F),t.$$.dirty[0]&67108992&&Q&&Q.outputs.set(x),t.$$.dirty[0]&536871040&&Q&&Q.zIndex.set(X),t.$$.dirty[0]&128&&r(n(9,o=Q&&(Q==null?void 0:Q.position))),t.$$.dirty[0]&32896|t.$$.dirty[1]&96&&Q){const{x:z,y:tt}=U,{x:ot,y:L}=i,{x:Se,y:Ue}=h;(Se!==ot||Ue!==L)&&(Se!==z||Ue!==tt?(n(36,U=h),Q.position.set(h)):(n(36,U=i),n(15,h=i)))}t.$$.dirty[0]&33554560&&Q&&Q.inputs.set(F),t.$$.dirty[0]&67108992&&Q&&Q.outputs.set(x)},[_,p,ie,O,we,Ce,v,Q,ze,o,s,a,me,$e,he,h,m,k,S,M,P,T,E,D,H,F,x,B,R,X,ne,A,K,I,V,Me,U,i,c,ae,ye,ke,qe,ct,et,u]}class ln extends je{constructor(e){super(),Xe(this,e,gs,hs,Be,{position:15,drop:0,dimensions:1,id:16,bgColor:17,borderRadius:18,borderColor:19,borderWidth:20,selectionColor:21,textColor:22,resizable:23,label:24,inputs:25,outputs:26,width:2,height:3,TD:27,LR:28,zIndex:29,editable:30,locked:31,rotation:32,edge:33,connections:34,useDefaults:4,center:5,dynamic:35,title:6},null,[-1,-1])}}function _s(t){t.parentNodes.forEach(l=>ms(l));const[e,n]=bs(t);ps(e,t),ys(e);for(let l=0;l<10;l++){let r=!1;for(let s=0;s<=n;s++)if(e[s])for(let c=0;c<e[s].length;c++){const u=e[s][c],f=ks(e,u,c);f&&(xt(e[s],c,f),r=!0)}if(!r)break}const o=Cs(e);for(let l=0;l<10&&Ss(e,o);l++);for(let l=0;l<2;l++){let r=!1;for(let s=0;s<=n;s++)for(let c=0;c<e[s].length;c++){const u=e[s][c],f=ws(e,u,c);f&&(xt(e[s],c,f),r=!0)}if(!r)break}const i=[];for(let l=0;l<=n;l++)i.push(e[l]);return i}function ms(t,e=0,n=0){const o=[],i=(l,r=0,s=0)=>{l.depth=Math.max(l.depth,r),l.nesting=Math.max(l.nesting,s),o.push(l);for(const c of l.children){const{node:u,length:f}=c;i(u,f+r,s+1)}};i(t,e,n);for(const l of o)if(l.children.length){l.nesting=l.children[0].node.nesting-1,l.depth=l.children[0].node.depth-l.children[0].length;for(const r of l.children)l.nesting=Math.min(l.nesting,r.node.nesting-1),l.depth=Math.min(l.depth,r.node.depth-r.length)}}function bs(t){let e=0;const n={};for(const o in t.nodeList){const{depth:i,parents:l,children:r,type:s,data:c}=t.nodeList[o];e=Math.max(e,i),n[i]||(n[i]=[]);const u={id:o,children:[],parents:[],layer:i,type:s.trim()};c.props&&(u.propsId=c.props.trim());for(const f of l)u.parents.push(f.node.id);for(const f of r)u.children.push(f.node.id);n[i].push(u)}return[n,e]}function ps(t,e){for(const n in e.nodeList)for(const o of e.nodeList[n].children)if(o.node.depth-1>e.nodeList[n].depth){const i=e.nodeList[n].depth+1,l=o.node.depth-1,r=[];let s=0;for(let c=i;c<=l;c++){const u={id:`GHOST_${o.node.id}_${s}`,children:[],parents:[],layer:c,ignore:!0};r.push(u),s++}for(const c of o.node.parents)r[0].parents.push(c.node.id);r[r.length-1].children.push(o.node.id);for(let c=0;c<r.length-1;c++)r[c].children.push(`GHOST_${o.node.id}_${c+1}`);for(let c=l;c>=i;c--)r.length>0&&t[c].push(r[0]);for(const c of t[e.nodeList[n].depth])c.id===n&&(c.children.push(r[0].id),c.children=c.children.filter(u=>u!==o.node.id))}}function ys(t){let e=0;for(const n in t)e=Math.max(t[n].length,e);for(const n in t)if(t[n].length<e){const o=Array.from({length:e-t[n].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(n),ignore:!0}));t[n]=t[n].concat(o)}}function ii(t,e,n){let o=0,i=0;for(const l of e.parents){for(let r=0;r<t[e.layer-1].length;r++)if(l===t[e.layer-1][r].id){o+=Math.abs(n-r);break}i++}for(const l of e.children){for(let r=0;r<t[e.layer+1].length;r++)if(l===t[e.layer+1][r].id){o+=Math.abs(n-r);break}i++}return isNaN(o/i)?0:o/i}function li(t,e,n){let o=0,i=0;for(const l of e.parents){for(let r=0;r<t[e.layer-1].length;r++)if(l===t[e.layer-1][r].id){o+=Math.abs(n-r);break}i++}return isNaN(o/i)?0:o/i}function ri(t,e,n){let o=0,i=0;for(const l of e.children){for(let r=0;r<t[e.layer+1].length;r++)if(l===t[e.layer+1][r].id){o+=Math.abs(n-r);break}i++}return isNaN(o/i)?0:o/i}function ws(t,e,n){const o=Qn(t,e.layer);let i=0;e.layer===0?i=ri(t,e,n):i=li(t,e,n);let l=i,r=n;for(let s=0;s<t[e.layer].length;s++)if(t[e.layer][s].id==="NULL_NODE"){xt(t[e.layer],n,s);const u=Qn(t,e.layer);let f=0;e.layer===0?f=ri(t,e,s):f=li(t,e,s),u<=o&&f<l&&(l=f,r=s),xt(t[e.layer],s,n)}return r===n?null:r}function ks(t,e,n){const o={};let i=1/0,l=0;for(let r=0;r<t[e.layer].length;r++){const s=ii(t,e,r),c=ii(t,t[e.layer][r],n);o[r]=s+c}for(const r in o)o[r]<i&&(i=o[r],l=parseInt(r));return l===n?null:l}function xt(t,e,n){const o=t[e];t[e]=t[n],t[n]=o}function Cs(t){const e=[];for(const n in t)for(const o of t[n])e.push(o);return e.sort((n,o)=>o.parents.length+o.children.length-(n.parents.length+n.children.length))}function Qn(t,e){let n=0;for(let o=0;o<t[e].length;o++){const i=t[e][o],l=[],r=[];if(t[e-1])for(let s=o+1;s<t[e-1].length;s++)i.parents.includes(t[e-1][s].id)&&l.push(s);if(t[e+1])for(let s=o+1;s<t[e+1].length;s++)i.children.includes(t[e+1][s].id)&&r.push(s);for(let s=o+1;s<t[e].length;s++){const c=t[e][s];if(l.length)for(let u=0;u<t[e-1].length;u++)c.parents.includes(t[e-1][u].id)&&l.forEach(f=>{u<f&&n++});if(r.length)for(let u=0;u<t[e+1].length;u++)c.children.includes(t[e+1][u].id)&&r.forEach(f=>{u<f&&n++})}}return n}function Ss(t,e){let n=!1;for(const o of e){if(o.children.length+o.parents.length===0)return n;let i=0;for(let s=0;s<t[o.layer].length;s++)if(t[o.layer][s].id===o.id){i=s;break}let l=1/0,r=i;for(let s=0;s<t[o.layer].length;s++){xt(t[o.layer],i,s);const c=Qn(t,o.layer);c<l&&(l=c,r=s),xt(t[o.layer],s,i)}r!==i&&(xt(t[o.layer],i,r),n=!0)}return n}function si(t,e,n){const o=t.slice();return o[6]=e[n],o}function ci(t,e,n){const o=t.slice();return o[9]=e[n],o}function Ns(t){let e,n;const o=[{label:t[9].id},{id:t[9].id},{TD:!0},t[0][t[9].id],{connections:t[9].children.map(ai)}];let i={};for(let l=0;l<o.length;l+=1)i=eo(i,o[l]);return e=new ln({props:i}),{c(){ue(e.$$.fragment)},m(l,r){se(e,l,r),n=!0},p(l,r){const s=r&3?Gi(o,[r&2&&{label:l[9].id},r&2&&{id:l[9].id},o[2],Yi(l[0][l[9].id]),r&2&&{connections:l[9].children.map(ai)}]):{};e.$set(s)},i(l){n||(b(e.$$.fragment,l),n=!0)},o(l){w(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function ui(t){let e,n,o=!t[9].ignore&&Ns(t);return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),G(i,e,l),n=!0},p(i,l){i[9].ignore||o.p(i,l)},i(i){n||(b(o),n=!0)},o(i){w(o),n=!1},d(i){i&&j(e),o&&o.d(i)}}}function fi(t){let e,n,o=yt(t[6]),i=[];for(let r=0;r<o.length;r+=1)i[r]=ui(ci(t,o,r));const l=r=>w(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=He()},m(r,s){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,s);G(r,e,s),n=!0},p(r,s){if(s&3){o=yt(r[6]);let c;for(c=0;c<o.length;c+=1){const u=ci(r,o,c);i[c]?(i[c].p(u,s),b(i[c],1)):(i[c]=ui(u),i[c].c(),b(i[c],1),i[c].m(e.parentNode,e))}for(Le(),c=o.length;c<i.length;c+=1)l(c);Ie()}},i(r){if(!n){for(let s=0;s<o.length;s+=1)b(i[s]);n=!0}},o(r){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)w(i[s]);n=!1},d(r){r&&j(e),En(i,r)}}}function Es(t){let e,n,o=yt(t[1]),i=[];for(let r=0;r<o.length;r+=1)i[r]=fi(si(t,o,r));const l=r=>w(i[r],1,1,()=>{i[r]=null});return{c(){for(let r=0;r<i.length;r+=1)i[r].c();e=He()},m(r,s){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,s);G(r,e,s),n=!0},p(r,[s]){if(s&3){o=yt(r[1]);let c;for(c=0;c<o.length;c+=1){const u=si(r,o,c);i[c]?(i[c].p(u,s),b(i[c],1)):(i[c]=fi(u),i[c].c(),b(i[c],1),i[c].m(e.parentNode,e))}for(Le(),c=o.length;c<i.length;c+=1)l(c);Ie()}},i(r){if(!n){for(let s=0;s<o.length;s+=1)b(i[s]);n=!0}},o(r){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)w(i[s]);n=!1},d(r){r&&j(e),En(i,r)}}}const Ms=100,As=100,ai=t=>[t,"0"];function vs(t,e,n){let{mermaid:o=""}=e,{mermaidConfig:i={}}=e;const l=Wl(o),r=_s(l),s=Ne("graph");let c;return Ft(()=>{s.nodes.subscribe(f=>c=f);let u=0;for(const f of r){let a=0,g=-1/0;for(const h of f)h.ignore||(c[`N-${h.id}`].position.update(()=>({x:a,y:u})),c[`N-${h.id}`].dimensions.width.subscribe(_=>a+=_),c[`N-${h.id}`].dimensions.height.subscribe(_=>g=Math.max(g,_))),a+=Ms;u+=g+As}}),t.$$set=u=>{"mermaid"in u&&n(2,o=u.mermaid),"mermaidConfig"in u&&n(0,i=u.mermaidConfig)},[i,r,o]}class Ps extends je{constructor(e){super(),Xe(this,e,vs,Es,Be,{mermaid:2,mermaidConfig:0})}}const Ds="modulepreload",Ls=function(t){return"https://caviato.github.io/landing/"+t},di={},Sn=function(e,n,o){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(l=>{if(l=Ls(l),l in di)return;di[l]=!0;const r=l.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(!!o)for(let f=i.length-1;f>=0;f--){const a=i[f];if(a.href===l&&(!r||a.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${s}`))return;const u=document.createElement("link");if(u.rel=r?"stylesheet":Ds,r||(u.as="script",u.crossOrigin=""),u.href=l,document.head.appendChild(u),r)return new Promise((f,a)=>{u.addEventListener("load",f),u.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>e()).catch(l=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=l,window.dispatchEvent(r),!r.defaultPrevented)throw l})},Is=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],zs=new Set(Is),xn=t=>zs.has(t);function Os(t){let e,n,o,i,l,r,s;return{c(){e=te("div"),n=te("div"),o=te("p"),i=qt(t[2]),l=le(),r=te("p"),s=qt(t[6]),d(o,"class","svelte-1okgqig"),d(r,"class","svelte-1okgqig"),d(n,"class","slider-input connected svelte-1okgqig"),d(n,"aria-label",t[2]),W(n,"--percentage","100%"),d(e,"class","wrapper connected svelte-1okgqig")},m(c,u){G(c,e,u),Z(e,n),Z(n,o),Z(o,i),Z(n,l),Z(n,r),Z(r,s)},p(c,u){u[0]&4&&$t(i,c[2]),u[0]&64&&$t(s,c[6]),u[0]&4&&d(n,"aria-label",c[2])},d(c){c&&j(e)}}}function Ts(t){let e,n,o,i,l,r,s,c,u,f,a,g,h,_;return{c(){e=te("div"),n=te("button"),n.textContent="−",o=le(),i=te("div"),l=te("label"),r=qt(t[2]),s=le(),c=te("input"),a=le(),g=te("button"),g.textContent="+",d(n,"class","button svelte-1okgqig"),d(l,"for","slider-input"),d(l,"class","input-label svelte-1okgqig"),d(c,"tabindex",0),d(c,"id","slider-input"),d(c,"class","slider-input svelte-1okgqig"),d(c,"type","text"),c.value=u=t[6].toFixed(t[3]),d(c,"aria-label",t[2]),W(c,"background",t[9]),W(c,"--percentage",t[5]),d(i,"class","slider svelte-1okgqig"),bn(()=>t[31].call(i)),d(g,"class","button svelte-1okgqig"),d(e,"class","wrapper svelte-1okgqig"),W(e,"color",t[4])},m(p,m){G(p,e,m),Z(e,n),Z(e,o),Z(e,i),Z(i,l),Z(l,r),Z(i,s),Z(i,c),t[30](c),f=Bi(i,t[31].bind(i)),Z(e,a),Z(e,g),h||(_=[pe(n,"touchstart",bt(t[26]),{passive:!0}),pe(n,"mousedown",bt(t[27])),pe(c,"wheel",bt(Mt(t[28]))),pe(c,"keydown",bt(t[29])),Ht(t[15].call(null,c)),pe(g,"touchstart",bt(t[32]),{passive:!0}),pe(g,"mousedown",bt(t[33]))],h=!0)},p(p,m){m[0]&4&&$t(r,p[2]),m[0]&72&&u!==(u=p[6].toFixed(p[3]))&&c.value!==u&&(c.value=u),m[0]&4&&d(c,"aria-label",p[2]),m[0]&512&&W(c,"background",p[9]),m[0]&32&&W(c,"--percentage",p[5]),m[0]&16&&W(e,"color",p[4])},d(p){p&&j(e),t[30](null),f(),h=!1,ht(_)}}}function Bs(t){let e;function n(l,r){return l[12]?Os:Ts}let o=n(t),i=o(t);return{c(){i.c(),e=He()},m(l,r){i.m(l,r),G(l,e,r)},p(l,r){o===(o=n(l))&&i?i.p(l,r):(i.d(1),i=o(l),i&&(i.c(),i.m(e.parentNode,e)))},i:ee,o:ee,d(l){l&&j(e),i.d(l)}}}function Ws(t,e,n){let o,i,l,r,s,c,u,f=ee,a=()=>(f(),f=Ve(T,L=>n(6,u=L)),T),g,h=ee,_=()=>(h(),h=Ve(i,L=>n(36,g=L)),i),p,m=ee,k=()=>(m(),m=Ve(l,L=>n(25,p=L)),l),S,M,P;Y(t,dt,L=>n(37,S=L)),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>m());let{parameterStore:T}=e;a();let{min:E=0}=e,{max:D=100}=e,{step:H=1}=e,{label:F="Value"}=e,{fixed:x=2}=e,{fontColor:ie=null}=e,{barColor:O=null}=e,{bgColor:B=null}=e,R=Ne("graph"),X=Ne("node");const ne=R.groups;Y(t,ne,L=>n(39,P=L));const A=P.selected,K=R.activeGroup;Y(t,K,L=>n(38,M=L));let I,V,we=!1,Ce=0,Me=0;function v(L){L.stopPropagation(),L.preventDefault(),oe(dt,S={x:p.x,y:p.y},S),n(23,Ce=p.x),window.addEventListener("mouseup",ze,{once:!0}),n(22,we=!0)}let me=u;function Q(L){oe(K,M=null,M),A.nodes.set(new Set),wt.set(!1),L.stopPropagation(),L.preventDefault(),oe(dt,S={x:p.x,y:p.y},S),n(23,Ce=p.x),window.addEventListener("touchend",ze,{once:!0}),n(22,we=!0)}function ze(){me===u?(V.focus(),V.select()):me=u,n(22,we=!1),window.removeEventListener("mouseup",ze)}function $e(L){return L.addEventListener("mousedown",v),L.addEventListener("touchstart",Q),{destroy(){L.removeEventListener("mousedown",v)}}}function he(L,Se=H){typeof u=="number"&&oe(T,u=bo(Math.max(E,Math.min(u+L*Se,D)),3),u)}function U(L,Se=H){if(typeof u!="number")return;const Ue=g*.7/((D-E)/Se);if(Me+=L,Math.abs(Me)>=Ue){const be=Math.floor(Math.abs(Me)/Ue);Me>0?he(be):he(-be),Me=Me>0?Me-be*Ue:Me+be*Ue}}function ae(){const L=parseFloat(V.value);Number.isNaN(L)||(L<=E?oe(T,u=E,u):L>=D?oe(T,u=D,u):oe(T,u=bo(L,2),u)),n(8,V.value=JSON.stringify(u),V),V.blur()}const ye=()=>he(-1),ke=()=>he(-1),qe=L=>{he(Math.sign(L.deltaY),H)},ct=L=>{const{key:Se}=L;xn(Se)&&(L.preventDefault(),he(Se=="ArrowDown"?-1:Se=="ArrowUp"?1:0)),Se==="Enter"&&ae()};function et(L){Kt[L?"unshift":"push"](()=>{V=L,n(8,V)})}function z(){I=this.offsetWidth,n(7,I)}const tt=()=>he(1),ot=()=>he(1);return t.$$set=L=>{"parameterStore"in L&&a(n(0,T=L.parameterStore)),"min"in L&&n(18,E=L.min),"max"in L&&n(19,D=L.max),"step"in L&&n(1,H=L.step),"label"in L&&n(2,F=L.label),"fixed"in L&&n(3,x=L.fixed),"fontColor"in L&&n(4,ie=L.fontColor),"barColor"in L&&n(20,O=L.barColor),"bgColor"in L&&n(21,B=L.bgColor)},t.$$.update=()=>{if(t.$$.dirty[0]&1&&n(12,o=typeof T.set!="function"),t.$$.dirty[0]&46137344&&we){const L=p.x-Ce;U(L),n(23,Ce=p.x)}t.$$.dirty[0]&786496&&n(24,r=(u-E)/(D-E)*100),t.$$.dirty[0]&16777216&&n(5,s=`${r}%`),t.$$.dirty[0]&3145760&&n(9,c=`linear-gradient(
			90deg,
			${O||"var(--primary-color, var(--default-primary-color))"} ${s},
			${B||"var(--accent-color, var(--default-accent-color))"} ${s}
		)`)},_(n(11,i=X.dimensions.width)),k(n(10,l=R.cursor)),[T,H,F,x,ie,s,u,I,V,c,l,i,o,ne,K,$e,he,ae,E,D,O,B,we,Ce,r,p,ye,ke,qe,ct,et,z,tt,ot]}class Rs extends je{constructor(e){super(),Xe(this,e,Ws,Bs,Be,{parameterStore:0,min:18,max:19,step:1,label:2,fixed:3,fontColor:4,barColor:20,bgColor:21},null,[-1,-1])}}function Xs(t){let e,n,o;return{c(){e=te("input"),d(e,"placeholder",t[0]),d(e,"type","text")},m(i,l){G(i,e,l),ao(e,t[1]),n||(o=[pe(e,"keydown",bt(t[3])),pe(e,"click",bt(t[4])),pe(e,"mousedown",bt(t[5])),pe(e,"input",t[6])],n=!0)},p(i,[l]){l&1&&d(e,"placeholder",i[0]),l&2&&e.value!==i[1]&&ao(e,i[1])},i:ee,o:ee,d(i){i&&j(e),n=!1,ht(o)}}}function js(t,e,n){let o,{placeholder:i}=e;const l=Ne("textStore");Y(t,l,f=>n(1,o=f));function r(f){xe.call(this,t,f)}function s(f){xe.call(this,t,f)}function c(f){xe.call(this,t,f)}function u(){o=this.value,l.set(o)}return t.$$set=f=>{"placeholder"in f&&n(0,i=f.placeholder)},[i,o,l,r,s,c,u]}class Gs extends je{constructor(e){super(),Xe(this,e,js,Xs,Be,{placeholder:0})}}function Ys(t){let e,n,o,i,l,r,s,c,u,f,a;return i=new Rs({props:{parameterStore:t[0].dimensions.width,max:1e3}}),r=new Gs({props:{placeholder:"Node Label"}}),{c(){e=te("div"),n=te("button"),n.textContent="X",o=le(),ue(i.$$.fragment),l=le(),ue(r.$$.fragment),s=le(),c=te("button"),c.textContent="Delete Node",d(e,"class","editor svelte-xh8yyu")},m(g,h){G(g,e,h),Z(e,n),Z(e,o),se(i,e,null),Z(e,l),se(r,e,null),Z(e,s),Z(e,c),u=!0,f||(a=[pe(n,"click",t[5]),pe(c,"click",t[4]),Ht(t[6].call(null,e))],f=!0)},p(g,h){const _={};h&1&&(_.parameterStore=g[0].dimensions.width),i.$set(_)},i(g){u||(b(i.$$.fragment,g),b(r.$$.fragment,g),u=!0)},o(g){w(i.$$.fragment,g),w(r.$$.fragment,g),u=!1},d(g){g&&j(e),ce(i),ce(r),f=!1,ht(a)}}}function Hs(t){let e,n;return e=new ln({props:{zIndex:1/0,position:{x:t[2].x,y:t[2].y},bgColor:"white",id:"editor",$$slots:{default:[Ys,({grabHandle:o})=>({6:o}),({grabHandle:o})=>o?64:0]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p(o,[i]){const l={};i&4&&(l.position={x:o[2].x,y:o[2].y}),i&129&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function qs(t,e,n){let o,i,l=ee,r=()=>(l(),l=Ve(o,a=>n(2,i=a)),o);t.$$.on_destroy.push(()=>l());let{editing:s}=e;const c=Ne("graph");Re("graph",c),Re("textStore",s.label),Re("colorStore",s.bgColor);function u(){c.nodes.delete(s.id),c.editing.set(null)}const f=()=>c.editing.set(null);return t.$$set=a=>{"editing"in a&&n(0,s=a.editing)},r(n(1,o=c.cursor)),[s,o,i,c,u,f]}class Ks extends je{constructor(e){super(),Xe(this,e,qs,Hs,Be,{editing:0})}}function Fs(t){let e,n,o,i;return{c(){e=te("div"),n=te("div"),d(n,"class","bounding-box svelte-1e5jg43"),W(n,"background-color",t[6]),d(e,"role","button"),d(e,"tabindex","0"),d(e,"class","bounding-box-border svelte-1e5jg43"),d(e,"id",t[2]),W(e,"border","solid 4px "+t[6]),W(e,"top",`${t[3].y}px`),W(e,"left",`${t[3].x}px`),W(e,"width",`${t[4]}px`),W(e,"height",`${t[5]}px`)},m(l,r){G(l,e,r),Z(e,n),o||(i=[pe(e,"contextmenu",bt(Mt(t[12]))),pe(e,"mousedown",bt(Mt(t[9])))],o=!0)},p(l,[r]){r&64&&W(n,"background-color",l[6]),r&4&&d(e,"id",l[2]),r&64&&W(e,"border","solid 4px "+l[6]);const s=r&64;(r&72||s)&&W(e,"top",`${l[3].y}px`),(r&72||s)&&W(e,"left",`${l[3].x}px`),(r&80||s)&&W(e,"width",`${l[4]}px`),(r&96||s)&&W(e,"height",`${l[5]}px`)},i:ee,o:ee,d(l){l&&j(e),o=!1,ht(i)}}}function Zs(t,e,n){let o,i,l=ee,r=()=>(l(),l=Ve(h,T=>n(3,i=T)),h),s,c,u,f=ee,a=()=>(f(),f=Ve(_,T=>n(6,u=T)),_);t.$$.on_destroy.push(()=>l()),t.$$.on_destroy.push(()=>f());let{dimensions:g}=e,{position:h}=e;r();let{color:_}=e;a();let{groupName:p}=e;const{width:m,height:k}=g;Y(t,m,T=>n(4,s=T)),Y(t,k,T=>n(5,c=T));const S=cn();function M(){S("groupClick",{groupName:p})}function P(T){xe.call(this,t,T)}return t.$$set=T=>{"dimensions"in T&&n(10,g=T.dimensions),"position"in T&&r(n(0,h=T.position)),"color"in T&&a(n(1,_=T.color)),"groupName"in T&&n(11,p=T.groupName)},t.$$.update=()=>{t.$$.dirty&2048&&n(2,o=`${p}-bounding-box`)},[h,_,o,i,s,c,u,m,k,M,g,p,P]}class Vs extends je{constructor(e){super(),Xe(this,e,Zs,Fs,Be,{dimensions:10,position:0,color:1,groupName:11})}}function hi(t,e,n){const o=t.slice();return o[4]=e[n][0],o[5]=e[n][1],o}function gi(t,e){let n,o,i;const l=[e[5],{groupName:e[4]}];let r={};for(let s=0;s<l.length;s+=1)r=eo(r,l[s]);return o=new Vs({props:r}),o.$on("groupClick",e[2]),{key:t,first:null,c(){n=He(),ue(o.$$.fragment),this.first=n},m(s,c){G(s,n,c),se(o,s,c),i=!0},p(s,c){e=s;const u=c&1?Gi(l,[Yi(e[5]),{groupName:e[4]}]):{};o.$set(u)},i(s){i||(b(o.$$.fragment,s),i=!0)},o(s){w(o.$$.fragment,s),i=!1},d(s){s&&j(n),ce(o,s)}}}function Us(t){let e=[],n=new Map,o,i,l=yt(Array.from(t[0]));const r=s=>s[4];for(let s=0;s<l.length;s+=1){let c=hi(t,l,s),u=r(c);n.set(u,e[s]=gi(u,c))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();o=He()},m(s,c){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,c);G(s,o,c),i=!0},p(s,[c]){c&1&&(l=yt(Array.from(s[0])),Le(),e=An(e,c,r,1,s,l,n,o.parentNode,Mn,gi,o,hi),Ie())},i(s){if(!i){for(let c=0;c<l.length;c+=1)b(e[c]);i=!0}},o(s){for(let c=0;c<e.length;c+=1)w(e[c]);i=!1},d(s){s&&j(o);for(let c=0;c<e.length;c+=1)e[c].d(s)}}}function Js(t,e,n){let o;const l=Ne("graph").groupBoxes;Y(t,l,s=>n(0,o=s));function r(s){xe.call(this,t,s)}return[o,l,r]}class Qs extends je{constructor(e){super(),Xe(this,e,Js,Us,Be,{})}}function xs(t){let e,n,o,i;const l=t[11].default,r=Ae(l,t,t[10],null);return{c(){e=te("div"),r&&r.c(),d(e,"class","svelvet-graph-wrapper svelte-19pa6i0"),d(e,"role","presentation"),W(e,"transform",t[0])},m(s,c){G(s,e,c),r&&r.m(e,null),n=!0,o||(i=[pe(e,"contextmenu",hn(Mt(t[12]))),pe(e,"click",hn(Mt(t[13]))),pe(e,"touchstart",hn(Mt(t[14])))],o=!0)},p(s,[c]){r&&r.p&&(!n||c&1024)&&Pe(r,l,s,s[10],n?ve(l,s[10],c,null):De(s[10]),null),c&1&&W(e,"transform",s[0])},i(s){n||(b(r,s),n=!0)},o(s){w(r,s),n=!1},d(s){s&&j(e),r&&r.d(s),o=!1,ht(i)}}}function $s(t,e,n){let o,i,l,r,s,{$$slots:c={},$$scope:u}=e;const f=Ne("graph"),a=f.transforms,g=a.scale;Y(t,g,E=>n(9,s=E));const h=a.translation;Y(t,h,E=>n(8,r=E));const _=f.cursor;Y(t,_,E=>n(15,l=E));let{isMovable:p}=e,m,k=!1;function S(){oe(h,r=Vl(J(dt),l,a),r),n(5,m=requestAnimationFrame(S))}function M(E){xe.call(this,t,E)}function P(E){xe.call(this,t,E)}function T(E){xe.call(this,t,E)}return t.$$set=E=>{"isMovable"in E&&n(4,p=E.isMovable),"$$scope"in E&&n(10,u=E.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(7,o=r),t.$$.dirty&640&&n(0,i=`translate(${o.x}px, ${o.y}px) scale(${s})`),t.$$.dirty&112&&(p&&!k?(n(6,k=!0),n(5,m=requestAnimationFrame(S))):(!p||!k)&&(n(6,k=!1),cancelAnimationFrame(m)))},[i,g,h,_,p,m,k,o,r,s,u,c,M,P,T]}class ec extends je{constructor(e){super(),Xe(this,e,$s,xs,Be,{isMovable:4})}}function tc(t){let e,n,o;const i=t[8].default,l=Ae(i,t,t[9],null);return n=new Qs({}),n.$on("groupClick",t[5]),{c(){l&&l.c(),e=le(),ue(n.$$.fragment)},m(r,s){l&&l.m(r,s),G(r,e,s),se(n,r,s),o=!0},p(r,s){l&&l.p&&(!o||s&512)&&Pe(l,i,r,r[9],o?ve(i,r[9],s,null):De(r[9]),null)},i(r){o||(b(l,r),b(n.$$.fragment,r),o=!0)},o(r){w(l,r),w(n.$$.fragment,r),o=!1},d(r){r&&j(e),l&&l.d(r),ce(n,r)}}}function nc(t){let e,n;return e=new ec({props:{isMovable:t[0],$$slots:{default:[tc]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p(o,[i]){const l={};i&1&&(l.isMovable=o[0]),i&512&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function oc(t,e,n){let o,i,l,r,s,c;Y(t,dt,M=>n(13,r=M)),Y(t,wt,M=>n(7,c=M));let{$$slots:u={},$$scope:f}=e;const a=Ne("graph"),g=Ne("snapTo");let{isMovable:h}=e;const _=a.activeGroup;Y(t,_,M=>n(6,s=M));const p=a.groups;Y(t,p,M=>n(10,o=M));const m=a.initialNodePositions;Y(t,m,M=>n(11,i=M));const k=a.cursor;Y(t,k,M=>n(12,l=M));function S(M){oe(wt,c=!0,c);const{groupName:P}=M.detail;oe(_,s=P,s),oe(dt,r=l,r),oe(m,i=Ui(o[P].nodes),i)}return t.$$set=M=>{"isMovable"in M&&n(0,h=M.isMovable),"$$scope"in M&&n(9,f=M.$$scope)},t.$$.update=()=>{t.$$.dirty&192&&s&&c&&or(a,g)},[h,_,p,m,k,S,s,c,u,f]}class ic extends je{constructor(e){super(),Xe(this,e,oc,nc,Be,{isMovable:0})}}function lc(t){let e,n;return{c(){e=pt("line"),n=pt("line"),d(e,"class","background-line svelte-rryw83"),d(e,"x1",t[11]),d(e,"y1",0),d(e,"x2",t[11]),d(e,"y2",t[6]),d(e,"stroke-width",t[5]),W(e,"--calculated-dot-color",t[2]),d(n,"class","background-line svelte-rryw83"),d(n,"y1",t[11]),d(n,"x1",0),d(n,"y2",t[11]),d(n,"x2",t[6]),d(n,"stroke-width",t[5]),W(n,"--calculated-dot-color",t[2])},m(o,i){G(o,e,i),G(o,n,i)},p(o,i){i&2048&&d(e,"x1",o[11]),i&2048&&d(e,"x2",o[11]),i&64&&d(e,"y2",o[6]),i&32&&d(e,"stroke-width",o[5]),i&4&&W(e,"--calculated-dot-color",o[2]),i&2048&&d(n,"y1",o[11]),i&2048&&d(n,"y2",o[11]),i&64&&d(n,"x2",o[6]),i&32&&d(n,"stroke-width",o[5]),i&4&&W(n,"--calculated-dot-color",o[2])},d(o){o&&(j(e),j(n))}}}function rc(t){let e;return{c(){e=pt("circle"),d(e,"class","background-dot svelte-rryw83"),d(e,"r",t[5]),d(e,"cx",t[11]),d(e,"cy",t[11]),W(e,"--calculated-dot-color",t[2])},m(n,o){G(n,e,o)},p(n,o){o&32&&d(e,"r",n[5]),o&2048&&d(e,"cx",n[11]),o&2048&&d(e,"cy",n[11]),o&4&&W(e,"--calculated-dot-color",n[2])},d(n){n&&j(e)}}}function _i(t){let e,n,o;function i(s,c){if(s[0]==="dots")return cc;if(s[0]==="lines")return sc}let l=i(t),r=l&&l(t);return{c(){e=pt("pattern"),r&&r.c(),d(e,"id","graph-coarse-pattern"),d(e,"x",t[7]),d(e,"y",t[8]),d(e,"width",n=t[6]*t[3]),d(e,"height",o=t[6]*t[3]),d(e,"patternUnits","userSpaceOnUse")},m(s,c){G(s,e,c),r&&r.m(e,null)},p(s,c){l===(l=i(s))&&r?r.p(s,c):(r&&r.d(1),r=l&&l(s),r&&(r.c(),r.m(e,null))),c&128&&d(e,"x",s[7]),c&256&&d(e,"y",s[8]),c&72&&n!==(n=s[6]*s[3])&&d(e,"width",n),c&72&&o!==(o=s[6]*s[3])&&d(e,"height",o)},d(s){s&&j(e),r&&r.d()}}}function sc(t){let e,n,o,i,l,r;return{c(){e=pt("line"),i=pt("line"),d(e,"class","background-line svelte-rryw83"),d(e,"x1",t[11]),d(e,"y1",0),d(e,"x2",t[11]),d(e,"y2",n=t[6]*t[3]),d(e,"stroke-width",o=t[5]*1.2),W(e,"--calculated-dot-color",t[2]),d(i,"class","background-line svelte-rryw83"),d(i,"y1",t[11]),d(i,"x1",0),d(i,"y2",t[11]),d(i,"x2",l=t[6]*t[3]),d(i,"stroke-width",r=t[5]*1.2),W(i,"--calculated-dot-color",t[2])},m(s,c){G(s,e,c),G(s,i,c)},p(s,c){c&2048&&d(e,"x1",s[11]),c&2048&&d(e,"x2",s[11]),c&72&&n!==(n=s[6]*s[3])&&d(e,"y2",n),c&32&&o!==(o=s[5]*1.2)&&d(e,"stroke-width",o),c&4&&W(e,"--calculated-dot-color",s[2]),c&2048&&d(i,"y1",s[11]),c&2048&&d(i,"y2",s[11]),c&72&&l!==(l=s[6]*s[3])&&d(i,"x2",l),c&32&&r!==(r=s[5]*1.2)&&d(i,"stroke-width",r),c&4&&W(i,"--calculated-dot-color",s[2])},d(s){s&&(j(e),j(i))}}}function cc(t){let e,n;return{c(){e=pt("circle"),d(e,"class","background-dot svelte-rryw83"),d(e,"r",n=t[5]*2),d(e,"cx",t[11]),d(e,"cy",t[11]),W(e,"--calculated-dot-color",t[2])},m(o,i){G(o,e,i)},p(o,i){i&32&&n!==(n=o[5]*2)&&d(e,"r",n),i&2048&&d(e,"cx",o[11]),i&2048&&d(e,"cy",o[11]),i&4&&W(e,"--calculated-dot-color",o[2])},d(o){o&&j(e)}}}function mi(t){let e;return{c(){e=pt("rect"),d(e,"width","100%"),d(e,"height","100%"),d(e,"fill","url(#graph-coarse-pattern)"),d(e,"opacity",t[10])},m(n,o){G(n,e,o)},p(n,o){o&1024&&d(e,"opacity",n[10])},d(n){n&&j(e)}}}function uc(t){let e,n,o,i,l;function r(a,g){if(a[0]==="dots")return rc;if(a[0]==="lines")return lc}let s=r(t),c=s&&s(t),u=t[3]>0&&_i(t),f=t[3]>0&&mi(t);return{c(){e=te("div"),n=pt("svg"),o=pt("defs"),i=pt("pattern"),c&&c.c(),u&&u.c(),l=pt("rect"),f&&f.c(),d(i,"id","graph-pattern"),d(i,"x",t[7]),d(i,"y",t[8]),d(i,"width",t[6]),d(i,"height",t[6]),d(i,"patternUnits","userSpaceOnUse"),d(l,"width","100%"),d(l,"height","100%"),d(l,"fill","url(#graph-pattern)"),d(l,"opacity",t[9]),d(n,"class","svelte-rryw83"),d(e,"id","background-wrapper"),d(e,"class","svelte-rryw83"),W(e,"--calculated-background-color",t[1])},m(a,g){G(a,e,g),Z(e,n),Z(n,o),Z(o,i),c&&c.m(i,null),u&&u.m(o,null),Z(n,l),f&&f.m(n,null),t[24](e)},p(a,[g]){s===(s=r(a))&&c?c.p(a,g):(c&&c.d(1),c=s&&s(a),c&&(c.c(),c.m(i,null))),g&128&&d(i,"x",a[7]),g&256&&d(i,"y",a[8]),g&64&&d(i,"width",a[6]),g&64&&d(i,"height",a[6]),a[3]>0?u?u.p(a,g):(u=_i(a),u.c(),u.m(o,null)):u&&(u.d(1),u=null),g&512&&d(l,"opacity",a[9]),a[3]>0?f?f.p(a,g):(f=mi(a),f.c(),f.m(n,null)):f&&(f.d(1),f=null),g&2&&W(e,"--calculated-background-color",a[1])},i:ee,o:ee,d(a){a&&j(e),c&&c.d(),u&&u.d(),f&&f.d(),t[24](null)}}}function fc(t,e,n){let o,i,l,r,s,c,u;const f=Ne("graph");let{style:a="dots"}=e,{gridWidth:g=vl}=e,{dotSize:h=Pl}=e,{bgColor:_=null}=e,{dotColor:p=null}=e,{opacityThreshold:m=3}=e,{majorGrid:k=0}=e,{minOpacity:S=.4}=e;const M=f.transforms,P=M.scale;Y(t,P,R=>n(22,c=R));const T=M.translation;Y(t,T,R=>n(23,u=R));let E,D,H,F,x,ie=1,O=1;function B(R){Kt[R?"unshift":"push"](()=>{E=R,n(4,E)})}return t.$$set=R=>{"style"in R&&n(0,a=R.style),"gridWidth"in R&&n(14,g=R.gridWidth),"dotSize"in R&&n(15,h=R.dotSize),"bgColor"in R&&n(1,_=R.bgColor),"dotColor"in R&&n(2,p=R.dotColor),"opacityThreshold"in R&&n(16,m=R.opacityThreshold),"majorGrid"in R&&n(3,k=R.majorGrid),"minOpacity"in R&&n(17,S=R.minOpacity)},t.$$.update=()=>{t.$$.dirty&8388608&&n(21,o=u),t.$$.dirty&4194304&&n(20,i=c),t.$$.dirty&1064960&&n(6,l=i*g),t.$$.dirty&1081344&&n(5,r=i*h/2),t.$$.dirty&64&&n(11,s=l/2),t.$$.dirty&4128816&&(n(18,D=(E==null?void 0:E.offsetWidth)||0),n(19,H=(E==null?void 0:E.offsetHeight)||0),n(7,F=(D+r)*(1-i)/2+o.x),n(8,x=(H+r)*(1-i)/2+o.y),n(9,ie=i>m?1:i/m+S),n(10,O=i>m/3?1:i/(m/3)+S))},[a,_,p,k,E,r,l,F,x,ie,O,s,P,T,g,h,m,S,D,H,i,o,c,u,B]}class ac extends je{constructor(e){super(),Xe(this,e,fc,uc,Be,{style:0,gridWidth:14,dotSize:15,bgColor:1,dotColor:2,opacityThreshold:16,majorGrid:3,minOpacity:17})}}function dc(t){let e,n;return{c(){e=te("div"),n=te("div"),d(n,"class","selection-box svelte-10ds4jd"),_e(n,"creating",t[0]),d(e,"class","selection-border svelte-10ds4jd"),_e(e,"creating",t[0]),W(e,"--prop-selection-box-color",t[1]),W(e,"height",t[4]),W(e,"width",t[3]),W(e,"top",t[6]),W(e,"left",t[5])},m(o,i){G(o,e,i),Z(e,n),t[18](n)},p(o,[i]){i&1&&_e(n,"creating",o[0]),i&1&&_e(e,"creating",o[0]),i&2&&W(e,"--prop-selection-box-color",o[1]),i&16&&W(e,"height",o[4]),i&8&&W(e,"width",o[3]),i&64&&W(e,"top",o[6]),i&32&&W(e,"left",o[5])},i:ee,o:ee,d(o){o&&j(e),t[18](null)}}}function hc(t,e,n){let o,i,l,r,s,c,u,f,a,g,h=ee,_=()=>(h(),h=Ve(o,O=>n(20,g=O)),o),p,m;Y(t,Ki,O=>n(16,p=O)),t.$$.on_destroy.push(()=>h());let{graph:k}=e,{anchor:S}=e,{adding:M=!1}=e,{creating:P=!1}=e,{color:T=null}=e;const{groups:E}=k;Y(t,E,O=>n(17,m=O));let D,H;Ft(F);function F(){D=Array.from(document.querySelectorAll(".svelvet-node")).map(B=>{const{top:R,left:X,width:ne,height:A}=B.getBoundingClientRect();return{id:B.id,top:R,left:X,width:ne,height:A}})}function x(){if(!D)return;const O=D.reduce((B,R)=>{if(s+S.left<=R.left&&r+S.top<=R.top&&s+S.left+Math.abs(l)>=R.left+R.width&&r+S.top+Math.abs(i)>=R.top+R.height){const X=R.id,ne=k.nodes.get(X);if(!ne)return B;B.push(ne)}return B},[]);M?O.forEach(B=>{g.add(B)}):oe(o,g=new Set(O),g),o.set(g)}function ie(O){Kt[O?"unshift":"push"](()=>{H=O,n(2,H)})}return t.$$set=O=>{"graph"in O&&n(9,k=O.graph),"anchor"in O&&n(10,S=O.anchor),"adding"in O&&n(11,M=O.adding),"creating"in O&&n(0,P=O.creating),"color"in O&&n(1,T=O.color)},t.$$.update=()=>{t.$$.dirty&131072&&_(n(7,o=m.selected.nodes)),t.$$.dirty&66560&&n(12,i=p.y-S.y-S.top),t.$$.dirty&66560&&n(14,l=p.x-S.x-S.left),t.$$.dirty&5120&&n(13,r=Math.min(S.y,S.y+i)),t.$$.dirty&17408&&n(15,s=Math.min(S.x,S.x+l)),t.$$.dirty&8192&&n(6,c=`${r}px`),t.$$.dirty&32768&&n(5,u=`${s}px`),t.$$.dirty&4096&&n(4,f=`${Math.abs(i)}px`),t.$$.dirty&16384&&n(3,a=`${Math.abs(l)}px`),t.$$.dirty&20480&&(l||i)&&x()},[P,T,H,a,f,u,c,o,E,k,S,M,i,r,l,s,p,m,ie]}class gc extends je{constructor(e){super(),Xe(this,e,hc,dc,Be,{graph:9,anchor:10,adding:11,creating:0,color:1})}}const _c=t=>({}),bi=t=>({}),mc=t=>({}),pi=t=>({}),bc=t=>({}),yi=t=>({}),pc=t=>({}),wi=t=>({}),yc=t=>({}),ki=t=>({});function Ci(t){let e,n;return e=new Ks({props:{editing:t[21]}}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p(o,i){const l={};i[0]&2097152&&(l.editing=o[21]),e.$set(l)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function wc(t){let e,n,o=t[21]&&Ci(t);const i=t[52].default,l=Ae(i,t,t[54],null);return{c(){o&&o.c(),e=le(),l&&l.c()},m(r,s){o&&o.m(r,s),G(r,e,s),l&&l.m(r,s),n=!0},p(r,s){r[21]?o?(o.p(r,s),s[0]&2097152&&b(o,1)):(o=Ci(r),o.c(),b(o,1),o.m(e.parentNode,e)):o&&(Le(),w(o,1,1,()=>{o=null}),Ie()),l&&l.p&&(!n||s[1]&8388608)&&Pe(l,i,r,r[54],n?ve(i,r[54],s,null):De(r[54]),null)},i(r){n||(b(o),b(l,r),n=!0)},o(r){w(o),w(l,r),n=!1},d(r){r&&j(e),o&&o.d(r),l&&l.d(r)}}}function kc(t){let e,n;return e=new ac({}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p:ee,i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Cc(t){let e;const n=t[52].background,o=Ae(n,t,t[54],ki);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&8388608)&&Pe(o,n,i,i[54],e?ve(n,i[54],l,yc):De(i[54]),ki)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function Si(t){let e,n,o;var i=t[12];function l(r,s){return{}}return i&&(e=Ut(i,l())),{c(){e&&ue(e.$$.fragment),n=He()},m(r,s){e&&se(e,r,s),G(r,n,s),o=!0},p(r,s){if(s[0]&4096&&i!==(i=r[12])){if(e){Le();const c=e;w(c.$$.fragment,1,0,()=>{ce(c,1)}),Ie()}i?(e=Ut(i,l()),ue(e.$$.fragment),b(e.$$.fragment,1),se(e,n.parentNode,n)):e=null}},i(r){o||(e&&b(e.$$.fragment,r),o=!0)},o(r){e&&w(e.$$.fragment,r),o=!1},d(r){r&&j(n),e&&ce(e,r)}}}function Ni(t){let e,n,o;var i=t[13];function l(r,s){return{}}return i&&(e=Ut(i,l())),{c(){e&&ue(e.$$.fragment),n=He()},m(r,s){e&&se(e,r,s),G(r,n,s),o=!0},p(r,s){if(s[0]&8192&&i!==(i=r[13])){if(e){Le();const c=e;w(c.$$.fragment,1,0,()=>{ce(c,1)}),Ie()}i?(e=Ut(i,l()),ue(e.$$.fragment),b(e.$$.fragment,1),se(e,n.parentNode,n)):e=null}},i(r){o||(e&&b(e.$$.fragment,r),o=!0)},o(r){e&&w(e.$$.fragment,r),o=!1},d(r){r&&j(n),e&&ce(e,r)}}}function Ei(t){let e,n,o;var i=t[11];function l(r,s){return{}}return i&&(e=Ut(i,l())),{c(){e&&ue(e.$$.fragment),n=He()},m(r,s){e&&se(e,r,s),G(r,n,s),o=!0},p(r,s){if(s[0]&2048&&i!==(i=r[11])){if(e){Le();const c=e;w(c.$$.fragment,1,0,()=>{ce(c,1)}),Ie()}i?(e=Ut(i,l()),ue(e.$$.fragment),b(e.$$.fragment,1),se(e,n.parentNode,n)):e=null}},i(r){o||(e&&b(e.$$.fragment,r),o=!0)},o(r){e&&w(e.$$.fragment,r),o=!1},d(r){r&&j(n),e&&ce(e,r)}}}function Mi(t){let e,n,o;var i=t[14];function l(r,s){return{}}return i&&(e=Ut(i,l())),{c(){e&&ue(e.$$.fragment),n=He()},m(r,s){e&&se(e,r,s),G(r,n,s),o=!0},p(r,s){if(s[0]&16384&&i!==(i=r[14])){if(e){Le();const c=e;w(c.$$.fragment,1,0,()=>{ce(c,1)}),Ie()}i?(e=Ut(i,l()),ue(e.$$.fragment),b(e.$$.fragment,1),se(e,n.parentNode,n)):e=null}},i(r){o||(e&&b(e.$$.fragment,r),o=!0)},o(r){e&&w(e.$$.fragment,r),o=!1},d(r){r&&j(n),e&&ce(e,r)}}}function Ai(t){let e,n;return e=new gc({props:{creating:t[17],anchor:t[15],graph:t[0],adding:t[18],color:t[7]}}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p(o,i){const l={};i[0]&131072&&(l.creating=o[17]),i[0]&32768&&(l.anchor=o[15]),i[0]&1&&(l.graph=o[0]),i[0]&262144&&(l.adding=o[18]),i[0]&128&&(l.color=o[7]),e.$set(l)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Sc(t){let e,n,o,i,l,r,s,c,u,f,a,g,h,_,p,m,k,S;n=new ic({props:{isMovable:t[19],$$slots:{default:[wc]},$$scope:{ctx:t}}});const M=[Cc,kc],P=[];function T(I,V){return I[8]?0:1}i=T(t),l=P[i]=M[i](t);let E=t[3]&&Si(t),D=t[4]&&Ni(t),H=t[5]&&Ei(t),F=t[10]&&Mi(t);const x=t[52].minimap,ie=Ae(x,t,t[54],wi),O=t[52].drawer,B=Ae(O,t,t[54],yi),R=t[52].controls,X=Ae(R,t,t[54],pi),ne=t[52].toggle,A=Ae(ne,t,t[54],bi);let K=t[16]&&!t[6]&&Ai(t);return{c(){e=te("section"),ue(n.$$.fragment),o=le(),l.c(),r=le(),E&&E.c(),s=le(),D&&D.c(),c=le(),H&&H.c(),u=le(),F&&F.c(),f=le(),ie&&ie.c(),a=le(),B&&B.c(),g=le(),X&&X.c(),h=le(),A&&A.c(),_=le(),K&&K.c(),d(e,"role","presentation"),d(e,"id",p=t[0].id),d(e,"class","svelvet-wrapper svelte-13nq7cv"),d(e,"title",t[9]),d(e,"tabindex",0),W(e,"width",t[1]?t[1]+"px":"100%"),W(e,"height",t[2]?t[2]+"px":"100%")},m(I,V){G(I,e,V),se(n,e,null),Z(e,o),P[i].m(e,null),Z(e,r),E&&E.m(e,null),Z(e,s),D&&D.m(e,null),Z(e,c),H&&H.m(e,null),Z(e,u),F&&F.m(e,null),Z(e,f),ie&&ie.m(e,null),Z(e,a),B&&B.m(e,null),Z(e,g),X&&X.m(e,null),Z(e,h),A&&A.m(e,null),Z(e,_),K&&K.m(e,null),t[53](e),m=!0,k||(S=[pe(window,"touchend",t[33]),pe(window,"mouseup",t[33]),pe(window,"resize",t[32]),pe(window,"scroll",t[32]),pe(e,"wheel",Mt(t[39])),pe(e,"mousedown",hn(Mt(t[34]))),pe(e,"touchend",Mt(t[36])),pe(e,"touchstart",hn(Mt(t[35]))),pe(e,"keydown",t[37]),pe(e,"keyup",t[38])],k=!0)},p(I,V){const we={};V[0]&524288&&(we.isMovable=I[19]),V[0]&2097152|V[1]&8388608&&(we.$$scope={dirty:V,ctx:I}),n.$set(we);let Ce=i;i=T(I),i===Ce?P[i].p(I,V):(Le(),w(P[Ce],1,1,()=>{P[Ce]=null}),Ie(),l=P[i],l?l.p(I,V):(l=P[i]=M[i](I),l.c()),b(l,1),l.m(e,r)),I[3]?E?(E.p(I,V),V[0]&8&&b(E,1)):(E=Si(I),E.c(),b(E,1),E.m(e,s)):E&&(Le(),w(E,1,1,()=>{E=null}),Ie()),I[4]?D?(D.p(I,V),V[0]&16&&b(D,1)):(D=Ni(I),D.c(),b(D,1),D.m(e,c)):D&&(Le(),w(D,1,1,()=>{D=null}),Ie()),I[5]?H?(H.p(I,V),V[0]&32&&b(H,1)):(H=Ei(I),H.c(),b(H,1),H.m(e,u)):H&&(Le(),w(H,1,1,()=>{H=null}),Ie()),I[10]?F?(F.p(I,V),V[0]&1024&&b(F,1)):(F=Mi(I),F.c(),b(F,1),F.m(e,f)):F&&(Le(),w(F,1,1,()=>{F=null}),Ie()),ie&&ie.p&&(!m||V[1]&8388608)&&Pe(ie,x,I,I[54],m?ve(x,I[54],V,pc):De(I[54]),wi),B&&B.p&&(!m||V[1]&8388608)&&Pe(B,O,I,I[54],m?ve(O,I[54],V,bc):De(I[54]),yi),X&&X.p&&(!m||V[1]&8388608)&&Pe(X,R,I,I[54],m?ve(R,I[54],V,mc):De(I[54]),pi),A&&A.p&&(!m||V[1]&8388608)&&Pe(A,ne,I,I[54],m?ve(ne,I[54],V,_c):De(I[54]),bi),I[16]&&!I[6]?K?(K.p(I,V),V[0]&65600&&b(K,1)):(K=Ai(I),K.c(),b(K,1),K.m(e,null)):K&&(Le(),w(K,1,1,()=>{K=null}),Ie()),(!m||V[0]&1&&p!==(p=I[0].id))&&d(e,"id",p),(!m||V[0]&512)&&d(e,"title",I[9]),V[0]&2&&W(e,"width",I[1]?I[1]+"px":"100%"),V[0]&4&&W(e,"height",I[2]?I[2]+"px":"100%")},i(I){m||(b(n.$$.fragment,I),b(l),b(E),b(D),b(H),b(F),b(ie,I),b(B,I),b(X,I),b(A,I),b(K),m=!0)},o(I){w(n.$$.fragment,I),w(l),w(E),w(D),w(H),w(F),w(ie,I),w(B,I),w(X,I),w(A,I),w(K),m=!1},d(I){I&&j(e),ce(n),P[i].d(),E&&E.d(),D&&D.d(),H&&H.d(),F&&F.d(),ie&&ie.d(I),B&&B.d(I),X&&X.d(I),A&&A.d(I),K&&K.d(),t[53](null),k=!1,ht(S)}}}let Fn;function Nc(t,e,n){let o,i,l,r,s,c,u,f,a,g,h,_,p,m,k;Y(t,Un,N=>n(65,c=N)),Y(t,dt,N=>n(66,u=N)),Y(t,wt,N=>n(67,a=N)),Y(t,Rt,N=>n(70,_=N));let{$$slots:S={},$$scope:M}=e,{graph:P}=e,{width:T}=e,{height:E}=e,{minimap:D=!1}=e,{controls:H=!1}=e,{toggle:F=!1}=e,{fixedZoom:x=!1}=e,{disableSelection:ie=!1}=e,{ZOOM_INCREMENT:O=.1}=e,{PAN_INCREMENT:B=50}=e,{PAN_TIME:R=250}=e,{MAX_SCALE:X=3}=e,{MIN_SCALE:ne=.2}=e,{selectionColor:A}=e,{backgroundExists:K}=e,{fitView:I=!1}=e,{trackpadPan:V}=e,{modifier:we}=e,{theme:Ce="light"}=e,{title:Me}=e,{drawer:v=!1}=e;const me=cn(),Q={},ze=q(!1),$e=q(0),he=q(null);Y(t,he,N=>n(20,f=N));const U=P.cursor,ae=P.transforms.scale;Y(t,ae,N=>n(63,r=N));const ye=P.dimensions;Y(t,ye,N=>n(51,m=N));const ke=P.transforms.translation;Y(t,ke,N=>n(62,l=N));const qe=P.groups;Y(t,qe,N=>n(64,s=N));const ct=P.groupBoxes,et=s.selected.nodes;Y(t,et,N=>n(61,i=N));const z=P.activeGroup;Y(t,z,N=>n(69,h=N));const tt=P.initialNodePositions;Y(t,tt,N=>n(68,g=N));const ot=P.editing;Y(t,ot,N=>n(21,k=N));const L=P.bounds.nodeBounds;Y(t,L,N=>n(71,p=N));let Se=0,Ue=1,be={x:0,y:0,top:0,left:0},it=!1,ut=!1,rt=!1,mt=!1,st=!1,St=!1,Je,ft=null,gt=null,Nt=null,kt=null;const Zt={id:null,position:P.cursor,offset:q({x:0,y:0}),connected:q(new Set),dynamic:q(!1),edge:null,edgeColor:q(null),direction:q("self"),inputKey:null,type:"output",moving:vn(!1),store:null,mounted:q(!0),rotation:vn(0),node:{zIndex:q(1/0),rotating:q(!1),position:P.cursor,dimensions:{width:q(0),height:q(0)}}};Re("graphDOMElement",he),Re("cursorAnchor",Zt),Re("duplicate",ze),Re("graph",P),Re("transforms",P.transforms),Re("dimensions",P.dimensions),Re("locked",P.locked),Re("groups",P.groups),Re("bounds",P.bounds),Re("edgeStore",P.edges),Re("nodeStore",P.nodes),Re("mounted",$e),Ft(()=>{Ot()});async function de(){await bl(),wt.set(!0);const{x:N,y:Ee,scale:Ke}=$l(Je,p);N!==null&&Ee!==null&&Ke!==null&&(P.transforms.scale.set(Ke),ke.set({x:N,y:Ee})),wt.set(!1),n(50,St=!0)}async function At(){n(12,gt=(await Sn(()=>import("./Minimap-5f546a7a.js"),[])).default)}async function It(){n(11,ft=(await Sn(()=>import("./ThemeToggle-e54398ab.js"),[])).default)}async function vt(){n(13,Nt=(await Sn(()=>import("./Controls-ca527a5c.js"),["assets/Controls-ca527a5c.js","assets/Icon-3c5af6b6.js"])).default)}async function zt(){n(14,kt=(await Sn(()=>import("./DrawerController-4e454658.js"),["assets/DrawerController-4e454658.js","assets/Icon-3c5af6b6.js","assets/DrawerController-516ff9fe.css"])).default)}function Ot(){if(!f)return;const N=f.getBoundingClientRect();Je={top:N.top,left:N.left,bottom:N.bottom,right:N.right,width:N.width,height:N.height},P.dimensions.set(Je),I==="resize"&&de()}function at(N){if(ut){const Fe=`${Gl()}/${P.id}`,Qe=J(U),y=Qe.x-u.x,re=Qe.y-u.y,ge=Math.min(u.y,u.y+re),fe=Math.min(u.x,u.x+y),Ye={width:q(Math.abs(y)),height:q(Math.abs(re))},lt=q({x:fe,y:ge}),Ge={group:q(Fe),dimensions:Ye,position:lt,color:q(Ol()),moving:q(!1)};ct.add(Ge,Fe),Array.from(i).forEach(C=>{C.group.set(Fe)}),qe.update(C=>{const Te={parent:q(Ge),nodes:q(new Set([...i,Ge]))};return C[Fe]=Te,C}),oe(et,i=new Set,i),n(17,ut=!1),n(16,it=!1)}h&&Array.from(J(s[h].nodes)).forEach(Fe=>Fe.moving.set(!1));const Ee=P.edges.get("cursor");Ee&&(P.edges.delete("cursor"),Ee.disconnect||me("edgeDrop",{cursor:J(U),source:{node:_==null?void 0:_.anchor.node.id.slice(2),anchor:_==null?void 0:_.anchor.id.split("/")[0].slice(2)}})),oe(z,h=null,h),oe(dt,u={x:0,y:0},u),oe(tt,g=[],g),n(16,it=!1),n(19,mt=!1),oe(wt,a=!1,a),N.shiftKey||Rt.set(null),n(15,be.y=0,be),n(15,be.x=0,be)}function Tt(N){if(N.button===2)return;f&&f.focus();const{clientX:Ee,clientY:Ke}=N;if(oe(dt,u=J(U),u),N.shiftKey||N.metaKey){N.preventDefault(),n(16,it=!0);const{top:Fe,left:Qe}=o;n(15,be.y=Ke-Fe,be),n(15,be.x=Ee-Qe,be),n(15,be.top=Fe,be),n(15,be.left=Qe,be),N.shiftKey&&N.metaKey?n(17,ut=!0):n(17,ut=!1),N.metaKey&&!N.shiftKey?n(18,rt=!0):n(18,rt=!1)}else n(19,mt=!0),oe(et,i=new Set,i),et.set(i)}function Oe(N){oe(et,i=new Set,i),et.set(i),oe(dt,u=J(U),u),n(19,mt=!0),N.touches.length===2&&(Dt(),Se=c,Ue=r)}function We(){n(19,mt=!1),st=!1}function Dt(){st||(st=!0,Fn=requestAnimationFrame(Ct))}function Ct(){if(!st){cancelAnimationFrame(Fn);return}const Ee=c/Se;oe(ae,r=Ue*Ee,r),Fn=requestAnimationFrame(Ct)}function Bt(N){const{key:Ee,code:Ke}=N,Fe=N.target;if(!(Fe.tagName=="INPUT"||Fe.tagName=="TEXTAREA")){if(Ke==="KeyA"&&N[`${we}Key`]){const Qe=P.nodes.getAll().filter(y=>!J(y.locked));oe(et,i=new Set(Qe),i)}else if(xn(Ee))jt(Ee,N);else if(Ee==="=")yo(-1,P.dimensions,P.transforms,O);else if(Ee==="-")yo(1,P.dimensions,P.transforms,O);else if(Ee==="0")de();else if(Ee==="Control")s.selected.nodes.set(new Set);else if(Ke==="KeyD"&&N[`${we}Key`])ze.set(!0),setTimeout(()=>{ze.set(!1)},100);else return;N.preventDefault()}}function Wt(N){const{key:Ee}=N;xn(Ee)?(clearInterval(Q[Ee]),delete Q[Ee]):Ee==="Shift"&&Rt.set(null)}function Xt(N){if(x)return;const Ee=N.shiftKey?.15:1,{clientX:Ke,clientY:Fe,deltaY:Qe}=N,y=l,re={x:Ke,y:Fe};if((V||N.metaKey)&&Qe%1===0){oe(ke,l={x:oe(ke,l.x-=N.deltaX,l),y:oe(ke,l.y-=N.deltaY,l)},l);return}if(r>=X&&Qe<0||r<=ne&&Qe>0)return;const ge=Math.min(.009*Ee*Math.abs(Qe),.08),fe=Zi(r,Math.sign(Qe),ge),Ye=Fi(r,fe,y,re,Je);ae.set(fe),ke.set(Ye)}function jt(N,Ee){const Ke=Ee.shiftKey?2:1,Fe=performance.now(),Qe=N==="ArrowLeft"||N==="ArrowUp"?-1:1,y=N==="ArrowLeft"||N==="ArrowRight",re=y?l.x:l.y,ge=re+Qe*B*Ke;if(!Q[N]){let fe=setInterval(()=>{const Ye=performance.now()-Fe;if(i.size===0){const lt=re+(ge-re)*(Ye/R);ke.set({x:y?lt:l.x,y:y?l.y:lt})}else{const lt={x:y?Qe*2:0,y:y?0:Qe*2};Array.from(i).forEach(Ge=>{const C=J(Ge.position);let Te;const _t=J(Ge.group),Pt=J(P.groupBoxes);if(_t&&(Te=Pt.get(_t)),Te){const Gt=J(Ge.dimensions.width),zn=J(Ge.dimensions.height),On=xi(Te,Gt,zn);Qi(C,lt,Ge.position,On)}else Ji(C,lt,Ge.position)})}},2);Q[N]=fe}}function Vt(N){Kt[N?"unshift":"push"](()=>{f=N,he.set(f)})}return t.$$set=N=>{"graph"in N&&n(0,P=N.graph),"width"in N&&n(1,T=N.width),"height"in N&&n(2,E=N.height),"minimap"in N&&n(3,D=N.minimap),"controls"in N&&n(4,H=N.controls),"toggle"in N&&n(5,F=N.toggle),"fixedZoom"in N&&n(40,x=N.fixedZoom),"disableSelection"in N&&n(6,ie=N.disableSelection),"ZOOM_INCREMENT"in N&&n(41,O=N.ZOOM_INCREMENT),"PAN_INCREMENT"in N&&n(42,B=N.PAN_INCREMENT),"PAN_TIME"in N&&n(43,R=N.PAN_TIME),"MAX_SCALE"in N&&n(44,X=N.MAX_SCALE),"MIN_SCALE"in N&&n(45,ne=N.MIN_SCALE),"selectionColor"in N&&n(7,A=N.selectionColor),"backgroundExists"in N&&n(8,K=N.backgroundExists),"fitView"in N&&n(46,I=N.fitView),"trackpadPan"in N&&n(47,V=N.trackpadPan),"modifier"in N&&n(48,we=N.modifier),"theme"in N&&n(49,Ce=N.theme),"title"in N&&n(9,Me=N.title),"drawer"in N&&n(10,v=N.drawer),"$$scope"in N&&n(54,M=N.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&1048576&&(o=m),t.$$.dirty[1]&262144&&Ce&&document.documentElement.setAttribute("svelvet-theme",Ce),t.$$.dirty[1]&557056&&!St&&I&&de(),t.$$.dirty[0]&2080&&F&&!ft&&It(),t.$$.dirty[0]&4104&&D&&!gt&&At(),t.$$.dirty[0]&8208&&H&&!Nt&&vt(),t.$$.dirty[0]&17408&&v&&!kt&&zt()},[P,T,E,D,H,F,ie,A,K,Me,v,ft,gt,Nt,kt,be,it,ut,rt,mt,f,k,he,ae,ye,ke,qe,et,z,tt,ot,L,Ot,at,Tt,Oe,We,Bt,Wt,Xt,x,O,B,R,X,ne,I,V,we,Ce,St,m,S,Vt,M]}class Ec extends je{constructor(e){super(),Xe(this,e,Nc,Sc,Be,{graph:0,width:1,height:2,minimap:3,controls:4,toggle:5,fixedZoom:40,disableSelection:6,ZOOM_INCREMENT:41,PAN_INCREMENT:42,PAN_TIME:43,MAX_SCALE:44,MIN_SCALE:45,selectionColor:7,backgroundExists:8,fitView:46,trackpadPan:47,modifier:48,theme:49,title:9,drawer:10},null,[-1,-1,-1])}}const Mc=t=>({}),vi=t=>({slot:"minimap"}),Ac=t=>({}),Pi=t=>({slot:"controls"}),vc=t=>({}),Di=t=>({slot:"background"}),Pc=t=>({}),Li=t=>({slot:"toggle"}),Dc=t=>({}),Ii=t=>({slot:"drawer"});function Lc(t){let e;return{c(){e=te("div"),d(e,"class","svelvet-temp svelte-1i6klh"),W(e,"width",t[2]?t[2]+"px":"100%"),W(e,"height",t[3]?t[3]+"px":"100%")},m(n,o){G(n,e,o)},p(n,o){o[0]&4&&W(e,"width",n[2]?n[2]+"px":"100%"),o[0]&8&&W(e,"height",n[3]?n[3]+"px":"100%")},i:ee,o:ee,d(n){n&&j(e)}}}function Ic(t){let e,n;return e=new Ec({props:{width:t[2],height:t[3],toggle:t[6],backgroundExists:t[17],minimap:t[4],graph:t[16],fitView:t[8],fixedZoom:t[15],theme:t[1],drawer:t[7],controls:t[5],selectionColor:t[9],disableSelection:t[10],trackpadPan:t[12],modifier:t[13],title:t[14],$$slots:{drawer:[Rc],toggle:[Wc],background:[Bc],controls:[Tc],minimap:[Oc],default:[zc]},$$scope:{ctx:t}}}),e.$on("edgeDrop",t[32]),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p(o,i){const l={};i[0]&4&&(l.width=o[2]),i[0]&8&&(l.height=o[3]),i[0]&64&&(l.toggle=o[6]),i[0]&131072&&(l.backgroundExists=o[17]),i[0]&16&&(l.minimap=o[4]),i[0]&65536&&(l.graph=o[16]),i[0]&256&&(l.fitView=o[8]),i[0]&32768&&(l.fixedZoom=o[15]),i[0]&2&&(l.theme=o[1]),i[0]&128&&(l.drawer=o[7]),i[0]&32&&(l.controls=o[5]),i[0]&512&&(l.selectionColor=o[9]),i[0]&1024&&(l.disableSelection=o[10]),i[0]&4096&&(l.trackpadPan=o[12]),i[0]&8192&&(l.modifier=o[13]),i[0]&16384&&(l.title=o[14]),i[0]&2049|i[1]&4&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function zi(t){let e,n;return e=new Ps({props:{mermaid:t[0],mermaidConfig:t[11]}}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},p(o,i){const l={};i[0]&1&&(l.mermaid=o[0]),i[0]&2048&&(l.mermaidConfig=o[11]),e.$set(l)},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function zc(t){let e,n,o=t[0].length&&zi(t);const i=t[31].default,l=Ae(i,t,t[33],null);return{c(){o&&o.c(),e=le(),l&&l.c()},m(r,s){o&&o.m(r,s),G(r,e,s),l&&l.m(r,s),n=!0},p(r,s){r[0].length?o?(o.p(r,s),s[0]&1&&b(o,1)):(o=zi(r),o.c(),b(o,1),o.m(e.parentNode,e)):o&&(Le(),w(o,1,1,()=>{o=null}),Ie()),l&&l.p&&(!n||s[1]&4)&&Pe(l,i,r,r[33],n?ve(i,r[33],s,null):De(r[33]),null)},i(r){n||(b(o),b(l,r),n=!0)},o(r){w(o),w(l,r),n=!1},d(r){r&&j(e),o&&o.d(r),l&&l.d(r)}}}function Oc(t){let e;const n=t[31].minimap,o=Ae(n,t,t[33],vi);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&4)&&Pe(o,n,i,i[33],e?ve(n,i[33],l,Mc):De(i[33]),vi)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function Tc(t){let e;const n=t[31].controls,o=Ae(n,t,t[33],Pi);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&4)&&Pe(o,n,i,i[33],e?ve(n,i[33],l,Ac):De(i[33]),Pi)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function Bc(t){let e;const n=t[31].background,o=Ae(n,t,t[33],Di);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&4)&&Pe(o,n,i,i[33],e?ve(n,i[33],l,vc):De(i[33]),Di)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function Wc(t){let e;const n=t[31].toggle,o=Ae(n,t,t[33],Li);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&4)&&Pe(o,n,i,i[33],e?ve(n,i[33],l,Pc):De(i[33]),Li)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function Rc(t){let e;const n=t[31].drawer,o=Ae(n,t,t[33],Ii);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&4)&&Pe(o,n,i,i[33],e?ve(n,i[33],l,Dc):De(i[33]),Ii)},i(i){e||(b(o,i),e=!0)},o(i){w(o,i),e=!1},d(i){o&&o.d(i)}}}function Xc(t){let e,n,o,i;const l=[Ic,Lc],r=[];function s(c,u){return c[16]?0:1}return e=s(t),n=r[e]=l[e](t),{c(){n.c(),o=He()},m(c,u){r[e].m(c,u),G(c,o,u),i=!0},p(c,u){let f=e;e=s(c),e===f?r[e].p(c,u):(Le(),w(r[f],1,1,()=>{r[f]=null}),Ie(),n=r[e],n?n.p(c,u):(n=r[e]=l[e](c),n.c()),b(n,1),n.m(o.parentNode,o))},i(c){i||(b(n),i=!0)},o(c){w(n),i=!1},d(c){c&&j(o),r[e].d(c)}}}function jc(t,e,n){let o,i,{$$slots:l={},$$scope:r}=e;const s=to(l);let{mermaid:c=""}=e,{theme:u="light"}=e,{id:f=0}=e,{snapTo:a=0}=e,{zoom:g=1}=e,{TD:h=!1}=e,{editable:_=!1}=e,{locked:p=!1}=e,{width:m=0}=e,{height:k=0}=e,{minimap:S=!1}=e,{controls:M=!1}=e,{toggle:P=!1}=e,{drawer:T=!1}=e,{fitView:E=!1}=e,{selectionColor:D="lightblue"}=e,{edgeStyle:H="bezier"}=e,{edge:F=null}=e,{disableSelection:x=!1}=e,{mermaidConfig:ie={}}=e,{translation:O={x:0,y:0}}=e,{trackpadPan:B=!1}=e,{modifier:R="meta"}=e,{raiseEdgesOnSelect:X=!1}=e,{edgesAboveNode:ne=!1}=e,{title:A=""}=e,{fixedZoom:K=!1}=e;const I=cn();let V,we=h?"TD":"LR";Re("snapTo",a),Re("edgeStyle",H),Re("graphEdge",F),Re("raiseEdgesOnSelect",X),Re("edgesAboveNode",ne),Ft(()=>{const v=localStorage.getItem("state");if(v)n(16,V=ir(v)),Gn.add(V,V.id);else{let me=`G-${f||Gn.count()+1}`;n(16,V=Vi(me,{zoom:g,direction:we,editable:_,locked:p,translation:O})),Gn.add(V,me)}});function Ce(v,me){const Q=`N-${v[0]}`,ze=V.nodes.get(Q);if(!ze)return;const $e=ze.anchors.get(`A-${v[1]}/N-${v[0]}`);if(!$e)return;const he=`N-${me[0]}`,U=V.nodes.get(he);if(!U)return;const ae=U.anchors.get(`A-${me[1]}/N-${me[0]}`);if(!ae)return;const ye=V.edges.match($e,ae);ye&&V.edges.delete(ye[0])}function Me(v){xe.call(this,t,v)}return t.$$set=v=>{"mermaid"in v&&n(0,c=v.mermaid),"theme"in v&&n(1,u=v.theme),"id"in v&&n(18,f=v.id),"snapTo"in v&&n(19,a=v.snapTo),"zoom"in v&&n(20,g=v.zoom),"TD"in v&&n(21,h=v.TD),"editable"in v&&n(22,_=v.editable),"locked"in v&&n(23,p=v.locked),"width"in v&&n(2,m=v.width),"height"in v&&n(3,k=v.height),"minimap"in v&&n(4,S=v.minimap),"controls"in v&&n(5,M=v.controls),"toggle"in v&&n(6,P=v.toggle),"drawer"in v&&n(7,T=v.drawer),"fitView"in v&&n(8,E=v.fitView),"selectionColor"in v&&n(9,D=v.selectionColor),"edgeStyle"in v&&n(24,H=v.edgeStyle),"edge"in v&&n(25,F=v.edge),"disableSelection"in v&&n(10,x=v.disableSelection),"mermaidConfig"in v&&n(11,ie=v.mermaidConfig),"translation"in v&&n(26,O=v.translation),"trackpadPan"in v&&n(12,B=v.trackpadPan),"modifier"in v&&n(13,R=v.modifier),"raiseEdgesOnSelect"in v&&n(27,X=v.raiseEdgesOnSelect),"edgesAboveNode"in v&&n(28,ne=v.edgesAboveNode),"title"in v&&n(14,A=v.title),"fixedZoom"in v&&n(15,K=v.fixedZoom),"$$scope"in v&&n(33,r=v.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&65536&&n(30,i=V&&V.edges),t.$$.dirty[0]&1114112&&V&&V.transforms.scale.set(g),t.$$.dirty[0]&1073741824&&i&&i.onEdgeChange((v,me)=>{I(me,{sourceAnchor:v.source,targetAnchor:v.target,sourceNode:v.source.node,targetNode:v.target.node})})},n(17,o=s.background),[c,u,m,k,S,M,P,T,E,D,x,ie,B,R,A,K,V,o,f,a,g,h,_,p,H,F,O,X,ne,Ce,i,l,Me,r]}class Gc extends je{constructor(e){super(),Xe(this,e,jc,Xc,Be,{mermaid:0,theme:1,id:18,snapTo:19,zoom:20,TD:21,editable:22,locked:23,width:2,height:3,minimap:4,controls:5,toggle:6,drawer:7,fitView:8,selectionColor:9,edgeStyle:24,edge:25,disableSelection:10,mermaidConfig:11,translation:26,trackpadPan:12,modifier:13,raiseEdgesOnSelect:27,edgesAboveNode:28,title:14,fixedZoom:15,disconnect:29},null,[-1,-1])}get disconnect(){return this.$$.ctx[29]}}function Yc(t){let e,n,o,i,l,r,s,c;return e=new ln({props:{bgColor:"white",label:"Build",position:{x:50,y:50},connections:[2]}}),o=new ln({props:{bgColor:"white",label:"Your",position:{x:350,y:50},connections:[3]}}),l=new ln({props:{bgColor:"white",label:"Own",position:{x:350,y:350},connections:[4]}}),s=new ln({props:{bgColor:"white",label:"Agent",position:{x:650,y:350},connections:[]}}),{c(){ue(e.$$.fragment),n=le(),ue(o.$$.fragment),i=le(),ue(l.$$.fragment),r=le(),ue(s.$$.fragment)},m(u,f){se(e,u,f),G(u,n,f),se(o,u,f),G(u,i,f),se(l,u,f),G(u,r,f),se(s,u,f),c=!0},p:ee,i(u){c||(b(e.$$.fragment,u),b(o.$$.fragment,u),b(l.$$.fragment,u),b(s.$$.fragment,u),c=!0)},o(u){w(e.$$.fragment,u),w(o.$$.fragment,u),w(l.$$.fragment,u),w(s.$$.fragment,u),c=!1},d(u){u&&(j(n),j(i),j(r)),ce(e,u),ce(o,u),ce(l,u),ce(s,u)}}}function Hc(t){let e,n,o,i,l;return n=new Gc({props:{height:window.innerHeight*.4,theme:"custom",controls:!0,$$slots:{default:[Yc]},$$scope:{ctx:t}}}),{c(){e=te("div"),ue(n.$$.fragment),o=le(),i=te("p"),i.textContent="*our build tool is currently in beta, sign up to try our beta for free",d(e,"class","container svelte-7ham4z"),d(i,"class","subtitle")},m(r,s){G(r,e,s),se(n,e,null),G(r,o,s),G(r,i,s),l=!0},p(r,[s]){const c={};s&1&&(c.$$scope={dirty:s,ctx:r}),n.$set(c)},i(r){l||(b(n.$$.fragment,r),l=!0)},o(r){w(n.$$.fragment,r),l=!1},d(r){r&&(j(e),j(o),j(i)),ce(n)}}}class qc extends je{constructor(e){super(),Xe(this,e,null,Hc,Be,{})}}function Kc(t){let e;return{c(){e=te("div"),e.innerHTML=`<div class="top svelte-613ztf">Creating smart AI agent made easy</div> <div class="bottom svelte-613ztf"><span class="name svelte-613ztf">Caviato</span>
    provides you all the building block to build your own smart autonomous AI agent</div>`,d(e,"class","container svelte-613ztf")},m(n,o){G(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&j(e)}}}class Fc extends je{constructor(e){super(),Xe(this,e,null,Kc,Be,{})}}const Zc="https://caviato.github.io/landing/assets/Full-b423ab52.png";function Vc(t){let e;return{c(){e=te("div"),e.innerHTML=`<img src="${Zc}" alt="Logo" height="60"/>`,d(e,"class","navbar svelte-1l3yvuw")},m(n,o){G(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&j(e)}}}class Uc extends je{constructor(e){super(),Xe(this,e,null,Vc,Be,{})}}function Jc(t){let e;return{c(){e=te("footer"),e.innerHTML='<p class="svelte-17sbm2t">Copyright © 2023 Caviato. All rights reserved.</p> <a href="https://www.flaticon.com/free-icons/support" title="support icons">Support icons created by Freepik - Flaticon</a>',d(e,"class","container svelte-17sbm2t")},m(n,o){G(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&j(e)}}}class Qc extends je{constructor(e){super(),Xe(this,e,null,Jc,Be,{})}}function xc(t){let e,n,o,i,l,r,s,c;const u=t[3].default,f=Ae(u,t,t[2],null);return{c(){e=te("div"),n=te("div"),o=qt(t[0]),i=le(),l=te("div"),r=le(),s=te("div"),f&&f.c(),d(n,"class","title svelte-tjjucb"),d(l,"class","content svelte-tjjucb"),d(s,"class","options svelte-tjjucb"),d(e,"class","container svelte-tjjucb")},m(a,g){G(a,e,g),Z(e,n),Z(n,o),Z(e,i),Z(e,l),l.innerHTML=t[1],Z(e,r),Z(e,s),f&&f.m(s,null),c=!0},p(a,[g]){(!c||g&1)&&$t(o,a[0]),(!c||g&2)&&(l.innerHTML=a[1]),f&&f.p&&(!c||g&4)&&Pe(f,u,a,a[2],c?ve(u,a[2],g,null):De(a[2]),null)},i(a){c||(b(f,a),c=!0)},o(a){w(f,a),c=!1},d(a){a&&j(e),f&&f.d(a)}}}function $c(t,e,n){let{$$slots:o={},$$scope:i}=e,{title:l="Tempor eu eiusmod ut"}=e,{content:r="Aliquip consectetur magna culpa cillum laborum eiusmod laboris ipsum magna. Irure dolore deserunt commodo proident reprehenderit reprehenderit consectetur esse ex reprehenderit nulla quis velit. Enim sint tempor excepteur ut Lorem minim ullamco veniam irure laboris id magna exercitation magna sit. Eiusmod excepteur esse non ea fugiat eu culpa sit sunt mollit. Eiusmod tempor eiusmod ex elit. Eiusmod occaecat deserunt nostrud deserunt amet. Laborum voluptate deserunt nostrud magna ipsum ut"}=e;return t.$$set=s=>{"title"in s&&n(0,l=s.title),"content"in s&&n(1,r=s.content),"$$scope"in s&&n(2,i=s.$$scope)},[l,r,i,o]}class Zn extends je{constructor(e){super(),Xe(this,e,$c,xc,Be,{title:0,content:1})}}function eu(t){let e,n,o,i,l,r;const s=t[3].default,c=Ae(s,t,t[2],null);return{c(){e=te("div"),n=te("div"),c&&c.c(),o=le(),i=te("div"),l=qt(t[0]),d(n,"class","icon svelte-39ysn9"),d(i,"class","description svelte-39ysn9"),d(e,"class","container svelte-39ysn9"),_e(e,"green",t[1])},m(u,f){G(u,e,f),Z(e,n),c&&c.m(n,null),Z(e,o),Z(e,i),Z(i,l),r=!0},p(u,[f]){c&&c.p&&(!r||f&4)&&Pe(c,s,u,u[2],r?ve(s,u[2],f,null):De(u[2]),null),(!r||f&1)&&$t(l,u[0]),(!r||f&2)&&_e(e,"green",u[1])},i(u){r||(b(c,u),r=!0)},o(u){w(c,u),r=!1},d(u){u&&j(e),c&&c.d(u)}}}function tu(t,e,n){let{$$slots:o={},$$scope:i}=e,{description:l="Occaecat excepteur velit consequat eiusmod incididunt proident eu ullamco cillum Lorem quis qui eu"}=e,{green:r=!1}=e;return t.$$set=s=>{"description"in s&&n(0,l=s.description),"green"in s&&n(1,r=s.green),"$$scope"in s&&n(2,i=s.$$scope)},[l,r,i,o]}class sn extends je{constructor(e){super(),Xe(this,e,tu,eu,Be,{description:0,green:1})}}function nu(t){let e,n,o,i,l,r,s,c,u;return{c(){e=te("div"),n=te("div"),o=te("div"),i=le(),l=te("a"),l.innerHTML='<button class="svelte-109hp4o">Sign Up</button>',r=le(),s=te("div"),s.textContent="for early access now!",d(o,"class","shadow svelte-109hp4o"),d(l,"href","https://www.google.com/"),d(l,"target","_blank"),d(l,"class","svelte-109hp4o"),d(n,"class","button-container svelte-109hp4o"),d(s,"class","subtitle svelte-109hp4o"),d(e,"class","container svelte-109hp4o")},m(f,a){G(f,e,a),Z(e,n),Z(n,o),Z(n,i),Z(n,l),Z(e,r),Z(e,s),c||(u=pe(l,"click",ou),c=!0)},p:ee,i:ee,o:ee,d(f){f&&j(e),c=!1,u()}}}function ou(t){t.preventDefault(),setTimeout(()=>{window.open(t.target.parentNode.href)},300)}class $n extends je{constructor(e){super(),Xe(this,e,null,nu,Be,{})}}function iu(t){let e,n;return{c(){e=te("img"),un(e.src,n="   https://cdn-icons-png.flaticon.com/512/780/780623.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){G(o,e,i)},p:ee,d(o){o&&j(e)}}}function lu(t){let e,n;return{c(){e=te("img"),un(e.src,n="https://cdn-icons-png.flaticon.com/512/5828/5828521.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){G(o,e,i)},p:ee,d(o){o&&j(e)}}}function ru(t){let e,n;return{c(){e=te("img"),un(e.src,n="https://cdn-icons-png.flaticon.com/512/5597/5597148.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){G(o,e,i)},p:ee,d(o){o&&j(e)}}}function su(t){let e,n,o,i,l,r;return e=new sn({props:{green:!0,description:`
            Build your own assistant to help you with managing your daily 
            task such as drafting email and schedule meeting.
        `,$$slots:{default:[iu]},$$scope:{ctx:t}}}),o=new sn({props:{green:!0,description:`
          Build a customized virtual avatar for your business
          or a personality for your own fleet of hospitality robot.
        `,$$slots:{default:[lu]},$$scope:{ctx:t}}}),l=new sn({props:{green:!0,description:`
          Build your own librarian for your business
          to help answer all of your business inquiry and
          even generate insight on the data you already have.
        `,$$slots:{default:[ru]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment),n=le(),ue(o.$$.fragment),i=le(),ue(l.$$.fragment)},m(s,c){se(e,s,c),G(s,n,c),se(o,s,c),G(s,i,c),se(l,s,c),r=!0},p(s,c){const u={};c&8&&(u.$$scope={dirty:c,ctx:s}),e.$set(u);const f={};c&8&&(f.$$scope={dirty:c,ctx:s}),o.$set(f);const a={};c&8&&(a.$$scope={dirty:c,ctx:s}),l.$set(a)},i(s){r||(b(e.$$.fragment,s),b(o.$$.fragment,s),b(l.$$.fragment,s),r=!0)},o(s){w(e.$$.fragment,s),w(o.$$.fragment,s),w(l.$$.fragment,s),r=!1},d(s){s&&(j(n),j(i)),ce(e,s),ce(o,s),ce(l,s)}}}function cu(t){let e,n;return e=new $n({}),{c(){ue(e.$$.fragment)},m(o,i){se(e,o,i),n=!0},i(o){n||(b(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function uu(t){let e,n;return{c(){e=te("img"),un(e.src,n="   https://cdn-icons-png.flaticon.com/512/1589/1589085.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){G(o,e,i)},p:ee,d(o){o&&j(e)}}}function fu(t){let e,n;return{c(){e=te("img"),un(e.src,n="   https://cdn-icons-png.flaticon.com/512/1163/1163497.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){G(o,e,i)},p:ee,d(o){o&&j(e)}}}function au(t){let e,n;return{c(){e=te("img"),un(e.src,n="   https://cdn-icons-png.flaticon.com/512/4233/4233839.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){G(o,e,i)},p:ee,d(o){o&&j(e)}}}function du(t){let e,n,o,i,l,r;return e=new sn({props:{description:`
          Easy to use drag-and-drop, no-code interface.
        `,$$slots:{default:[uu]},$$scope:{ctx:t}}}),o=new sn({props:{description:`
          Flexibility in deployment, with focus on privacy and reliability.
        `,$$slots:{default:[fu]},$$scope:{ctx:t}}}),l=new sn({props:{description:`
          First-class customer support and updates.
        `,$$slots:{default:[au]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment),n=le(),ue(o.$$.fragment),i=le(),ue(l.$$.fragment)},m(s,c){se(e,s,c),G(s,n,c),se(o,s,c),G(s,i,c),se(l,s,c),r=!0},p(s,c){const u={};c&8&&(u.$$scope={dirty:c,ctx:s}),e.$set(u);const f={};c&8&&(f.$$scope={dirty:c,ctx:s}),o.$set(f);const a={};c&8&&(a.$$scope={dirty:c,ctx:s}),l.$set(a)},i(s){r||(b(e.$$.fragment,s),b(o.$$.fragment,s),b(l.$$.fragment,s),r=!0)},o(s){w(e.$$.fragment,s),w(o.$$.fragment,s),w(l.$$.fragment,s),r=!1},d(s){s&&(j(n),j(i)),ce(e,s),ce(o,s),ce(l,s)}}}function hu(t){let e,n,o,i,l,r,s,c,u,f,a,g,h,_,p,m,k,S,M,P,T,E,D,H,F,x,ie;n=new Uc({}),l=new Fc({}),s=new $n({}),u=new qc({}),a=new Zn({props:{title:gu,content:t[0]}}),h=new Zn({props:{title:_u,content:t[1],$$slots:{default:[su]},$$scope:{ctx:t}}});let O=window.innerWidth<=600&&cu();return P=new Zn({props:{title:mu,content:t[2],$$slots:{default:[du]},$$scope:{ctx:t}}}),H=new $n({}),x=new Qc({}),{c(){e=te("div"),ue(n.$$.fragment),o=le(),i=te("div"),ue(l.$$.fragment),r=le(),ue(s.$$.fragment),c=le(),ue(u.$$.fragment),f=le(),ue(a.$$.fragment),g=le(),ue(h.$$.fragment),_=le(),p=te("br"),m=le(),O&&O.c(),k=le(),S=te("br"),M=le(),ue(P.$$.fragment),T=le(),E=te("br"),D=le(),ue(H.$$.fragment),F=le(),ue(x.$$.fragment),d(i,"class","body svelte-qcnued"),d(e,"class","container svelte-qcnued")},m(B,R){G(B,e,R),se(n,e,null),Z(e,o),Z(e,i),se(l,i,null),Z(i,r),se(s,i,null),Z(i,c),se(u,i,null),Z(i,f),se(a,i,null),Z(i,g),se(h,i,null),Z(i,_),Z(i,p),Z(i,m),O&&O.m(i,null),Z(i,k),Z(i,S),Z(i,M),se(P,i,null),Z(i,T),Z(i,E),Z(i,D),se(H,i,null),Z(e,F),se(x,e,null),ie=!0},p(B,[R]){const X={};R&8&&(X.$$scope={dirty:R,ctx:B}),h.$set(X);const ne={};R&8&&(ne.$$scope={dirty:R,ctx:B}),P.$set(ne)},i(B){ie||(b(n.$$.fragment,B),b(l.$$.fragment,B),b(s.$$.fragment,B),b(u.$$.fragment,B),b(a.$$.fragment,B),b(h.$$.fragment,B),b(O),b(P.$$.fragment,B),b(H.$$.fragment,B),b(x.$$.fragment,B),ie=!0)},o(B){w(n.$$.fragment,B),w(l.$$.fragment,B),w(s.$$.fragment,B),w(u.$$.fragment,B),w(a.$$.fragment,B),w(h.$$.fragment,B),w(O),w(P.$$.fragment,B),w(H.$$.fragment,B),w(x.$$.fragment,B),ie=!1},d(B){B&&j(e),ce(n),ce(l),ce(s),ce(u),ce(a),ce(h),O&&O.d(),ce(P),ce(H),ce(x)}}}const gu="What is Caviato?",_u="What can you build with Caviato?",mu="Why should you use Caviato?";function bu(t){return[`
    Caviato is a platform that enable you to build your own autonomous agents
    by providing you with the fundamental building blocks supercharged with
    Generative AI capability, making it as straight forward and simple as playing with Lego.
    <br/><br/>
    You provide us with the blueprint,
    and we will help you take care of the rest.
    No technical knowledge required!
  `,`
    With Caviato, the possibility is only limited by your imagination.
    Whether to help you streamline your daily tasks or to make a virtual avatar for your company,
    Caviato can help make your vision come true.
  `,`
    Caviato made building autonomous agents quick and easy with our intuitive drag-and-drop,
    no-code interface. You can also choose to deploy your model either on our cloud or
    internally within your company, we give you the flexibility and the privacy that you need
    without sacrificing speed and convienience. We also provide first-class support to all of
    our customers, and frequently updates our module to suit your needs. 
  `]}class pu extends je{constructor(e){super(),Xe(this,e,bu,hu,Be,{})}}new pu({target:document.getElementById("app")});export{Ut as $,se as A,Gi as B,Yi as C,ce as D,Mn as E,qt as F,bt as G,$t as H,ht as I,Ae as J,Pe as K,De as L,ve as M,yo as N,wt as O,oe as P,$l as Q,ao as R,je as S,bn as T,ku as U,Mt as V,wu as W,q as X,Cu as Y,Kt as Z,pt as _,d as a,W as b,G as c,j as d,te as e,Y as f,Ve as g,yt as h,Xe as i,le as j,Z as k,pe as l,Le as m,ee as n,Ft as o,Ie as p,b as q,w as r,Be as s,_e as t,An as u,Ne as v,Ln as w,He as x,eo as y,ue as z};
