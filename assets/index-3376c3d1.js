var fl=Object.defineProperty;var al=(t,e,n)=>e in t?fl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rn=(t,e,n)=>(al(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function ee(){}function xn(t,e){for(const n in e)t[n]=e[n];return t}function Oi(t){return t()}function co(){return Object.create(null)}function ht(t){t.forEach(Oi)}function pn(t){return typeof t=="function"}function Be(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let yn;function un(t,e){return t===e?!0:(yn||(yn=document.createElement("a")),yn.href=e,t===yn.href)}function dl(t){return Object.keys(t).length===0}function Ve(t,...e){if(t==null){for(const o of e)o(void 0);return ee}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function U(t){let e;return Ve(t,n=>e=n)(),e}function X(t,e,n){t.$$.on_destroy.push(Ve(e,n))}function Ae(t,e,n,o){if(t){const i=Ti(t,e,n,o);return t[0](i)}}function Ti(t,e,n,o){return t[1]&&o?xn(n.ctx.slice(),t[1](o(e))):n.ctx}function ve(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const l=[],s=Math.max(e.dirty.length,i.length);for(let r=0;r<s;r+=1)l[r]=e.dirty[r]|i[r];return l}return e.dirty|i}return e.dirty}function Pe(t,e,n,o,i,l){if(i){const s=Ti(e,n,o,l);t.p(s,i)}}function De(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function $n(t){const e={};for(const n in t)e[n]=!0;return e}function oe(t,e,n){return t.set(n),e}function Ht(t){return t&&pn(t.destroy)?t.destroy:ee}function V(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function B(t){t.parentNode&&t.parentNode.removeChild(t)}function En(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function te(t){return document.createElement(t)}function pt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Kt(t){return document.createTextNode(t)}function se(){return Kt(" ")}function He(){return Kt("")}function pe(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function Mt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function bt(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function hn(t){return function(e){e.target===this&&t.call(this,e)}}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function yu(t){return t===""?null:+t}function hl(t){return Array.from(t.childNodes)}function $t(t,e){e=""+e,t.data!==e&&(t.data=e)}function uo(t,e){t.value=e??""}function T(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function wu(t,e,n){for(let o=0;o<t.options.length;o+=1){const i=t.options[o];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function ku(t){const e=t.querySelector(":checked");return e&&e.__value}let wn;function gl(){if(wn===void 0){wn=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{wn=!0}}return wn}function Bi(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const o=te("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const i=gl();let l;return i?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=pe(window,"message",s=>{s.source===o.contentWindow&&e()})):(o.src="about:blank",o.onload=()=>{l=pe(o.contentWindow,"resize",e),e()}),V(t,o),()=>{(i||l&&o.contentWindow)&&l(),B(o)}}function _e(t,e,n){t.classList.toggle(e,!!n)}function _l(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}function Ut(t,e){return new t(e)}let mn;function gn(t){mn=t}function en(){if(!mn)throw new Error("Function called outside component initialization");return mn}function ml(t){en().$$.before_update.push(t)}function Ft(t){en().$$.on_mount.push(t)}function Ri(t){en().$$.after_update.push(t)}function Dn(t){en().$$.on_destroy.push(t)}function cn(){const t=en();return(e,n,{cancelable:o=!1}={})=>{const i=t.$$.callbacks[e];if(i){const l=_l(e,n,{cancelable:o});return i.slice().forEach(s=>{s.call(t,l)}),!l.defaultPrevented}return!0}}function We(t,e){return en().$$.context.set(t,e),e}function Ne(t){return en().$$.context.get(t)}function xe(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(o=>o.call(this,e))}const on=[],qt=[];let sn=[];const fo=[],Wi=Promise.resolve();let Zn=!1;function Xi(){Zn||(Zn=!0,Wi.then(ji))}function bl(){return Xi(),Wi}function bn(t){sn.push(t)}const Wn=new Set;let tn=0;function ji(){if(tn!==0)return;const t=mn;do{try{for(;tn<on.length;){const e=on[tn];tn++,gn(e),pl(e.$$)}}catch(e){throw on.length=0,tn=0,e}for(gn(null),on.length=0,tn=0;qt.length;)qt.pop()();for(let e=0;e<sn.length;e+=1){const n=sn[e];Wn.has(n)||(Wn.add(n),n())}sn.length=0}while(on.length);for(;fo.length;)fo.pop()();Zn=!1,Wn.clear(),gn(t)}function pl(t){if(t.fragment!==null){t.update(),ht(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(bn)}}function yl(t){const e=[],n=[];sn.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),sn=e}const Nn=new Set;let Qt;function Le(){Qt={r:0,c:[],p:Qt}}function Ie(){Qt.r||ht(Qt.c),Qt=Qt.p}function p(t,e){t&&t.i&&(Nn.delete(t),t.i(e))}function k(t,e,n,o){if(t&&t.o){if(Nn.has(t))return;Nn.add(t),Qt.c.push(()=>{Nn.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function yt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Mn(t,e){k(t,1,1,()=>{e.delete(t.key)})}function An(t,e,n,o,i,l,s,r,c,u,f,a){let g=t.length,h=l.length,_=g;const b={};for(;_--;)b[t[_].key]=_;const m=[],w=new Map,S=new Map,A=[];for(_=h;_--;){const N=a(i,l,_),j=n(N);let q=s.get(j);q?o&&A.push(()=>q.p(N,e)):(q=u(j,N),q.c()),w.set(j,m[_]=q),j in b&&S.set(j,Math.abs(_-b[j]))}const z=new Set,I=new Set;function M(N){p(N,1),N.m(r,f),s.set(N.key,N),f=N.first,h--}for(;g&&h;){const N=m[h-1],j=t[g-1],q=N.key,$=j.key;N===j?(f=N.first,g--,h--):w.has($)?!s.has(q)||z.has(q)?M(N):I.has($)?g--:S.get(q)>S.get($)?(I.add(q),M(N)):(z.add($),g--):(c(j,s),g--)}for(;g--;){const N=t[g];w.has(N.key)||c(N,s)}for(;h;)M(m[h-1]);return ht(A),m}function Gi(t,e){const n={},o={},i={$$scope:1};let l=t.length;for(;l--;){const s=t[l],r=e[l];if(r){for(const c in s)c in r||(o[c]=1);for(const c in r)i[c]||(n[c]=r[c],i[c]=1);t[l]=r}else for(const c in s)i[c]=1}for(const s in o)s in n||(n[s]=void 0);return n}function Yi(t){return typeof t=="object"&&t!==null?t:{}}function ue(t){t&&t.c()}function re(t,e,n){const{fragment:o,after_update:i}=t.$$;o&&o.m(e,n),bn(()=>{const l=t.$$.on_mount.map(Oi).filter(pn);t.$$.on_destroy?t.$$.on_destroy.push(...l):ht(l),t.$$.on_mount=[]}),i.forEach(bn)}function ce(t,e){const n=t.$$;n.fragment!==null&&(yl(n.after_update),ht(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function wl(t,e){t.$$.dirty[0]===-1&&(on.push(t),Xi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Xe(t,e,n,o,i,l,s=null,r=[-1]){const c=mn;gn(t);const u=t.$$={fragment:null,ctx:[],props:l,update:ee,not_equal:i,bound:co(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:co(),dirty:r,skip_bound:!1,root:e.target||c.$$.root};s&&s(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(a,g,...h)=>{const _=h.length?h[0]:g;return u.ctx&&i(u.ctx[a],u.ctx[a]=_)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](_),f&&wl(t,a)),g}):[],u.update(),f=!0,ht(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const a=hl(e.target);u.fragment&&u.fragment.l(a),a.forEach(B)}else u.fragment&&u.fragment.c();e.intro&&p(t.$$.fragment),re(t,e.target,e.anchor),ji()}gn(c)}class je{constructor(){Rn(this,"$$");Rn(this,"$$set")}$destroy(){ce(this,1),this.$destroy=ee}$on(e,n){if(!pn(n))return ee;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(e){this.$$set&&!dl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const kl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(kl);const nn=[];function vn(t,e){return{subscribe:Y(t,e).subscribe}}function Y(t,e=ee){let n;const o=new Set;function i(r){if(Be(t,r)&&(t=r,n)){const c=!nn.length;for(const u of o)u[1](),nn.push(u,t);if(c){for(let u=0;u<nn.length;u+=2)nn[u][0](nn[u+1]);nn.length=0}}}function l(r){i(r(t))}function s(r,c=ee){const u=[r,c];return o.add(u),o.size===1&&(n=e(i,l)||ee),r(t),()=>{o.delete(u),o.size===0&&n&&(n(),n=null)}}return{set:i,update:l,subscribe:s}}function _n(t,e,n){const o=!Array.isArray(t),i=o?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return vn(n,(s,r)=>{let c=!1;const u=[];let f=0,a=ee;const g=()=>{if(f)return;a();const _=e(o?u[0]:u,s,r);l?s(_):a=pn(_)?_:ee},h=i.map((_,b)=>Ve(_,m=>{u[b]=m,f&=~(1<<b),c&&g()},()=>{f|=1<<b}));return c=!0,g(),function(){ht(h),a(),c=!1}})}function Pn(){const t=new Map,{subscribe:e,set:n,update:o}=Y(t);return{subscribe:e,set:n,update:o,add:(l,s)=>(o(r=>(r.set(s,l),r)),t),get:l=>t.get(l)||null,getAll:()=>Array.from(t.values()),delete:l=>{let s=!1;return o(r=>(r.delete(l),s=!0,r)),s},count:()=>t.size}}function Hi(t){const{id:e,inputs:n,outputs:o,resizable:i,dimensions:l,editable:s,direction:r,zIndex:c,position:u,selectionColor:f,borderWidth:a,edge:g}=t,{bgColor:h,borderColor:_,rotation:b,borderRadius:m,connections:w,textColor:S,locked:A,group:z}=t,I=Pn(),M=(q="self")=>{U(I).forEach($=>{(q==="self"||U($.direction)===q)&&$.recalculatePosition()})};return{id:typeof e=="string"&&e.slice(0,2)==="N-"?e:`N-${e}`,position:Y({x:(u==null?void 0:u.x)||0,y:(u==null?void 0:u.y)||0}),dimensions:{width:Y((l==null?void 0:l.width)||0),height:Y((l==null?void 0:l.height)||(l==null?void 0:l.width))},group:Y(z||null),locked:Y(A||!1),inputs:Y(n),outputs:Y(o),recalculateAnchors:M,rotation:Y(b||0),moving:Y(!1),resizingWidth:Y(!1),resizingHeight:Y(!1),rotating:Y(!1),editable:Y(s||!1),resizable:Y(i),anchors:I,zIndex:Y(c||2),collapsed:Y(!1),edge:g||null,borderRadius:Y(m),bgColor:Y(h||null),direction:Y(r),label:Y(t.label||""),borderColor:Y(_||null),borderWidth:Y(a),selectionColor:Y(f||null),textColor:Y(S||null),connections:Y(w)}}const Cl=10,Sl=100,Nl=50,El="#000",Ml="#fff",Al="12px",vl=22,Pl=1.4,Dl=40;function Ll(t,e){const n=[t,e].sort();return`${n[0]}+${n[1]}`}function ao(t,e,n){var r,c,u,f,a;const{source:o,target:i}=t,s={id:o.id&&i.id?Ll(o.id,i.id):"cursor",target:t.target,source:t.source,component:e,type:Y((n==null?void 0:n.type)||null),color:(n==null?void 0:n.color)||Y(null),width:Y((n==null?void 0:n.width)||0),animated:Y((n==null?void 0:n.animated)||!1),rendered:Y(!1)};if(n!=null&&n.disconnect&&(s.disconnect=!0),n!=null&&n.label){const g={text:Y(n==null?void 0:n.label.text),color:Y(((r=n==null?void 0:n.label)==null?void 0:r.color)||El),textColor:Y(((c=n==null?void 0:n.label)==null?void 0:c.textColor)||Ml),fontSize:Y(((u=n==null?void 0:n.label)==null?void 0:u.fontSize)||Al),dimensions:{width:Y(((f=n==null?void 0:n.label.dimensions)==null?void 0:f.width)||Sl),height:Y(((a=n==null?void 0:n.label.dimensions)==null?void 0:a.height)||Nl)},borderRadius:Y((n==null?void 0:n.label.borderRadius)||Cl)};s.label=g}return s}function Il(){const t=new Map,e=new Set,{subscribe:n,set:o,update:i}=Y(t),l={subscribe:n,set:o,update:i,add:(s,r)=>{if(typeof r!="string"){const c=Array.from(r),u=c[0],f=c[1];if(u.connected.update(a=>a.add(f)),f.connected.update(a=>a.add(u)),l.match(...Array.from(r)).length)return;e.forEach(a=>a(s,"connection"))}i(c=>(c.set(r,s),c))},getAll:()=>Array.from(t.values()),get:s=>t.get(s)||null,match:(...s)=>Array.from(t.keys()).filter(r=>r==="cursor"?!1:s.every(c=>c?r.has(c):!0)),fetch:(s,r)=>{const c=Array.from(t.keys()).filter(u=>u==="cursor"?!1:[s,r].every(f=>f?u.has(f):!0))[0];return t.get(c)||null},delete:s=>{if(typeof s!="string"){const c=Array.from(s),u=c[0],f=c[1];u.connected.update(a=>(a.delete(f),a)),f.connected.update(a=>(a.delete(u),a))}let r=!1;return i(c=>{const u=c.get(s);return u&&(c.delete(s),r=!0,typeof s!="string"&&e.forEach(f=>f(u,"disconnection"))),c}),r},onEdgeChange:s=>(e.add(s),()=>e.delete(s)),count:()=>t.size};return l}function zl(t,e){const n=t.clientX-e.clientX,o=t.clientY-e.clientY;return Math.sqrt(n*n+o*o)}function Ol(){const t=()=>Math.floor(Math.random()*256),e=t(),n=t(),o=t();return`rgb(${e},${n},${o})`}const Tl={"(":"round","([":"stadium","[[":"subroutine","[(":"cylindrical","((":"circle","{":"rhombus","{{":"hexagon"},ho={"-":"straight","~":"bezier"},Ki={"(":")","[":"]","{":"}"},Bl=/[-=~]*>(?:\s*\|(.+?)\|)?/g,Rl=t=>{const e=t.split(`
`),n={parentNodes:[],nodeList:{}};for(const o of e){const{parentNodes:i,childNodes:l,edge:s}=Wl(o);for(const r of i){n.nodeList[r.id]||n.parentNodes.push(r);for(const c of l){if(n.nodeList[r.id]){if(n.nodeList[c.id]&&n.nodeList[c.id].children.some(({node:u})=>u.id===r.id))throw new Error("Circular reference detected");n.nodeList[r.id].children.push({node:n.nodeList[c.id]||c,...s})}else r.children.push({node:n.nodeList[c.id]||c,...s}),n.nodeList[r.id]=r;n.nodeList[c.id]?n.nodeList[c.id].parents.push({node:n.nodeList[r.id]||r}):(c.parents.push({node:n.nodeList[r.id]||r}),n.nodeList[c.id]=c),n.parentNodes=n.parentNodes.filter(u=>u.id!==c.id)}}}return n},Wl=t=>{const e=[],n=[],o=t.trim();let i="";const l=o.match(Bl);if(l)i=l[0];else throw new Error("Invalid edge");const[s,r]=o.split(i);for(const u of s.split("&"))e.push(go(u));for(const u of r.split("&"))n.push(go(u));const c=Xl(i);return{parentNodes:e,childNodes:n,edge:c}},go=t=>{t=t.trim();let e="",n="";const o={shape:""},i=[],l=t.split("|"),s=l[0];let r=l[1];const c=l[2];for(let u=0;u<s.length;u++)if(jl(s[u]))i.push(s[u]);else if(Ki[i[i.length-1]]===s[u]){n=Tl[i.join("")];break}else e+=s[u];return n||(n="default"),o.shape=n,r||(r="Default"),c?o.props=c:o.content=e,{id:e,data:o,type:r,children:[],parents:[],depth:0,nesting:0}},Xl=t=>{t=t.trim();let e="";const[n,o]=t.split("|"),i=n[0];if(i in ho)e=ho[i];else throw new Error("Not a valid edge type");return o?{shape:e,content:o.trim(),length:Math.floor((n.trim().length-1)/2)}:{shape:e,length:Math.floor((n.trim().length-1)/2)}};function jl(t){return t in Ki}function Gl(){return Math.random().toString(36).substring(7)}function _o(t,e=1){const n=Math.pow(10,e);return Math.round(t*n)/n}function Yl(t,e){const n=Math.sign(t.x).toString(),o=Math.sign(t.y).toString(),i=Math.sign(e.x).toString(),l=Math.sign(e.y).toString();return`${n}${o}${i}${l}`}function Hl(t,e){return{1001:`a ${t} ${t} 0 0 1 ${t} ${t}`,"0110":`a ${t} ${t} 0 0 0 ${t} ${t}`,"100-1":`a ${t} ${t} 0 0 0 ${t} -${t}`,"0-110":`a ${t} ${t} 0 0 1 ${t} -${t}`,"-1001":`a ${t} ${t} 0 0 0 -${t} ${t}`,"01-10":`a ${t} ${t} 0 0 1 -${t} ${t}`,"-100-1":`a ${t} ${t} 0 0 1 -${t} -${t}`,"0-1-10":`a ${t} ${t} 0 0 0 -${t} -${t}`}[e]||""}function mo(t,e){const n=e*(Math.PI/180),o=t.x*Math.cos(n)-t.y*Math.sin(n),i=t.x*Math.sin(n)+t.y*Math.cos(n);return{x:o,y:i}}const Kl=(t,e,n,o)=>t+` l ${e} ${n} `+o,dt=Y({x:0,y:0}),Vn=Y(0),wt=Y(!1),Un=Y(!1),qi=vn({x:0,y:0},t=>{const e=l=>{t({x:l.clientX,y:l.clientY})},n=l=>{if(l.touches.length===2){const s=zl(l.touches[0],l.touches[1]);Vn.set(s);const r={x:l.touches[0].clientX,y:l.touches[0].clientY};t(r)}else if(l.touches.length===1){const s=l.touches[0].clientX,r=l.touches[0].clientY;t({x:s,y:r}),wt.set(!0)}},o=l=>{n(l),window.addEventListener("touchend",i),window.addEventListener("touchmove",n)},i=()=>{wt.set(!1),Vn.set(0),window.removeEventListener("touchmove",n)};return document.addEventListener("mousemove",e),window.addEventListener("touchstart",o,!0),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("touchstart",o),window.removeEventListener("touchmove",n),window.removeEventListener("touchend",i)}});function Xn(t){const e=t.style.width,n=t.style.height;t.style.width="fit-content",t.style.height="fit-content";const o=t.offsetWidth,i=t.offsetHeight;return t.style.width=e,t.style.height=n,[o,i]}function Fi(t,e,n,o,i){const l={x:0,y:0},s=o.x-i.left-i.width/2,r=o.y-i.top-i.height/2,c=(s-n.x)/t,u=(r-n.y)/t;return l.x=s-c*e,l.y=r-u*e,l}const ql=3,Fl=.1,dn={north:{x:0,y:-1},south:{x:0,y:1},east:{x:1,y:0},west:{x:-1,y:0},self:{x:0,y:0}};function Zi(t,e,n){const o=e*n,i=t-o;return Number(Math.max(Fl,Math.min(ql,i)).toFixed(9))}const Ln=(t,e,n,o,i,l,s)=>{const{clientX:r,clientY:c}=t,u=l,f=r-n,a=c-e,g=s.x,h=s.y,_=o*(1-l)/2,b=i*(1-l)/2,m=f-g-_,w=a-h-b,S=m/u,A=w/u;return{x:S,y:A}};function Zl(t,e,n){const{top:o,left:i,width:l,height:s}=U(t),r=U(e.scale),c=U(e.translation);return{scaled:Ln({clientX:n.x,clientY:n.y},o,i,l,s,r,c),scale:r}}function Vl(t,e,n){const{scale:o,translation:i}=n,l=U(o),s=U(i),r=e.x-t.x,c=e.y-t.y,u=s.x+r*l,f=s.y+c*l;return{x:u,y:f}}function Ul(t,e){return t.x*e.x+t.y*e.y}function Jl(t,e,n){const o=[],i=e.x-t.x,l=e.y-t.y,s=xl(t.direction,e.direction),r=Ul(t.direction,e.direction)===0,c=Ql(t,e),u=Ze(t.direction,-1,-1),f=Ze(e.direction,-1,-1),a={x:Math.abs(t.direction.y),y:Math.abs(t.direction.x)},g=Ze(t.direction,i-n*t.direction.x*(r?1:s?0:2),l-n*t.direction.y*(r?1:s?0:2)),h=Ze(e.direction,i+n*e.direction.x*(r?1:s?0:2),l+n*e.direction.y*(r?1:s?0:2)),_=Math.sign(g.x)===-1||Math.sign(g.y)===-1,b=Math.sign(h.x)===1||Math.sign(h.y)===1,m=Math.abs(i),w=Math.abs(l),S=Ze(t.direction,n,n),A=Ze(f,n,n),z=Ze(e.direction,n,n),I=Ze(t.direction,m,w),M=Ze(f,m,w),N=Ze(t.direction,m/2,w/2),j=Ze(f,m/2,w/2),q=Ze(a,i,l),$=!c&&!b&&!_,ie=t.x+S.x,G=t.y+S.y,x=e.x+z.x,H=e.y+z.y;if(_&&o.push(S),c&&!b&&!_)o.push(I),o.push(M);else if(s)_||o.push(Ze(t.direction,n+m,n+w)),o.push(q),b||o.push(Ze(f,n+m,n+w));else if($)o.push(N),o.push(q),o.push(j);else if(_&&b)if(r){const W=Math.abs(ie-x),ne=Math.abs(G-H);o.push(Ze(e.direction,m<n*2?e.direction.x*(i+e.direction.x*n):m+n,w<n*2?e.direction.y*(l+e.direction.y*n):w+n)),o.push(Ze(u,W,ne))}else{const W=Math.abs(ie-x),ne=Math.abs(G-H);o.push(Ze(a,i/2,l/2)),o.push(Ze(e.direction,W,ne)),o.push(Ze(a,i/2,l/2))}else if(_){const W=Math.abs(ie-e.x),ne=Math.abs(G-e.y);o.push(Ze(f,m<n*2?m-n:m/2,w<n*2?w-n:w/2)),o.push(Ze(u,W,ne)),o.push(Ze(f,Math.max(n,m/2),Math.max(n,w/2)))}else if(b){const W=Math.abs(x-t.x),ne=Math.abs(H-t.y);o.push(Ze(t.direction,Math.max(n,m/2),Math.max(n,w/2))),o.push(Ze(e.direction,W,ne)),o.push(Ze(t.direction,m<n*2?m-n:m/2,w<n*2?w-n:w/2))}return b&&o.push(A),o}function Ql(t,e){const{x:n,y:o}=t.direction,{x:i,y:l}=e.direction,s=e.x-t.x,r=e.y-t.y;return n*l===i*o?!1:Math.sign(r)===Math.sign(o+l)!=(Math.sign(s)===Math.sign(n+i))}function Ze(t,e,n){return{x:t.x*e,y:t.y*n}}function xl(t,e){return t.x===e.x&&t.y===e.y}function $l(t,e){const{width:n,height:o}=t,{top:i,left:l,right:s,bottom:r}=e,c=s-l,u=r-i;if(!c||!u)return{x:null,y:null,scale:null};const f=l+c/2,a=i+u/2,g=Math.min(n/c,o/u)*.8,h=n/2,_=o/2,b=h-f,m=_-a;return{x:b*g,y:m*g,scale:g}}const kn=(t,e,n)=>Math.min(Math.abs(t||e)/2,n);function jn(t,e){const o=t.getTotalLength()*e;return t.getPointAtLength(o)}function es(t,e,n,o){return _n([t,e,n,o],([l,s,r,c])=>{const u={clientX:l.x,clientY:l.y};return Ln(u,s.top,s.left,s.width,s.height,c,r)})}function ts(t,e,n,o){const i=Y({top:1/0,left:1/0,right:-1/0,bottom:-1/0}),l=Y({top:1/0,left:1/0,right:-1/0,bottom:-1/0});let s,r=U(e),c=U(n),u=U(o),f=r.width/c,a=r.height/c;function g(){const{x:_,y:b}=Ln({clientX:r.left,clientY:r.top},r.top,r.left,r.width,r.height,c,u),m=U(l);i.set({top:Math.min(m.top,b),left:Math.min(m.left,_),right:Math.max(m.right,_+f),bottom:Math.max(m.bottom,a+b)})}function h(_=!1){let b=1/0,m=1/0,w=-1/0,S=-1/0;for(const A of t.getAll()){const{x:z,y:I}=U(A.position),M=U(A.dimensions.width),N=U(A.dimensions.height);m=Math.min(m,z),b=Math.min(b,I),w=Math.max(w,z+M),S=Math.max(S,I+N)}l.set({top:b,left:m,right:w,bottom:S}),g(),_&&(s=requestAnimationFrame(()=>h(_)))}return t.subscribe(()=>{h()}),Un.subscribe(_=>{_&&h(_),_||cancelAnimationFrame(s)}),wt.subscribe(_=>{_&&h(_),_||cancelAnimationFrame(s)}),e.subscribe(()=>{r=U(e),f=r.width/c,a=r.height/c,g()}),n.subscribe(()=>{c=U(n),f=r.width/c,a=r.height/c,g()}),o.subscribe(()=>{u=U(o),g()}),{graphBounds:i,nodeBounds:l}}function ns(t,e,n){const{width:o,height:i,top:l,left:s}=t,r={clientX:o/2,clientY:i/2};return Ln(r,l,s,o,i,n,e)}function Vi(t,e){const{zoom:n,editable:o,translation:i,direction:l,locked:s,edge:r}=e,c=Y({x:(i==null?void 0:i.x)||0,y:(i==null?void 0:i.y)||0}),u=Y({top:0,left:0,width:0,height:0,bottom:0,right:0}),f=Y(n),a=Y(!1),g=Pn(),h=ts(g,u,f,c),_=_n([u,c,f],([m,w,S])=>ns(m,w,S));return{id:t,nodes:g,edges:Il(),transforms:{translation:c,scale:f},maxZIndex:Y(2),dimensions:u,bounds:h,center:_,mounted:a,direction:l||"LR",editable:o||!1,edge:r||null,editing:Y(null),cursor:es(qi,u,c,f),locked:Y(s||!1),groups:Y({selected:{parent:Y(null),nodes:Y(new Set)},hidden:{parent:Y(null),nodes:Y(new Set)}}),groupBoxes:Pn(),activeGroup:Y(null),initialNodePositions:Y([])}}const Gn=Pn(),Cn=10;function Ui(t){const e=U(t);return Array.from(e).map(o=>U(o.position))}function os(t,e){let n;const o=U(t.groups),i=U(t.activeGroup);if(!i)return;const l=o[i].nodes;if(!l)return;const s=U(t.initialNodePositions),{x:r,y:c}=U(dt),u=Array.from(U(l)),f=U(t.groupBoxes);u.forEach(g=>g.moving.set(!0)),a();function a(){const g=U(t.cursor);let h=g.x-r,_=g.y-c;e&&(h-=h%e,_-=_%e);const b={x:h,y:_};u.forEach((m,w)=>{const{group:S,position:A}=m,z=s[w];let I;if(i==="selected"){const M=U(S);M&&(I=f.get(M))}if(!I)Ji(z,b,A);else{const M=U(m.dimensions.width),N=U(m.dimensions.height),j=xi(I,M,N);Qi(z,b,A,j)}}),U(wt)?n=requestAnimationFrame(a):cancelAnimationFrame(n)}}function Ji(t,e,n){n.set({x:t.x+e.x,y:t.y+e.y})}function Qi(t,e,n,o){n.set({x:Math.min(Math.max(o.left,t.x+e.x),o.right),y:Math.min(Math.max(o.top,t.y+e.y),o.bottom)})}function xi(t,e,n){const{x:o,y:i}=U(t.position);return{left:o+Cn,right:o+U(t.dimensions.width)-e-Cn,top:i+Cn,bottom:i+U(t.dimensions.height)-n-Cn}}function bo(t=1,e,n,o=.1){const i=U(e),{width:l,height:s,top:r,left:c}=i,u=n.scale,f=U(n.translation),a=U(u),g=Zi(a,t,o),h=Fi(a,g,f,{x:l/2+c,y:s/2+r},i);u.set(g),n.translation.set(h)}function $i(t,e,n,o,i,l,s,r,c,u,f,a){const{width:g,height:h}=i,{x:_,y:b}=o,m=U(e.position),w=Y({x:_-m.x+g/2,y:b-m.y+h/2}),S=_n([e.position,w],([q,$])=>({x:q.x+$.x,y:q.y+$.y})),A=t.transforms,z=t.dimensions,I=Y(c||"self"),M=()=>{const q=document.getElementById(n),$=U(I),ie=dn[$];if(!q)return;const{x:G,y:x,width:H,height:W}=q.getBoundingClientRect(),ne=U(w),v=U(S),{scaled:K,scale:L}=Zl(z,A,{x:G,y:x}),F=K.x-v.x,we=K.y-v.y;w.set({x:ne.x+F+H/L/2+ie.x*H/L/2,y:ne.y+we+W/L/2+ie.y*W/L/2})},N=_n([e.moving,e.resizingWidth,e.resizingHeight,e.rotating],([q,$,ie,G])=>q||$||ie||G),j=_n([e.rotation],([q])=>q);return{id:n,position:S,offset:w,direction:I,dynamic:Y(u||!1),type:r,edge:s,moving:N,mounted:Y(!1),recalculatePosition:M,connected:Y(new Set),store:l||null,inputKey:f||null,edgeColor:a||Y(null),rotation:j,node:e}}function is(t){const e=JSON.parse(t),n=Vi(e.id,{...e,initialZoom:e.transforms.scale});return Object.entries(e.nodes).forEach(([o,i])=>{const s=Hi(i);Object.entries(i.anchors).forEach(([r,c])=>{const u=$i(s,r,c.position,{width:0,height:0},c.input,c.direction,c.dynamic);s.anchors.add(u,r)}),n.nodes.add(s,o)}),Object.entries(e.edges).forEach(([o,i])=>{n.edges.add(i,o)}),n}function ls(t){let e;const n=t[2].default,o=Ae(n,t,t[1],null);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,[l]){o&&o.p&&(!e||l&2)&&Pe(o,n,i,i[1],e?ve(n,i[1],l,null):De(i[1]),null)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function ss(t,e,n){let{$$slots:o={},$$scope:i}=e,{edge:l}=e;return We("edge",l),t.$$set=s=>{"edge"in s&&n(0,l=s.edge),"$$scope"in s&&n(1,i=s.$$scope)},[l,i,o]}class el extends je{constructor(e){super(),Xe(this,e,ss,ls,Be,{edge:0})}}const rs=t=>({}),po=t=>({}),cs=t=>({path:t[0]&1024,hovering:t[0]&8192}),yo=t=>({path:t[10],destroy:t[7],hovering:t[13]});function us(t){let e,n,o,i,l;const s=t[89].default,r=Ae(s,t,t[88],yo),c=r||fs(t);let u=t[8]&&wo(t);return{c(){e=pt("svg"),n=pt("path"),c&&c.c(),u&&u.c(),d(n,"role","presentation"),d(n,"id",t[36]+"-target"),d(n,"class","target svelte-eznx2t"),d(n,"d",t[10]),_e(n,"cursor",t[36]==="cursor"||!t[2]&&!t[1]),T(n,"cursor",t[2]||t[13]?"pointer":"move"),T(n,"--prop-target-edge-color",t[2]||t[13]?t[6]||null:"transparent"),d(e,"class","edges-wrapper svelte-eznx2t"),T(e,"z-index",t[15])},m(f,a){R(f,e,a),V(e,n),t[92](n),c&&c.m(e,null),u&&u.m(e,null),t[93](e),o=!0,i||(l=[pe(n,"mousedown",function(){pn(t[2])&&t[2].apply(this,arguments)}),pe(n,"mouseenter",t[90]),pe(n,"mouseleave",t[91])],i=!0)},p(f,a){t=f,(!o||a[0]&1024)&&d(n,"d",t[10]),(!o||a[0]&6|a[1]&32)&&_e(n,"cursor",t[36]==="cursor"||!t[2]&&!t[1]),a[0]&8196&&T(n,"cursor",t[2]||t[13]?"pointer":"move"),a[0]&8260&&T(n,"--prop-target-edge-color",t[2]||t[13]?t[6]||null:"transparent"),r?r.p&&(!o||a[0]&9216|a[2]&67108864)&&Pe(r,s,t,t[88],o?ve(s,t[88],a,cs):De(t[88]),yo):c&&c.p&&(!o||a[0]&263177)&&c.p(t,o?a:[-1,-1,-1,-1]),t[8]?u?(u.p(t,a),a[0]&256&&p(u,1)):(u=wo(t),u.c(),p(u,1),u.m(e,null)):u&&(Le(),k(u,1,1,()=>{u=null}),Ie()),a[0]&32768&&T(e,"z-index",t[15])},i(f){o||(p(c,f),p(u),o=!0)},o(f){k(c,f),k(u),o=!1},d(f){f&&B(e),t[92](null),c&&c.d(f),u&&u.d(),t[93](null),i=!1,ht(l)}}}function fs(t){let e;return{c(){e=pt("path"),d(e,"id",t[36]),d(e,"class","edge svelte-eznx2t"),d(e,"d",t[10]),_e(e,"animate",t[0]),T(e,"--prop-edge-color",t[18]),T(e,"--prop-stroke-width",t[3]?t[3]+"px":null)},m(n,o){R(n,e,o)},p(n,o){o[0]&1024&&d(e,"d",n[10]),o[0]&1&&_e(e,"animate",n[0]),o[0]&262144&&T(e,"--prop-edge-color",n[18]),o[0]&8&&T(e,"--prop-stroke-width",n[3]?n[3]+"px":null)},d(n){n&&B(e)}}}function wo(t){let e,n,o,i,l;const s=t[89].label,r=Ae(s,t,t[88],po),c=r||as(t);return{c(){e=pt("foreignObject"),n=te("span"),c&&c.c(),d(n,"class","label-wrapper svelte-eznx2t"),d(e,"x",o=t[12].x),d(e,"y",i=t[12].y),d(e,"width","100%"),d(e,"height","100%"),d(e,"class","svelte-eznx2t")},m(u,f){R(u,e,f),V(e,n),c&&c.m(n,null),l=!0},p(u,f){r?r.p&&(!l||f[2]&67108864)&&Pe(r,s,u,u[88],l?ve(s,u[88],f,rs):De(u[88]),po):c&&c.p&&(!l||f[0]&560)&&c.p(u,l?f:[-1,-1,-1,-1]),(!l||f[0]&4096&&o!==(o=u[12].x))&&d(e,"x",o),(!l||f[0]&4096&&i!==(i=u[12].y))&&d(e,"y",i)},i(u){l||(p(c,u),l=!0)},o(u){k(c,u),l=!1},d(u){u&&B(e),c&&c.d(u)}}}function as(t){let e,n;return{c(){e=te("div"),n=Kt(t[9]),d(e,"class","default-label svelte-eznx2t"),T(e,"--prop-label-color",t[4]),T(e,"--prop-label-text-color",t[5])},m(o,i){R(o,e,i),V(e,n)},p(o,i){i[0]&512&&$t(n,o[9]),i[0]&16&&T(e,"--prop-label-color",o[4]),i[0]&32&&T(e,"--prop-label-text-color",o[5])},d(o){o&&B(e)}}}function ds(t){let e,n,o=t[21]&&t[22]&&us(t);return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),R(i,e,l),n=!0},p(i,l){i[21]&&i[22]&&o.p(i,l)},i(i){n||(p(o),n=!0)},o(i){k(o),n=!1},d(i){i&&B(e),o&&o.d(i)}}}let Yn;function hs(t){const e=t.parentNode;if(!e)return;e.removeChild(t);const n=document.querySelector(".svelvet-graph-wrapper");n&&n.appendChild(t)}function gs(t,e,n){var eo,to;let o,i,l,s,r,c,u,f,a,g,h,_,b,m,w,S,A,z,I,M,N,j,q,$,ie,G,x,H,W,ne,v,K,L=ee,F=()=>(L(),L=Ve(W,Q=>n(71,K=Q)),W),we,Ce=ee,Me=()=>(Ce(),Ce=Ve(H,Q=>n(72,we=Q)),H),P,me,J,ze,$e,he,Z,ae,ye,ke,Ke,ct,et,O,tt=ee,ot=()=>(tt(),tt=Ve(l,Q=>n(86,O=Q)),l),D,Se=ee,Ue=()=>(Se(),Se=Ve(i,Q=>n(87,D=Q)),i);t.$$.on_destroy.push(()=>L()),t.$$.on_destroy.push(()=>Ce()),t.$$.on_destroy.push(()=>tt()),t.$$.on_destroy.push(()=>Se());let{$$slots:be={},$$scope:it}=e;const ut=$n(be),st=Ne("edgeStore"),mt=Ne("edgeStyle"),rt=Ne("raiseEdgesOnSelect"),St=Ne("edgesAboveNode");let{edge:Je=Ne("edge")}=e,{straight:ft=mt==="straight"}=e,{step:gt=mt==="step"}=e,{animate:Nt=!1}=e,{label:kt=""}=e,{enableHover:Zt=!1}=e,{edgeClick:de=null}=e,{labelPosition:At=.5}=e,{width:It=null}=e,{color:vt=null}=e,{labelColor:zt=null}=e,{textColor:Ot=null}=e,{cornerRadius:at=8}=e,{targetColor:Tt=null}=e;const Oe=Je.source,Re=Je.target,Dt=Oe.direction;X(t,Dt,Q=>n(74,me=Q));const Ct=Re.direction;X(t,Ct,Q=>n(73,P=Q));const Bt=Oe.rotation;X(t,Bt,Q=>n(81,ye=Q));const Rt=Re.rotation;X(t,Rt,Q=>n(80,ae=Q));const Xt=Oe.position;X(t,Xt,Q=>n(85,et=Q));const jt=Re.position;X(t,jt,Q=>n(84,ct=Q));const Vt=Oe.dynamic;X(t,Vt,Q=>n(77,$e=Q));const E=Re.dynamic;X(t,E,Q=>n(76,ze=Q));const Ee=Oe.moving;X(t,Ee,Q=>n(79,Z=Q));const qe=Re.moving;X(t,qe,Q=>n(78,he=Q));const Fe=(eo=Oe.node)==null?void 0:eo.position;X(t,Fe,Q=>n(83,Ke=Q));const Qe=(to=Re.node)==null?void 0:to.position;X(t,Qe,Q=>n(82,ke=Q));const y=Je.type;X(t,y,Q=>n(75,J=Q));const le=Je.id;let ge,fe,Ye={x:0,y:0},lt=!1,Ge=!1,C=!1,Te=!1,_t=!1,Pt;Je.rendered.set(!0),Ft(()=>{setTimeout(()=>{fe&&n(12,Ye=jn(fe,At))},0),hs(Pt)}),Ri(()=>{fe&&n(12,Ye=jn(fe,At))}),Dn(()=>{Pt.remove(),cancelAnimationFrame(Yn)});function Gt(){lt&&(fe&&n(12,Ye=jn(fe,At)),Yn=requestAnimationFrame(Gt))}function zn(){if(Oe.id===null||Re.id===null)return;const Q=st.match(Oe,Re);st.delete(Q[0]),Oe==null||Oe.connected.update(Et=>(Re&&Et.delete(Re),Et)),Re==null||Re.connected.update(Et=>(Oe&&Et.delete(Oe),Et))}const On=()=>n(13,_t=!0),nl=()=>n(13,_t=!1);function ol(Q){qt[Q?"unshift":"push"](()=>{fe=Q,n(11,fe)})}function il(Q){qt[Q?"unshift":"push"](()=>{Pt=Q,n(14,Pt)})}return t.$$set=Q=>{"edge"in Q&&n(37,Je=Q.edge),"straight"in Q&&n(38,ft=Q.straight),"step"in Q&&n(39,gt=Q.step),"animate"in Q&&n(0,Nt=Q.animate),"label"in Q&&n(40,kt=Q.label),"enableHover"in Q&&n(1,Zt=Q.enableHover),"edgeClick"in Q&&n(2,de=Q.edgeClick),"labelPosition"in Q&&n(41,At=Q.labelPosition),"width"in Q&&n(3,It=Q.width),"color"in Q&&n(42,vt=Q.color),"labelColor"in Q&&n(4,zt=Q.labelColor),"textColor"in Q&&n(5,Ot=Q.textColor),"cornerRadius"in Q&&n(43,at=Q.cornerRadius),"targetColor"in Q&&n(6,Tt=Q.targetColor),"$$scope"in Q&&n(88,it=Q.$$scope)},t.$$.update=()=>{var Q;if(t.$$.dirty[2]&49152&&n(53,o=$e||ze),t.$$.dirty[1]&64&&ot(n(19,l=(Q=Je.label)==null?void 0:Q.text)),t.$$.dirty[1]&2048|t.$$.dirty[2]&33554432&&n(18,s=vt||D||null),t.$$.dirty[1]&512|t.$$.dirty[2]&16777216&&n(9,r=kt||O||""),t.$$.dirty[0]&512&&n(8,c=r||ut.label),t.$$.dirty[2]&8388608&&n(70,u=et),t.$$.dirty[2]&4194304&&n(69,f=ct),t.$$.dirty[2]&2097152&&n(54,a=Ke),t.$$.dirty[2]&1048576&&n(55,g=ke),t.$$.dirty[2]&256&&n(50,h=u.x),t.$$.dirty[2]&256&&n(49,_=u.y),t.$$.dirty[2]&128&&n(52,b=f.x),t.$$.dirty[2]&128&&n(51,m=f.y),t.$$.dirty[1]&2621440&&n(68,w=b-h),t.$$.dirty[1]&1310720&&n(67,S=m-_),t.$$.dirty[2]&64&&n(66,A=Math.abs(w)),t.$$.dirty[2]&32&&n(65,z=Math.abs(S)),t.$$.dirty[2]&16&&n(63,I=Math.max(30,Math.min(600,A/2))),t.$$.dirty[2]&8&&n(61,M=Math.max(30,Math.min(600,z/2))),t.$$.dirty[1]&29458432&&o&&Oe.node&&Re.node){const Et=g.x-a.x,Jt=g.y-a.y;n(46,C=Jt>0),n(47,Te=Et>0);let Yt,fn;if(C){const Lt=U(Oe.node.dimensions.height),nt=a.y+Lt;Yt=g.y-nt}else{const Lt=U(Re.node.dimensions.height),nt=g.y+Lt;Yt=a.y-nt}if(Te){const Lt=U(Oe.node.dimensions.width),nt=a.x+Lt;fn=g.x-nt}else{const Lt=U(Re.node.dimensions.width),nt=g.x+Lt;fn=a.x-nt}n(45,Ge=Yt>fn)}if(t.$$.dirty[1]&4308992|t.$$.dirty[2]&49152&&o){let Et,Jt;Ge?(Et=C?"south":"north",Jt=C?"north":"south"):(Et=Te?"east":"west",Jt=Te?"west":"east"),$e&&oe(Dt,me=Et,me),ze&&oe(Ct,P=Jt,P)}if(t.$$.dirty[2]&528384&&n(64,N=mo(dn[me],ye||0)),t.$$.dirty[2]&264192&&n(62,j=mo(dn[P],ae||0)),t.$$.dirty[1]&524288|t.$$.dirty[2]&6&&n(60,q=h+N.x*I),t.$$.dirty[1]&1074003968|t.$$.dirty[2]&4&&n(59,$=_+N.y*M),t.$$.dirty[1]&2097152|t.$$.dirty[2]&3&&n(58,ie=b+j.x*I),t.$$.dirty[1]&1074790400|t.$$.dirty[2]&1&&n(57,G=m+j.y*M),t.$$.dirty[1]&1006632960&&n(56,x=`C ${q}, ${$} ${ie}, ${G}`),t.$$.dirty[1]&37486976|t.$$.dirty[2]&8192&&(!gt||le==="cursor"||J==="bezier")&&n(10,ge=`M ${h}, ${_} ${!ft&&x} ${b}, ${m}`),t.$$.dirty[0]&256|t.$$.dirty[1]&8192|t.$$.dirty[2]&196608&&(c&&!lt&&(Z||he||le==="cursor")?(n(44,lt=!0),Gt()):lt&&!Z&&!he&&le!=="cursor"&&(n(44,lt=!1),cancelAnimationFrame(Yn))),t.$$.dirty[1]&3936512|t.$$.dirty[2]&14336&&gt&&le!=="cursor"&&!(J&&J==="bezier")){const Et={x:h,y:_,direction:dn[me]},Jt={x:b,y:m,direction:dn[P]},Yt=Jl(Et,Jt,Dl),fn=(Lt,nt,an)=>{if(nt<Yt.length-1){const Tn=Yl(Lt,Yt[nt+1]);return Hl(an,Tn)}return""};n(10,ge=Yt.reduce((Lt,nt,an)=>{const Tn=Math.sign(nt.x),ll=Math.sign(nt.y);let no=nt.x,oo=nt.y,io="";if(at){const lo=Yt[an+1]||{x:0,y:0},so=Yt[an-1]||{x:0,y:0},sl=kn(nt.x,lo.x,at),rl=kn(lo.y,nt.y,at),cl=kn(so.x,nt.x,at),ul=kn(so.y,nt.y,at),ro=Math.min(cl,ul),Bn=Math.min(sl,rl);nt.x?no=nt.x-(Bn+ro)*Tn:oo=nt.y-(Bn+ro)*ll,io=fn(nt,an,Bn)}return Kl(Lt,no,oo,io)},`M ${h}, ${_}`))}t.$$.dirty[2]&1536&&n(48,ne=Math.max(we,K)),t.$$.dirty[1]&131072|t.$$.dirty[2]&1536&&n(15,v=St==="all"?1e5:St?ne:rt===!0?ne-1:rt==="source"?we-1:rt==="target"?K-1:0)},Ue(n(20,i=(Oe==null?void 0:Oe.edgeColor)||(Re==null?void 0:Re.edgeColor)||null)),Me(n(17,H=Oe.node.zIndex||0)),F(n(16,W=Re.node.zIndex||0)),[Nt,Zt,de,It,zt,Ot,Tt,zn,c,r,ge,fe,Ye,_t,Pt,v,W,H,s,l,i,Oe,Re,Dt,Ct,Bt,Rt,Xt,jt,Vt,E,Ee,qe,Fe,Qe,y,le,Je,ft,gt,kt,At,vt,at,lt,Ge,C,Te,ne,_,h,m,b,o,a,g,x,G,ie,$,q,M,j,I,N,z,A,S,w,f,u,K,we,P,me,J,ze,$e,he,Z,ae,ye,ke,Ke,ct,et,O,D,it,be,On,nl,ol,il]}class tl extends je{constructor(e){super(),Xe(this,e,gs,ds,Be,{edge:37,straight:38,step:39,animate:0,label:40,enableHover:1,edgeClick:2,labelPosition:41,width:3,color:42,labelColor:4,textColor:5,cornerRadius:43,targetColor:6,destroy:7},null,[-1,-1,-1,-1])}get destroy(){return this.$$.ctx[7]}}function _s(t){let e;return{c(){e=te("div"),d(e,"class","svelvet-anchor svelte-19t6skv"),_e(e,"output",t[0]),_e(e,"input",t[1]),_e(e,"connected",t[3]),_e(e,"connecting",t[2]),_e(e,"hovering",t[4]),T(e,"--prop-anchor-color",t[5])},m(n,o){R(n,e,o)},p(n,[o]){o&1&&_e(e,"output",n[0]),o&2&&_e(e,"input",n[1]),o&8&&_e(e,"connected",n[3]),o&4&&_e(e,"connecting",n[2]),o&16&&_e(e,"hovering",n[4]),o&32&&T(e,"--prop-anchor-color",n[5])},i:ee,o:ee,d(n){n&&B(e)}}}function ms(t,e,n){let{output:o}=e,{input:i}=e,{connecting:l}=e,{connected:s}=e,{hovering:r}=e,{bgColor:c}=e;return t.$$set=u=>{"output"in u&&n(0,o=u.output),"input"in u&&n(1,i=u.input),"connecting"in u&&n(2,l=u.connecting),"connected"in u&&n(3,s=u.connected),"hovering"in u&&n(4,r=u.hovering),"bgColor"in u&&n(5,c=u.bgColor)},[o,i,l,s,r,c]}class bs extends je{constructor(e){super(),Xe(this,e,ms,_s,Be,{output:0,input:1,connecting:2,connected:3,hovering:4,bgColor:5})}}const ps=t=>({}),ko=t=>({});function Co(t){const e=t.slice(),n=e[7].component;return e[84]=n,e}function Hn(t){const e=t.slice(),n=e[14].get("cursor");return e[7]=n,e}function So(t,e,n){const o=t.slice();o[85]=e[n];const i=o[14].fetch(o[23],o[85]);return o[7]=i,o}const ys=t=>({}),No=t=>({});function Kn(t){const e=t.slice(),n=e[7].component;return e[84]=n,e}const ws=t=>({linked:t[0]&512,hovering:t[0]&1024,connecting:t[0]&2048}),Eo=t=>{var e;return{linked:((e=t[9])==null?void 0:e.size)>=1,hovering:t[10],connecting:t[11]}};function Mo(t){var o;let e,n;return e=new bs({props:{output:t[2],input:t[1],connecting:t[11],hovering:t[10],bgColor:t[0],connected:((o=t[9])==null?void 0:o.size)>=1}}),{c(){ue(e.$$.fragment)},m(i,l){re(e,i,l),n=!0},p(i,l){var r;const s={};l[0]&4&&(s.output=i[2]),l[0]&2&&(s.input=i[1]),l[0]&2048&&(s.connecting=i[11]),l[0]&1024&&(s.hovering=i[10]),l[0]&1&&(s.bgColor=i[0]),l[0]&512&&(s.connected=((r=i[9])==null?void 0:r.size)>=1),e.$set(s)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){k(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function ks(t){let e,n,o=!t[5]&&Mo(t);return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),R(i,e,l),n=!0},p(i,l){i[5]?o&&(Le(),k(o,1,1,()=>{o=null}),Ie()):o?(o.p(i,l),l[0]&32&&p(o,1)):(o=Mo(i),o.c(),p(o,1),o.m(e.parentNode,e))},i(i){n||(p(o),n=!0)},o(i){k(o),n=!1},d(i){i&&B(e),o&&o.d(i)}}}function Ao(t){let e,n;return e=new el({props:{edge:t[7],$$slots:{default:[Es]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p(o,i){const l={};i[0]&512&&(l.edge=o[7]),i[0]&512|i[1]&4194304&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Cs(t){let e,n;return e=new tl({}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Ss(t){let e,n;return e=new t[84]({}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Ns(t){let e,n,o,i;const l=[Ss,Cs],s=[];function r(c,u){return c[84]?0:1}return e=r(t),n=s[e]=l[e](t),{c(){n.c(),o=He()},m(c,u){s[e].m(c,u),R(c,o,u),i=!0},p(c,u){let f=e;e=r(c),e!==f&&(Le(),k(s[f],1,1,()=>{s[f]=null}),Ie(),n=s[e],n||(n=s[e]=l[e](c),n.c()),p(n,1),n.m(o.parentNode,o))},i(c){i||(p(n),i=!0)},o(c){k(n),i=!1},d(c){c&&B(o),s[e].d(c)}}}function Es(t){let e;const n=t[49].edge,o=Ae(n,t,t[53],No),i=o||Ns(t);return{c(){i&&i.c()},m(l,s){i&&i.m(l,s),e=!0},p(l,s){o?o.p&&(!e||s[1]&4194304)&&Pe(o,n,l,l[53],e?ve(n,l[53],s,ys):De(l[53]),No):i&&i.p&&(!e||s[0]&512)&&i.p(l,e?s:[-1,-1,-1])},i(l){e||(p(i,l),e=!0)},o(l){k(i,l),e=!1},d(l){i&&i.d(l)}}}function vo(t,e){let n,o,i,l=e[7]&&e[7].source===e[23]&&Ao(Kn(e));return{key:t,first:null,c(){n=He(),l&&l.c(),o=He(),this.first=n},m(s,r){R(s,n,r),l&&l.m(s,r),R(s,o,r),i=!0},p(s,r){e=s,e[7]&&e[7].source===e[23]?l?(l.p(Kn(e),r),r[0]&512&&p(l,1)):(l=Ao(Kn(e)),l.c(),p(l,1),l.m(o.parentNode,o)):l&&(Le(),k(l,1,1,()=>{l=null}),Ie())},i(s){i||(p(l),i=!0)},o(s){k(l),i=!1},d(s){s&&(B(n),B(o)),l&&l.d(s)}}}function Po(t){let e,n,o=t[7]&&Ms(Co(t));return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),R(i,e,l),n=!0},p(i,l){i[7]&&o.p(Co(i),l)},i(i){n||(p(o),n=!0)},o(i){k(o),n=!1},d(i){i&&B(e),o&&o.d(i)}}}function Ms(t){let e,n;return e=new el({props:{edge:t[7],$$slots:{default:[Ds]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p(o,i){const l={};i[1]&4194304&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function As(t){let e,n;return e=new tl({}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function vs(t){let e,n;return e=new t[84]({}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Ps(t){let e,n,o,i;const l=[vs,As],s=[];function r(c,u){return c[84]?0:1}return e=r(t),n=s[e]=l[e](t),{c(){n.c(),o=He()},m(c,u){s[e].m(c,u),R(c,o,u),i=!0},p:ee,i(c){i||(p(n),i=!0)},o(c){k(n),i=!1},d(c){c&&B(o),s[e].d(c)}}}function Ds(t){let e;const n=t[49].edge,o=Ae(n,t,t[53],ko),i=o||Ps(t);return{c(){i&&i.c()},m(l,s){i&&i.m(l,s),e=!0},p(l,s){o&&o.p&&(!e||s[1]&4194304)&&Pe(o,n,l,l[53],e?ve(n,l[53],s,ps):De(l[53]),ko)},i(l){e||(p(i,l),e=!0)},o(l){k(i,l),e=!1},d(l){i&&i.d(l)}}}function Ls(t){let e,n,o,i=[],l=new Map,s,r,c,u,f;const a=t[49].default,g=Ae(a,t,t[53],Eo),h=g||ks(t);let _=yt(Array.from(t[9]));const b=w=>w[85].id;for(let w=0;w<_.length;w+=1){let S=So(t,_,w),A=b(S);l.set(A,i[w]=vo(A,S))}let m=t[11]&&Po(Hn(t));return{c(){var w;e=te("div"),h&&h.c(),o=se();for(let S=0;S<i.length;S+=1)i[S].c();s=se(),m&&m.c(),r=He(),d(e,"id",(w=t[23])==null?void 0:w.id),d(e,"class","anchor-wrapper svelte-bazd6o"),d(e,"role","button"),d(e,"tabindex","0"),d(e,"title",n=t[6]||""),_e(e,"locked",t[4])},m(w,S){R(w,e,S),h&&h.m(e,null),t[52](e),R(w,o,S);for(let A=0;A<i.length;A+=1)i[A]&&i[A].m(w,S);R(w,s,S),m&&m.m(w,S),R(w,r,S),c=!0,u||(f=[pe(e,"mouseenter",t[50]),pe(e,"mouseleave",t[51]),pe(e,"mousedown",bt(Mt(t[25]))),pe(e,"mouseup",bt(t[24])),pe(e,"touchstart",bt(Mt(t[25]))),pe(e,"touchend",bt(t[24]))],u=!0)},p(w,S){g?g.p&&(!c||S[0]&3584|S[1]&4194304)&&Pe(g,a,w,w[53],c?ve(a,w[53],S,ws):De(w[53]),Eo):h&&h.p&&(!c||S[0]&3623)&&h.p(w,c?S:[-1,-1,-1]),(!c||S[0]&64&&n!==(n=w[6]||""))&&d(e,"title",n),(!c||S[0]&16)&&_e(e,"locked",w[4]),S[0]&8405504|S[1]&4194304&&(_=yt(Array.from(w[9])),Le(),i=An(i,S,b,1,w,_,l,s.parentNode,Mn,vo,s,So),Ie()),w[11]?m?(m.p(Hn(w),S),S[0]&2048&&p(m,1)):(m=Po(Hn(w)),m.c(),p(m,1),m.m(r.parentNode,r)):m&&(Le(),k(m,1,1,()=>{m=null}),Ie())},i(w){if(!c){p(h,w);for(let S=0;S<_.length;S+=1)p(i[S]);p(m),c=!0}},o(w){k(h,w);for(let S=0;S<i.length;S+=1)k(i[S]);k(m),c=!1},d(w){w&&(B(e),B(o),B(s),B(r)),h&&h.d(w),t[52](null);for(let S=0;S<i.length;S+=1)i[S].d(w);m&&m.d(w),u=!1,ht(f)}}}let qn;const Wt=Y(null);function Is(t,e,n){if(e==="self")return;const o=t.parentNode;if(!o)return;o.removeChild(t);const i=document.querySelector(`#anchors-${e}-${n.id}`);i&&(i.appendChild(t),t&&n.recalculateAnchors())}function zs(t,e,n){let o,i,l,s,r=ee,c=()=>(r(),r=Ve(he,y=>n(54,s=y)),he),u,f=ee,a,g,h=ee,_=()=>(h(),h=Ve(i,y=>n(9,g=y)),i),b,m,w,S,A=ee,z=()=>(A(),A=Ve(l,y=>n(46,S=y)),l),I,M,N,j;X(t,Wt,y=>n(41,u=y)),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>A());let{$$slots:q={},$$scope:$}=e;const ie=Ne("dynamic"),G=Ne("node"),x=Ne("edgeStore"),H=Ne("cursorAnchor"),W=Ne("direction"),ne=Ne("mounted");X(t,ne,y=>n(48,M=y));const v=Ne("graph"),K=Ne("nodeStore"),L=Ne("graphEdge"),F=Ne("nodeConnectEvent");X(t,F,y=>n(42,a=y));const we=Ne("anchorsMounted");X(t,we,y=>n(55,N=y));let{bgColor:Ce=null}=e,{id:Me=0}=e,{input:P=!1}=e,{output:me=!1}=e,{multiple:J=me?!0:!P}=e,{dynamic:ze=ie||!1}=e,{edge:$e=null}=e,{inputsStore:he=null}=e;c();let{key:Z=null}=e,{outputStore:ae=null}=e,{connections:ye=[]}=e,{edgeColor:ke=Y(null)}=e,{edgeLabel:Ke=""}=e,{locked:ct=!1}=e,{nodeConnect:et=!1}=e,{edgeStyle:O=null}=e,{invisible:tt=!1}=e,{direction:ot=W==="TD"?P?"north":"south":P?"west":"east"}=e,{title:D=""}=e;const Se=cn(),Ue=cn();let be,it=!1,ut=!1,st=0,mt=P===me?null:P?"input":"output",rt=[];const St=G.edge,Je=G.anchors;X(t,Je,y=>n(47,I=y));const ft=G.resizingWidth;X(t,ft,y=>n(45,w=y));const gt=G.resizingHeight;X(t,gt,y=>n(44,m=y));const Nt=G.rotating;X(t,Nt,y=>n(43,b=y));const kt=G.connections;X(t,kt,y=>n(56,j=y));const Zt=`A-${Me||Je.count()+1}/${G.id}`,de=$i(v,G,Zt,{x:0,y:0},{width:0,height:0},he||ae||null,$e||St||L||null,mt,ot,ze,Z,ke);Je.add(de,de.id),Ft(()=>{be&&de.recalculatePosition();const y=Array.from(U(G.anchors)).reduce((le,[,ge])=>(ge.type==="output"&&le++,le),0);if(j!=null&&j.length&&!P){const le=[];let ge=null;j.forEach((fe,Ye)=>{fe&&(ge===null&&(ge=Ye),(Ye-ge)%y===0?(rt.push(fe),le.push(null)):le.push(fe))}),oe(kt,j=le,j)}oe(we,N++,N)}),Ri(()=>{be&&de.recalculatePosition()}),Dn(()=>{Rt(),cancelAnimationFrame(qn)});function At(y){var C;x.delete("cursor");const le={x:y.changedTouches[0].clientX,y:y.changedTouches[0].clientY},ge=document.elementFromPoint(le.x,le.y);if(!ge)return;const fe=ge.parentElement;if(!fe)return;const Ye=fe.id,lt=Ye.split("/")[1],Ge=(C=K.get(lt))==null?void 0:C.anchors.get(Ye);Ge&&(x.delete("cursor"),It(de,Ge,y))}function It(y,le,ge){const fe=Oe(y,le);fe&&Re(),ge.shiftKey||Ct(fe)}function vt(y){if("changedTouches"in y&&o){At(y);return}if(!o){if(g!=null&&g.size&&!J){x.delete("cursor"),y.shiftKey||Ct(!1);return}u&&Tt(y)}}function zt(y){if(!ct){if(g!=null&&g.size&&!J&&!u)return Xt();if(!u)return Ot();Tt(y)}}function Ot(){P===me?(oe(Wt,u={anchor:de,store:null,key:null},u),at(de,H)):P?(oe(Wt,u={anchor:de,store:he,key:Z},u),at(H,de)):me&&(oe(Wt,u={anchor:de,store:ae,key:null},u),at(de,H))}function at(y,le,ge=!1){const fe={color:ke,label:{text:Ke}};ge&&(fe.disconnect=!0),O&&(fe.type=O);const Ye=ao({source:y,target:le},(y==null?void 0:y.edge)||null,fe);x.add(Ye,"cursor")}function Tt(y){if(x.delete("cursor"),!u)return;const le=u.anchor.type;if(u.anchor===de||le===de.type&&le){Ct(!1);return}de.recalculatePosition();let ge,fe;P===me?le==="input"?(ge=de,fe=u.anchor):(ge=u.anchor,fe=de):P?(ge=u.anchor,fe=de):(ge=de,fe=u.anchor),It(ge,fe,y)}function Oe(y,le){if(y===le||U(y.connected).has(de))return!1;const ge={color:ke,label:{text:Ke}};O&&(ge.type=O);const fe=ao({source:y,target:le},(y==null?void 0:y.edge)||null,ge);return!y.node||!le.node?!1:(x.add(fe,new Set([y,le,y.node,le.node])),!0)}function Re(){if(P&&u&&u.store)s&&Z&&he&&typeof he.set=="function"&&typeof he.update=="function"&&oe(he,s[Z]=u.store,s);else if(me&&u&&u.store){const{store:y,key:le}=u;y&&le&&typeof y.update=="function"&&y.update(ge=>(ae&&(ge[le]=ae),ge))}}function Dt(){s&&Z&&s[Z]&&oe(he,s[Z]=Y(U(s[Z])),s)}function Ct(y){(y||!a)&&(oe(Wt,u=null,u),oe(F,a=null,a))}function Bt(){it&&(be&&de.recalculatePosition(),qn=requestAnimationFrame(Bt))}function Rt(){x.delete("cursor"),x.match(de).forEach(le=>x.delete(le)),Ct(!1),Dt()}function Xt(){if(U(de.connected).size>1)return;const y=Array.from(U(de.connected))[0];if(y.type!=="input")if(Rt(),y.type==="output"){at(y,H,!0),Dt();const le=y.store;oe(Wt,u={anchor:y,store:le,key:null},u)}else at(y,H,!0),oe(Wt,u={anchor:y,store:null,key:null},u)}function jt(){rt.forEach((y,le)=>{if(!y)return;Ee(y)&&n(26,ye[le]=null,ye)}),n(40,rt=rt.filter(y=>y!==null))}function Vt(){ye.forEach(y=>{y&&Ee(y)})}function E(y){const le=`N-${y[0]}`,ge=K.get(le);if(!ge)return;const fe=ge.anchors.get(`A-${y[1]}/N-${y[0]}`);if(!fe)return;const Ye=x.match(de,fe);Ye&&x.delete(Ye[0])}const Ee=y=>{let le,ge,fe=null;Array.isArray(y)?(le=y[0].toString(),ge=y[1].toString()):(le=y.toString(),ge=null);const Ye=`N-${le}`,lt=K.get(Ye);if(!lt)return!1;if(ge){const Ge=`A-${ge}/${Ye}`;fe=lt.anchors.get(Ge)||null}else{const Ge=U(lt.anchors),C=Array.from(Ge.values());if(!C.length)return!1;fe=C.reduce((Te,_t)=>!Te&&_t.type==="output"?null:_t.type==="output"?Te:!Te||U(_t.connected).size<U(Te.connected).size?_t:Te,null)}if(!fe)return!1;if(Oe(de,fe),fe.store&&(he||ae)){if(P&&fe.type==="output")s&&Z&&he&&typeof he.set=="function"&&typeof he.update=="function"&&oe(he,s[Z]=fe.store,s);else if(me&&fe.type==="input"){const{store:Ge,inputKey:C}=fe;Ge&&C&&typeof Ge.update=="function"&&Ge.update(Te=>(ae&&(Te[C]=ae),Te))}}return!0},qe=()=>n(10,ut=!0),Fe=()=>n(10,ut=!1);function Qe(y){qt[y?"unshift":"push"](()=>{be=y,n(8,be)})}return t.$$set=y=>{"bgColor"in y&&n(0,Ce=y.bgColor),"id"in y&&n(27,Me=y.id),"input"in y&&n(1,P=y.input),"output"in y&&n(2,me=y.output),"multiple"in y&&n(28,J=y.multiple),"dynamic"in y&&n(29,ze=y.dynamic),"edge"in y&&n(7,$e=y.edge),"inputsStore"in y&&c(n(3,he=y.inputsStore)),"key"in y&&n(30,Z=y.key),"outputStore"in y&&n(31,ae=y.outputStore),"connections"in y&&n(26,ye=y.connections),"edgeColor"in y&&n(32,ke=y.edgeColor),"edgeLabel"in y&&n(33,Ke=y.edgeLabel),"locked"in y&&n(4,ct=y.locked),"nodeConnect"in y&&n(34,et=y.nodeConnect),"edgeStyle"in y&&n(35,O=y.edgeStyle),"invisible"in y&&n(5,tt=y.invisible),"direction"in y&&n(36,ot=y.direction),"title"in y&&n(6,D=y.title),"$$scope"in y&&n(53,$=y.$$scope)},t.$$.update=()=>{if(t.$$.dirty[1]&1024&&n(11,o=(u==null?void 0:u.anchor)===de),t.$$.dirty[0]&536871168|t.$$.dirty[1]&32768&&ze&&be&&Is(be,S,G),t.$$.dirty[0]&67108864|t.$$.dirty[1]&131072&&M===K.count()&&ye.length&&Vt(),t.$$.dirty[1]&2056&&et&&a&&vt(a),t.$$.dirty[1]&131584&&M===K.count()&&rt.length&&jt(),t.$$.dirty[0]&768|t.$$.dirty[1]&98304&&be&&de.recalculatePosition(),t.$$.dirty[1]&28800&&(!it&&(w||m||b)?(n(38,it=!0),Bt()):!w&&!m&&it&&!b&&(n(38,it=!1),cancelAnimationFrame(qn))),t.$$.dirty[0]&512|t.$$.dirty[1]&256&&g){if(g.size<st)Ue("disconnection",{node:G,anchor:de});else if(g.size>st){const y=Array.from(g),le=y[y.length-1];Se("connection",{node:G,anchor:de,connectedNode:le.node,connectedAnchor:le})}n(39,st=g.size)}},_(n(13,i=de&&de.connected)),z(n(12,l=de==null?void 0:de.direction)),[Ce,P,me,he,ct,tt,D,$e,be,g,ut,o,l,i,x,ne,F,we,Je,ft,gt,Nt,kt,de,vt,zt,ye,Me,J,ze,Z,ae,ke,Ke,et,O,ot,E,it,st,rt,u,a,b,m,w,S,I,M,q,qe,Fe,Qe,$]}class In extends je{constructor(e){super(),Xe(this,e,zs,Ls,Be,{bgColor:0,id:27,input:1,output:2,multiple:28,dynamic:29,edge:7,inputsStore:3,key:30,outputStore:31,connections:26,edgeColor:32,edgeLabel:33,locked:4,nodeConnect:34,edgeStyle:35,invisible:5,direction:36,title:6,disconnect:37},null,[-1,-1,-1])}get disconnect(){return this.$$.ctx[37]}}function Do(t){let e,n,o,i,l;return{c(){e=te("div"),n=se(),o=te("div"),d(e,"class","left svelte-1ryxg7v"),_e(e,"width",t[0]),d(o,"class","right svelte-1ryxg7v"),_e(o,"width",t[0])},m(s,r){R(s,e,r),R(s,n,r),R(s,o,r),i||(l=[Ht(t[16].call(null,e,{left:t[3]})),Ht(t[16].call(null,o,{right:t[4]}))],i=!0)},p(s,r){r[0]&1&&_e(e,"width",s[0]),r[0]&1&&_e(o,"width",s[0])},d(s){s&&(B(e),B(n),B(o)),i=!1,ht(l)}}}function Lo(t){let e,n,o,i,l;return{c(){e=te("div"),n=se(),o=te("div"),d(e,"class","top svelte-1ryxg7v"),_e(e,"height",t[1]),d(o,"class","bottom svelte-1ryxg7v"),_e(o,"height",t[1])},m(s,r){R(s,e,r),R(s,n,r),R(s,o,r),i||(l=[Ht(t[16].call(null,e,{top:t[5]})),Ht(t[16].call(null,o,{bottom:t[6]}))],i=!0)},p(s,r){r[0]&2&&_e(e,"height",s[1]),r[0]&2&&_e(o,"height",s[1])},d(s){s&&(B(e),B(n),B(o)),i=!1,ht(l)}}}function Os(t){let e,n,o;return{c(){e=te("div"),d(e,"class","svelte-1ryxg7v"),_e(e,"both",t[7])},m(i,l){R(i,e,l),n||(o=Ht(t[16].call(null,e,{both:t[7]})),n=!0)},p:ee,d(i){i&&B(e),n=!1,o()}}}function Io(t){let e,n,o;return{c(){e=te("div"),d(e,"class","svelte-1ryxg7v"),_e(e,"rotation",t[2])},m(i,l){R(i,e,l),n||(o=Ht(t[17].call(null,e)),n=!0)},p(i,l){l[0]&4&&_e(e,"rotation",i[2])},d(i){i&&B(e),n=!1,o()}}}function Ts(t){let e,n,o,i,l=t[0]&&Do(t),s=t[1]&&Lo(t),r=t[7]&&Os(t),c=t[2]&&Io(t);return{c(){l&&l.c(),e=se(),s&&s.c(),n=se(),r&&r.c(),o=se(),c&&c.c(),i=He()},m(u,f){l&&l.m(u,f),R(u,e,f),s&&s.m(u,f),R(u,n,f),r&&r.m(u,f),R(u,o,f),c&&c.m(u,f),R(u,i,f)},p(u,f){u[0]?l?l.p(u,f):(l=Do(u),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),u[1]?s?s.p(u,f):(s=Lo(u),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),u[7]&&r.p(u,f),u[2]?c?c.p(u,f):(c=Io(u),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i:ee,o:ee,d(u){u&&(B(e),B(n),B(o),B(i)),l&&l.d(u),s&&s.d(u),r&&r.d(u),c&&c.d(u)}}}function Bs(t){return t*(180/Math.PI)}function Rs(t,e,n){let o,i,l,s,r,c,u,f,a,g,h,_;X(t,dt,Z=>n(38,u=Z));const b=Ne("graph"),m=Ne("node"),w=Ne("resized");let{width:S=!1}=e,{height:A=!1}=e,{rotation:z=!1}=e,{minHeight:I=0}=e,{minWidth:M=0}=e,N,j=S,q=S,$=A,ie=A,G=S&&A,x=0,H=0,W=U(m.position);const ne=m.position;X(t,ne,Z=>n(32,h=Z));const v=m.resizingWidth;X(t,v,Z=>n(31,g=Z));const K=m.resizingHeight;X(t,K,Z=>n(30,a=Z));const L=m.rotating;X(t,L,Z=>n(28,c=Z));const F=m.rotation;X(t,F,Z=>n(29,f=Z));const we=m.dimensions.height;X(t,we,Z=>n(26,s=Z));const Ce=m.dimensions.width;X(t,Ce,Z=>n(27,r=Z));const Me=b.cursor;X(t,Me,Z=>n(33,_=Z));let P,me,J=1;Ft(()=>{try{N=document.querySelector(`#${m.id}`),N&&n(19,[M,I]=Xn(N),M,n(18,I))}catch(Z){console.error(Z)}});function ze(Z,ae){const ye=Ke=>{Ke.stopPropagation(),Ke.preventDefault(),ae.left||ae.top?n(23,J=-1):n(23,J=1),Un.set(!0),oe(dt,u=U(Me),u),n(21,P=r),n(22,me=s),n(20,W=h),ae.both?oe(v,g=!0,g):oe(v,g=!1,g),oe(v,g=ae.left||ae.right||ae.both||!1,g),oe(K,a=ae.top||ae.bottom||ae.both||!1,a),N&&n(19,[M,I]=Xn(N),M,n(18,I)),window.addEventListener("mouseup",ke)},ke=()=>{oe(v,g=!1,g),oe(K,a=!1,a),Un.set(!1),window.removeEventListener("mouseup",ke)};return Z.addEventListener("mousedown",ye),{destroy(){Z.removeEventListener("mousedown",ye)}}}function $e(Z){const ae=ke=>{ke.stopPropagation(),ke.preventDefault(),x=f,oe(dt,u=U(Me),u);const Ke=u.x-l.x,ct=u.y-l.y;H=Math.atan2(ct,Ke),oe(L,c=!0,c),window.addEventListener("mouseup",ye)},ye=()=>{oe(L,c=!1,c),window.removeEventListener("mouseup",ye)};return Z.addEventListener("mousedown",ae),{destroy(){Z.removeEventListener("mousedown",ae)}}}function he(){const Z=U(Me),ae=Z.x-l.x,ye=Z.y-l.y,ke=Math.atan2(ye,ae),Ke=H-ke;return x-Bs(Ke)}return ml(()=>{N&&n(19,[M,I]=Xn(N),M,n(18,I)),r<M&&w.set(!1),s<I&&w.set(!1)}),t.$$set=Z=>{"width"in Z&&n(0,S=Z.width),"height"in Z&&n(1,A=Z.height),"rotation"in Z&&n(2,z=Z.rotation),"minHeight"in Z&&n(18,I=Z.minHeight),"minWidth"in Z&&n(19,M=Z.minWidth)},t.$$.update=()=>{if(t.$$.dirty[0]&268435456|t.$$.dirty[1]&4&&c&&oe(F,f=he(),f),t.$$.dirty[0]&1624506368|t.$$.dirty[1]&4&&a){const Z=U(dt),ae=_,ye=Math.max(I,me+(ae.y-Z.y)*J);ye>I?(w.set(!0),oe(we,s=ye,s)):w.set(!1),J===-1&&oe(ne,h={x:W.x,y:W.y+ae.y-Z.y},h),f!==0&&m.position.update(ke=>({y:W.y-(ye-me)/2,x:ke.x}))}if(t.$$.dirty[0]&548929536|t.$$.dirty[1]&5&&g){const Z=U(dt),ae=_,ye=Math.max(M,P+(ae.x-Z.x)*J);ye>M?(w.set(!0),oe(Ce,r=ye,r)):w.set(!1),J===-1&&oe(ne,h={x:W.x+ae.x-Z.x,y:W.y},h),f!==0&&m.position.update(ke=>({x:W.x-(ye-P)/2,y:ke.y}))}t.$$.dirty[1]&2&&n(25,o=h.x),t.$$.dirty[1]&2&&n(24,i=h.y),t.$$.dirty[0]&251658240&&(l={x:o+r/2,y:i+s/2})},[S,A,z,j,q,$,ie,G,ne,v,K,L,F,we,Ce,Me,ze,$e,I,M,W,P,me,J,i,o,s,r,c,f,a,g,h,_]}class Ws extends je{constructor(e){super(),Xe(this,e,Rs,Ts,Be,{width:0,height:1,rotation:2,minHeight:18,minWidth:19},null,[-1,-1])}}function zo(t,e,n){const o=t.slice();return o[28]=e[n],o[34]=n,o}function Oo(t,e,n){const o=t.slice();return o[28]=e[n],o[34]=n,o}function To(t,e,n){const o=t.slice();return o[28]=e[n],o}function Bo(t,e,n){const o=t.slice();return o[28]=e[n],o}function Xs(t){let e,n=[],o=new Map,i,l,s=[],r=new Map,c,u=yt({length:t[2]});const f=h=>h[34];for(let h=0;h<u.length;h+=1){let _=Oo(t,u,h),b=f(_);o.set(b,n[h]=Ro(b,_))}let a=yt({length:t[3]});const g=h=>h[34];for(let h=0;h<a.length;h+=1){let _=zo(t,a,h),b=g(_);r.set(b,s[h]=Wo(b,_))}return{c(){e=te("div");for(let h=0;h<n.length;h+=1)n[h].c();i=se(),l=te("div");for(let h=0;h<s.length;h+=1)s[h].c();d(e,"class","input-anchors svelte-j5bq7k"),_e(e,"top",t[14]),_e(e,"left",t[16]),d(l,"class","output-anchors svelte-j5bq7k"),_e(l,"bottom",t[15]),_e(l,"right",t[17])},m(h,_){R(h,e,_);for(let b=0;b<n.length;b+=1)n[b]&&n[b].m(e,null);R(h,i,_),R(h,l,_);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(l,null);c=!0},p(h,_){_[0]&16388&&(u=yt({length:h[2]}),Le(),n=An(n,_,f,1,h,u,o,e,Mn,Ro,null,Oo),Ie()),_[0]&16392&&(a=yt({length:h[3]}),Le(),s=An(s,_,g,1,h,a,r,l,Mn,Wo,null,zo),Ie())},i(h){if(!c){for(let _=0;_<u.length;_+=1)p(n[_]);for(let _=0;_<a.length;_+=1)p(s[_]);c=!0}},o(h){for(let _=0;_<n.length;_+=1)k(n[_]);for(let _=0;_<s.length;_+=1)k(s[_]);c=!1},d(h){h&&(B(e),B(i),B(l));for(let _=0;_<n.length;_+=1)n[_].d();for(let _=0;_<s.length;_+=1)s[_].d()}}}function js(t){let e,n,o,i=yt({length:t[2]}),l=[];for(let f=0;f<i.length;f+=1)l[f]=Xo(Bo(t,i,f));const s=f=>k(l[f],1,1,()=>{l[f]=null});let r=yt({length:t[3]}),c=[];for(let f=0;f<r.length;f+=1)c[f]=jo(To(t,r,f));const u=f=>k(c[f],1,1,()=>{c[f]=null});return{c(){for(let f=0;f<l.length;f+=1)l[f].c();e=se();for(let f=0;f<c.length;f+=1)c[f].c();n=He()},m(f,a){for(let g=0;g<l.length;g+=1)l[g]&&l[g].m(f,a);R(f,e,a);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(f,a);R(f,n,a),o=!0},p(f,a){if(a[0]&4){const g=i.length;i=yt({length:f[2]});let h;for(h=g;h<i.length;h+=1){const _=Bo(f,i,h);l[h]?p(l[h],1):(l[h]=Xo(_),l[h].c(),p(l[h],1),l[h].m(e.parentNode,e))}for(Le(),h=i.length;h<l.length;h+=1)s(h);Ie()}if(a[0]&8){const g=r.length;r=yt({length:f[3]});let h;for(h=g;h<r.length;h+=1){const _=To(f,r,h);c[h]?p(c[h],1):(c[h]=jo(_),c[h].c(),p(c[h],1),c[h].m(n.parentNode,n))}for(Le(),h=r.length;h<c.length;h+=1)u(h);Ie()}},i(f){if(!o){for(let a=0;a<i.length;a+=1)p(l[a]);for(let a=0;a<r.length;a+=1)p(c[a]);o=!0}},o(f){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)k(l[a]);c=c.filter(Boolean);for(let a=0;a<c.length;a+=1)k(c[a]);o=!1},d(f){f&&(B(e),B(n)),En(l,f),En(c,f)}}}function Ro(t,e){let n,o,i;return o=new In({props:{input:!0,direction:e[14]?"north":"west"}}),o.$on("connection",e[22]),o.$on("disconnection",e[23]),{key:t,first:null,c(){n=He(),ue(o.$$.fragment),this.first=n},m(l,s){R(l,n,s),re(o,l,s),i=!0},p(l,s){e=l},i(l){i||(p(o.$$.fragment,l),i=!0)},o(l){k(o.$$.fragment,l),i=!1},d(l){l&&B(n),ce(o,l)}}}function Wo(t,e){let n,o,i;return o=new In({props:{output:!0,direction:e[14]?"south":"east"}}),o.$on("connection",e[24]),o.$on("disconnection",e[25]),{key:t,first:null,c(){n=He(),ue(o.$$.fragment),this.first=n},m(l,s){R(l,n,s),re(o,l,s),i=!0},p(l,s){e=l},i(l){i||(p(o.$$.fragment,l),i=!0)},o(l){k(o.$$.fragment,l),i=!1},d(l){l&&B(n),ce(o,l)}}}function Xo(t){let e,n;return e=new In({}),e.$on("connection",t[18]),e.$on("disconnection",t[19]),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function jo(t){let e,n;return e=new In({}),e.$on("connection",t[20]),e.$on("disconnection",t[21]),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Go(t){let e,n;return e=new Ws({props:{width:!0,height:!0,rotation:!0}}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Gs(t){let e,n,o,i,l,s,r,c=`${t[1]}px`,u;const f=[js,Xs],a=[];function g(_,b){return _[7]?0:1}n=g(t),o=a[n]=f[n](t);let h=t[6]&&Go();return{c(){e=te("div"),o.c(),i=se(),l=te("p"),s=Kt(t[5]),r=se(),h&&h.c(),d(l,"class","svelte-j5bq7k"),T(l,"color",t[4]),d(e,"class","default-node svelte-j5bq7k"),_e(e,"selected",t[0]),T(e,"border-radius",c)},m(_,b){R(_,e,b),a[n].m(e,null),V(e,i),V(e,l),V(l,s),V(e,r),h&&h.m(e,null),u=!0},p(_,b){o.p(_,b),(!u||b[0]&32)&&$t(s,_[5]),b[0]&16&&T(l,"color",_[4]),_[6]?h?b[0]&64&&p(h,1):(h=Go(),h.c(),p(h,1),h.m(e,null)):h&&(Le(),k(h,1,1,()=>{h=null}),Ie()),(!u||b[0]&1)&&_e(e,"selected",_[0]),b[0]&2&&c!==(c=`${_[1]}px`)&&T(e,"border-radius",c)},i(_){u||(p(o),p(h),u=!0)},o(_){k(o),k(h),u=!1},d(_){_&&B(e),a[n].d(),h&&h.d()}}}function Ys(t,e,n){let o,i,l,s,r,c;const u=Ne("dynamic"),f=Ne("node");let{selected:a}=e;const g=f.label;X(t,g,W=>n(5,r=W));const h=f.borderRadius;X(t,h,W=>n(1,o=W));const _=f.textColor;X(t,_,W=>n(4,s=W));const b=f.inputs;X(t,b,W=>n(2,i=W));const m=f.outputs;X(t,m,W=>n(3,l=W));const w=f.resizable;X(t,w,W=>n(6,c=W));const S=U(f.direction);let A=S==="TD",z=S==="TD",I=S!=="TD",M=S!=="TD";function N(W){xe.call(this,t,W)}function j(W){xe.call(this,t,W)}function q(W){xe.call(this,t,W)}function $(W){xe.call(this,t,W)}function ie(W){xe.call(this,t,W)}function G(W){xe.call(this,t,W)}function x(W){xe.call(this,t,W)}function H(W){xe.call(this,t,W)}return t.$$set=W=>{"selected"in W&&n(0,a=W.selected)},[a,o,i,l,s,r,c,u,g,h,_,b,m,w,A,z,I,M,N,j,q,$,ie,G,x,H]}class Hs extends je{constructor(e){super(),Xe(this,e,Ys,Gs,Be,{selected:0},null,[-1,-1])}}const Ks=t=>({}),Yo=t=>({}),qs=t=>({}),Ho=t=>({}),Fs=t=>({}),Ko=t=>({}),Zs=t=>({}),qo=t=>({}),Vs=t=>({selected:t[0]&2048}),Fo=t=>({grabHandle:t[50],selected:t[11],destroy:t[48]}),Us=t=>({selected:t[0]&2048}),Zo=t=>({grabHandle:t[50],selected:t[11],destroy:t[48]});function Vo(t){let e,n,o,i,l,s,r,c,u,f,a,g,h,_,b,m=`${t[14].y}px`,w=`${t[14].x}px`,S=`rotate(${t[20]}deg)`,A,z,I;const M=[Qs,Js],N=[];function j(v,K){return v[12]?1:0}n=j(t),o=N[n]=M[n](t);const q=t[61].anchorWest,$=Ae(q,t,t[60],qo),ie=t[61].anchorEast,G=Ae(ie,t,t[60],Ko),x=t[61].anchorNorth,H=Ae(x,t,t[60],Ho),W=t[61].anchorSouth,ne=Ae(W,t,t[60],Yo);return{c(){e=te("div"),o.c(),i=se(),l=te("div"),$&&$.c(),r=se(),c=te("div"),G&&G.c(),f=se(),a=te("div"),H&&H.c(),h=se(),_=te("div"),ne&&ne.c(),d(l,"id",s=`anchors-west-${t[0].id}`),d(l,"class","anchors left svelte-1iknrz0"),d(c,"id",u=`anchors-east-${t[0].id}`),d(c,"class","anchors right svelte-1iknrz0"),d(a,"id",g=`anchors-north-${t[0].id}`),d(a,"class","anchors top svelte-1iknrz0"),d(_,"id",b=`anchors-south-${t[0].id}`),d(_,"class","anchors bottom svelte-1iknrz0"),d(e,"id",t[30]),d(e,"class","svelvet-node svelte-1iknrz0"),d(e,"role","button"),d(e,"title",t[10]),d(e,"tabindex",0),_e(e,"selected",t[11]),_e(e,"locked",t[16]||t[15]),T(e,"top",m),T(e,"left",w),T(e,"z-index",t[17]),T(e,"width",t[12]?t[19]+"px":"fit-content"),T(e,"height",t[12]?t[18]+"px":"fit-content"),T(e,"transform",S),T(e,"--prop-background-color",t[21]||(t[1]||t[2]?null:"transparent")),T(e,"--prop-text-color",t[22]),T(e,"--prop-border-color",t[23]),T(e,"--prop-selection-color",t[24]),T(e,"--prop-border-radius",t[25]?`${t[25]}px`:t[1]||t[2]?null:"0px"),T(e,"--prop-border-width",t[26]||(t[1]||t[2]?null:"0px"))},m(v,K){R(v,e,K),N[n].m(e,null),V(e,i),V(e,l),$&&$.m(l,null),V(e,r),V(e,c),G&&G.m(c,null),V(e,f),V(e,a),H&&H.m(a,null),V(e,h),V(e,_),ne&&ne.m(_,null),A=!0,z||(I=[pe(e,"contextmenu",bt(Mt(t[62]))),pe(e,"mouseup",t[49]),Ht(t[50].call(null,e))],z=!0)},p(v,K){let L=n;n=j(v),n===L?N[n].p(v,K):(Le(),k(N[L],1,1,()=>{N[L]=null}),Ie(),o=N[n],o?o.p(v,K):(o=N[n]=M[n](v),o.c()),p(o,1),o.m(e,i)),$&&$.p&&(!A||K[1]&536870912)&&Pe($,q,v,v[60],A?ve(q,v[60],K,Zs):De(v[60]),qo),(!A||K[0]&1&&s!==(s=`anchors-west-${v[0].id}`))&&d(l,"id",s),G&&G.p&&(!A||K[1]&536870912)&&Pe(G,ie,v,v[60],A?ve(ie,v[60],K,Fs):De(v[60]),Ko),(!A||K[0]&1&&u!==(u=`anchors-east-${v[0].id}`))&&d(c,"id",u),H&&H.p&&(!A||K[1]&536870912)&&Pe(H,x,v,v[60],A?ve(x,v[60],K,qs):De(v[60]),Ho),(!A||K[0]&1&&g!==(g=`anchors-north-${v[0].id}`))&&d(a,"id",g),ne&&ne.p&&(!A||K[1]&536870912)&&Pe(ne,W,v,v[60],A?ve(W,v[60],K,Ks):De(v[60]),Yo),(!A||K[0]&1&&b!==(b=`anchors-south-${v[0].id}`))&&d(_,"id",b),(!A||K[0]&1024)&&d(e,"title",v[10]),(!A||K[0]&2048)&&_e(e,"selected",v[11]),(!A||K[0]&98304)&&_e(e,"locked",v[16]||v[15]),K[0]&16384&&m!==(m=`${v[14].y}px`)&&T(e,"top",m),K[0]&16384&&w!==(w=`${v[14].x}px`)&&T(e,"left",w),K[0]&131072&&T(e,"z-index",v[17]),K[0]&528384&&T(e,"width",v[12]?v[19]+"px":"fit-content"),K[0]&266240&&T(e,"height",v[12]?v[18]+"px":"fit-content"),K[0]&1048576&&S!==(S=`rotate(${v[20]}deg)`)&&T(e,"transform",S),K[0]&2097158&&T(e,"--prop-background-color",v[21]||(v[1]||v[2]?null:"transparent")),K[0]&4194304&&T(e,"--prop-text-color",v[22]),K[0]&8388608&&T(e,"--prop-border-color",v[23]),K[0]&16777216&&T(e,"--prop-selection-color",v[24]),K[0]&33554438&&T(e,"--prop-border-radius",v[25]?`${v[25]}px`:v[1]||v[2]?null:"0px"),K[0]&67108870&&T(e,"--prop-border-width",v[26]||(v[1]||v[2]?null:"0px"))},i(v){A||(p(o),p($,v),p(G,v),p(H,v),p(ne,v),A=!0)},o(v){k(o),k($,v),k(G,v),k(H,v),k(ne,v),A=!1},d(v){v&&B(e),N[n].d(),$&&$.d(v),G&&G.d(v),H&&H.d(v),ne&&ne.d(v),z=!1,ht(I)}}}function Js(t){let e;const n=t[61].default,o=Ae(n,t,t[60],Fo);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[0]&2048|l[1]&536870912)&&Pe(o,n,i,i[60],e?ve(n,i[60],l,Vs):De(i[60]),Fo)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function Qs(t){let e,n,o;const i=t[61].default,l=Ae(i,t,t[60],Zo);return{c(){e=te("div"),l&&l.c(),bn(()=>t[63].call(e)),T(e,"width","fit-content"),T(e,"height","fit-content")},m(s,r){R(s,e,r),l&&l.m(e,null),n=Bi(e,t[63].bind(e)),o=!0},p(s,r){l&&l.p&&(!o||r[0]&2048|r[1]&536870912)&&Pe(l,i,s,s[60],o?ve(i,s[60],r,Us):De(s[60]),Zo)},i(s){o||(p(l,s),o=!0)},o(s){k(l,s),o=!1},d(s){s&&B(e),l&&l.d(s),n()}}}function xs(t){let e,n,o=!t[13]&&Vo(t);return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),R(i,e,l),n=!0},p(i,l){i[13]?o&&(Le(),k(o,1,1,()=>{o=null}),Ie()):o?(o.p(i,l),l[0]&8192&&p(o,1)):(o=Vo(i),o.c(),p(o,1),o.m(e.parentNode,e))},i(i){n||(p(o),n=!0)},o(i){k(o),n=!1},d(i){i&&B(e),o&&o.d(i)}}}const $s=new Set(["INPUT","SELECT","BUTTON","TEXTAREA"]);function er(t,e,n){let o,i,l,s,r,c,u,f=ee,a=()=>(f(),f=Ve(st,C=>n(66,u=C)),st),g,h=ee,_=()=>(h(),h=Ve(Je,C=>n(67,g=C)),Je),b,m,w=ee,S=()=>(w(),w=Ve(ft,C=>n(68,m=C)),ft),A,z,I,M=ee,N=()=>(M(),M=Ve(gt,C=>n(71,I=C)),gt),j,q,$,ie=ee,G=()=>(ie(),ie=Ve(ut,C=>n(16,$=C)),ut),x,H=ee,W=()=>(H(),H=Ve(mt,C=>n(73,x=C)),mt),ne,v,K,L,F=ee,we=()=>(F(),F=Ve(rt,C=>n(75,L=C)),rt),Ce,Me,P,me,J,ze,$e,he,Z,ae,ye,ke;X(t,dt,C=>n(65,c=C)),X(t,wt,C=>n(70,z=C)),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>w()),t.$$.on_destroy.push(()=>M()),t.$$.on_destroy.push(()=>ie()),t.$$.on_destroy.push(()=>H()),t.$$.on_destroy.push(()=>F());let{$$slots:Ke={},$$scope:ct}=e;const et=Ne("mounted"),O=Ne("duplicate");X(t,O,C=>n(56,Me=C));const tt=Ne("graphDOMElement");X(t,tt,C=>n(74,v=C));const ot=cn();let{node:D}=e,{isDefault:Se}=e,{useDefaults:Ue}=e,{center:be}=e,{nodeStore:it}=e,{locked:ut}=e;G();let{groups:st}=e;a();let{maxZIndex:mt}=e;W();let{centerPoint:rt}=e;we();let{cursor:St}=e,{initialNodePositions:Je}=e;_();let{activeGroup:ft}=e;S();let{editing:gt}=e;N();let{dimensionsProvided:Nt=!1}=e,{title:kt}=e;const Zt=Y(0),de=Y(null);X(t,de,C=>n(64,r=C));const At=D.id,It=D.position;X(t,It,C=>n(59,J=C));const vt=D.dimensions.width;X(t,vt,C=>n(19,Ce=C));const zt=D.dimensions.height;X(t,zt,C=>n(18,K=C));const Ot=D.selectionColor;X(t,Ot,C=>n(24,ae=C));const at=D.editable;X(t,at,C=>n(72,j=C));const Tt=D.locked;X(t,Tt,C=>n(15,q=C));const Oe=D.zIndex;X(t,Oe,C=>n(17,ne=C));const Re=D.bgColor;X(t,Re,C=>n(21,$e=C));const Dt=D.borderRadius;X(t,Dt,C=>n(25,ye=C));const Ct=D.textColor;X(t,Ct,C=>n(22,he=C));const Bt=D.group;X(t,Bt,C=>n(69,A=C));const Rt=D.borderColor;X(t,Rt,C=>n(23,Z=C));const Xt=D.borderWidth;X(t,Xt,C=>n(26,ke=C));const jt=D.rotation;X(t,jt,C=>n(20,ze=C));const{selected:Vt,hidden:E}=u,Ee=E.nodes;X(t,Ee,C=>n(58,me=C));const qe=Vt.nodes;X(t,qe,C=>n(55,b=C));const Fe=Y(!1);X(t,Fe,C=>n(57,P=C)),We("node",D),We("anchorsMounted",Zt),We("resized",Fe),We("nodeConnectEvent",de),Ft(()=>{if(be){const C={x:L.x-Ce/2,y:L.y-K/2};D.position.set(C),wt.set(!0),wt.set(!1)}et.update(C=>C+1)}),Dn(()=>{i&&(b.delete(D),qe.set(b)),et.update(C=>C-1)});function Qe(){i?(D&&b.delete(D),qe.set(b)):(D&&b.add(D),qe.set(b))}function y(C){oe(dt,c=U(St),c),v.focus(),ne!==x&&ne!==1/0&&oe(Oe,ne=oe(mt,++x,x),ne);const Te=C.target;if(!$s.has(Te.tagName)&&(C.preventDefault(),ot("nodeClicked",{node:D,e:C}),!($||q))){if("touches"in C){if(C.touches&&C.touches.length>1)return}else C.button===2&&j&&oe(gt,I=D,I);oe(wt,z=!0,z),le(C)}}function le(C){let Te,_t,Pt=!1;const Gt=A;Gt&&(Te=u[Gt],_t=U(Te.parent),Pt=_t===D),Pt?oe(ft,m=Gt,m):oe(ft,m="selected",m),!C.shiftKey&&i?oe(ft,m="selected",m):(!C.shiftKey&&!i&&!C.shiftKey&&(b.clear(),qe.set(b)),Qe()),oe(Je,g=Ui(u.selected.nodes),g)}function ge(){it.delete(At)}function fe(C){const Te=U(St),_t=Te.x-c.x,Pt=Te.y-c.y;Math.abs(_t)+Math.abs(Pt)<4&&ot("nodeReleased",{e:C,node:D}),oe(de,r=C,r)}function Ye(C){return C.addEventListener("mousedown",y),C.addEventListener("touchstart",y),{destroy(){C.removeEventListener("mousedown",y),C.removeEventListener("touchstart",y)}}}function lt(C){xe.call(this,t,C)}function Ge(){K=this.clientHeight,zt.set(K),Ce=this.clientWidth,vt.set(Ce)}return t.$$set=C=>{"node"in C&&n(0,D=C.node),"isDefault"in C&&n(1,Se=C.isDefault),"useDefaults"in C&&n(2,Ue=C.useDefaults),"center"in C&&n(51,be=C.center),"nodeStore"in C&&n(52,it=C.nodeStore),"locked"in C&&G(n(3,ut=C.locked)),"groups"in C&&a(n(4,st=C.groups)),"maxZIndex"in C&&W(n(5,mt=C.maxZIndex)),"centerPoint"in C&&we(n(6,rt=C.centerPoint)),"cursor"in C&&n(53,St=C.cursor),"initialNodePositions"in C&&_(n(7,Je=C.initialNodePositions)),"activeGroup"in C&&S(n(8,ft=C.activeGroup)),"editing"in C&&N(n(9,gt=C.editing)),"dimensionsProvided"in C&&n(54,Nt=C.dimensionsProvided),"title"in C&&n(10,kt=C.title),"$$scope"in C&&n(60,ct=C.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&268435456&&n(14,o=J),t.$$.dirty[0]&1|t.$$.dirty[1]&16777216&&n(11,i=b.has(D)),t.$$.dirty[0]&1|t.$$.dirty[1]&134217728&&n(13,l=me.has(D)),t.$$.dirty[1]&75497472&&n(12,s=Nt||P),t.$$.dirty[0]&2049|t.$$.dirty[1]&33554432&&i&&Me&&ot("duplicate",D)},[D,Se,Ue,ut,st,mt,rt,Je,ft,gt,kt,i,s,l,o,q,$,ne,K,Ce,ze,$e,he,Z,ae,ye,ke,O,tt,de,At,It,vt,zt,Ot,at,Tt,Oe,Re,Dt,Ct,Bt,Rt,Xt,jt,Ee,qe,Fe,ge,fe,Ye,be,it,St,Nt,b,Me,P,me,J,ct,Ke,lt,Ge]}class tr extends je{constructor(e){super(),Xe(this,e,er,xs,Be,{node:0,isDefault:1,useDefaults:2,center:51,nodeStore:52,locked:3,groups:4,maxZIndex:5,centerPoint:6,cursor:53,initialNodePositions:7,activeGroup:8,editing:9,dimensionsProvided:54,title:10},null,[-1,-1,-1])}}const nr=t=>({selected:t[1]&262144,grabHandle:t[1]&524288,node:t[0]&128,destroy:t[1]&131072}),Uo=t=>({selected:t[49],grabHandle:t[50],disconnect:t[14],connect:t[13],node:t[7],destroy:t[48]}),or=t=>({}),Jo=t=>({slot:"anchorWest"}),ir=t=>({}),Qo=t=>({slot:"anchorEast"}),lr=t=>({}),xo=t=>({slot:"anchorNorth"}),sr=t=>({}),$o=t=>({slot:"anchorSouth"});function ei(t){let e,n;return e=new tr({props:{node:t[7],center:t[5]||t[0]==="center",isDefault:t[8],useDefaults:t[4],dimensionsProvided:!!t[1]||!!t[2]||!!t[3]||t[8]||!1,nodeStore:t[11].nodes,locked:t[11].locked,groups:t[11].groups,title:t[6],maxZIndex:t[11].maxZIndex,centerPoint:t[11].center,cursor:t[11].cursor,activeGroup:t[11].activeGroup,editing:t[11].editing,initialNodePositions:t[11].initialNodePositions,$$slots:{anchorSouth:[dr],anchorNorth:[ar],anchorEast:[fr],anchorWest:[ur],default:[cr,({destroy:o,selected:i,grabHandle:l})=>({48:o,49:i,50:l}),({destroy:o,selected:i,grabHandle:l})=>[0,(o?131072:0)|(i?262144:0)|(l?524288:0)]]},$$scope:{ctx:t}}}),e.$on("nodeClicked",t[41]),e.$on("nodeMount",t[42]),e.$on("nodeReleased",t[43]),e.$on("duplicate",t[44]),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p(o,i){const l={};i[0]&128&&(l.node=o[7]),i[0]&33&&(l.center=o[5]||o[0]==="center"),i[0]&256&&(l.isDefault=o[8]),i[0]&16&&(l.useDefaults=o[4]),i[0]&270&&(l.dimensionsProvided=!!o[1]||!!o[2]||!!o[3]||o[8]||!1),i[0]&64&&(l.title=o[6]),i[0]&384|i[1]&933888&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function ti(t){let e,n;return e=new Hs({props:{selected:t[49]}}),e.$on("connection",t[39]),e.$on("disconnection",t[40]),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p(o,i){const l={};i[1]&262144&&(l.selected=o[49]),e.$set(l)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function rr(t){let e,n,o=t[8]&&ti(t);return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),R(i,e,l),n=!0},p(i,l){i[8]?o?(o.p(i,l),l[0]&256&&p(o,1)):(o=ti(i),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(Le(),k(o,1,1,()=>{o=null}),Ie())},i(i){n||(p(o),n=!0)},o(i){k(o),n=!1},d(i){i&&B(e),o&&o.d(i)}}}function cr(t){let e;const n=t[38].default,o=Ae(n,t,t[45],Uo),i=o||rr(t);return{c(){i&&i.c()},m(l,s){i&&i.m(l,s),e=!0},p(l,s){o?o.p&&(!e||s[0]&128|s[1]&933888)&&Pe(o,n,l,l[45],e?ve(n,l[45],s,nr):De(l[45]),Uo):i&&i.p&&(!e||s[0]&256|s[1]&262144)&&i.p(l,e?s:[-1,-1])},i(l){e||(p(i,l),e=!0)},o(l){k(i,l),e=!1},d(l){i&&i.d(l)}}}function ur(t){let e;const n=t[38].anchorWest,o=Ae(n,t,t[45],Jo);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&16384)&&Pe(o,n,i,i[45],e?ve(n,i[45],l,or):De(i[45]),Jo)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function fr(t){let e;const n=t[38].anchorEast,o=Ae(n,t,t[45],Qo);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&16384)&&Pe(o,n,i,i[45],e?ve(n,i[45],l,ir):De(i[45]),Qo)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function ar(t){let e;const n=t[38].anchorNorth,o=Ae(n,t,t[45],xo);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&16384)&&Pe(o,n,i,i[45],e?ve(n,i[45],l,lr):De(i[45]),xo)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function dr(t){let e;const n=t[38].anchorSouth,o=Ae(n,t,t[45],$o);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&16384)&&Pe(o,n,i,i[45],e?ve(n,i[45],l,sr):De(i[45]),$o)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function hr(t){let e=t[7]&&t[10].get(t[7].id),n,o,i=e&&ei(t);return{c(){i&&i.c(),n=He()},m(l,s){i&&i.m(l,s),R(l,n,s),o=!0},p(l,s){s[0]&1152&&(e=l[7]&&l[10].get(l[7].id)),e?i?(i.p(l,s),s[0]&1152&&p(i,1)):(i=ei(l),i.c(),p(i,1),i.m(n.parentNode,n)):i&&(Le(),k(i,1,1,()=>{i=null}),Ie())},i(l){o||(p(i),o=!0)},o(l){k(i),o=!1},d(l){l&&B(n),i&&i.d(l)}}}function gr(t,e,n){let o,i,l=ee,s=()=>(l(),l=Ve(o,O=>n(37,i=O)),o),r;t.$$.on_destroy.push(()=>l());let{$$slots:c={},$$scope:u}=e;const f=$n(c),a=Ne("graph"),g=Ne("group");let{position:h={x:0,y:0}}=e,{drop:_=!1}=e,{dimensions:b=null}=e,{id:m=0}=e,{bgColor:w=null}=e,{borderRadius:S=null}=e,{borderColor:A=null}=e,{borderWidth:z=null}=e,{selectionColor:I=null}=e,{textColor:M=null}=e,{resizable:N=!1}=e,{label:j=""}=e,{inputs:q=1}=e,{outputs:$=1}=e,{width:ie=null}=e,{height:G=null}=e,{TD:x=!1}=e,{LR:H=!1}=e,{zIndex:W=1}=e,{editable:ne=!1}=e,{locked:v=!1}=e,{rotation:K=0}=e,{edge:L=null}=e,{connections:F=[]}=e,{useDefaults:we=!1}=e,{center:Ce=!1}=e,{dynamic:Me=!1}=e,{title:P=""}=e;const me=a.nodes;X(t,me,O=>n(10,r=O)),We("dynamic",Me);let J,ze=!0;Ft(()=>{const O=x?"TD":H?"LR":a.direction,tt=a.groupBoxes.get(g),ot=a.nodes.count()+1;n(8,ze=!f.default),(f.anchorWest||f.anchorEast||f.anchorNorth||f.anchorSouth)&&n(8,ze=!1);const D=b||(ie||G?{width:ie||G||200,height:G||ie||100}:ze?{width:200,height:100}:{width:0,height:0}),Se={id:m||ot,position:_==="cursor"?{x:U(a.cursor).x,y:U(a.cursor).y}:tt?{x:U(tt.position).x+h.x,y:U(tt.position).y+h.y}:h,dimensions:D,editable:ne||a.editable,label:j,group:g,resizable:N,inputs:q,outputs:$,zIndex:W,direction:O,locked:v,rotation:K};F.length&&(Se.connections=F),z&&(Se.borderWidth=z),S&&(Se.borderRadius=S),A&&(Se.borderColor=A),I&&(Se.selectionColor=I),M&&(Se.textColor=M),w&&(Se.bgColor=w),L&&(Se.edge=L),n(7,J=Hi(Se)),tt&&a.groups.update(Ue=>{const be=U(Ue[g].nodes);return Ue[g].nodes.set(new Set([...be,J])),Ue}),a.nodes.add(J,J.id)}),Dn(()=>{a.nodes.delete(J.id)});function $e(O){J&&J.connections.set([O])}function he(O){if(!J)return;(Array.isArray(O)?O:[O]).forEach(ot=>{const[D,Se]=Array.isArray(ot)?ot:[ot,null],Ue=`N-${D}`,be=a.nodes.get(Ue);if(!be)return;let it=null;const ut=Se?`A-${Se}/${Ue}`:null;ut&&(it=be.anchors.get(ut));const st=a.edges.match(J,be,it);st.length&&a.edges.delete(st[st.length-1])})}We("connect",$e),We("disconnect",he);let Z=h;function ae(O){xe.call(this,t,O)}function ye(O){xe.call(this,t,O)}function ke(O){xe.call(this,t,O)}function Ke(O){xe.call(this,t,O)}function ct(O){xe.call(this,t,O)}function et(O){xe.call(this,t,O)}return t.$$set=O=>{"position"in O&&n(15,h=O.position),"drop"in O&&n(0,_=O.drop),"dimensions"in O&&n(1,b=O.dimensions),"id"in O&&n(16,m=O.id),"bgColor"in O&&n(17,w=O.bgColor),"borderRadius"in O&&n(18,S=O.borderRadius),"borderColor"in O&&n(19,A=O.borderColor),"borderWidth"in O&&n(20,z=O.borderWidth),"selectionColor"in O&&n(21,I=O.selectionColor),"textColor"in O&&n(22,M=O.textColor),"resizable"in O&&n(23,N=O.resizable),"label"in O&&n(24,j=O.label),"inputs"in O&&n(25,q=O.inputs),"outputs"in O&&n(26,$=O.outputs),"width"in O&&n(2,ie=O.width),"height"in O&&n(3,G=O.height),"TD"in O&&n(27,x=O.TD),"LR"in O&&n(28,H=O.LR),"zIndex"in O&&n(29,W=O.zIndex),"editable"in O&&n(30,ne=O.editable),"locked"in O&&n(31,v=O.locked),"rotation"in O&&n(32,K=O.rotation),"edge"in O&&n(33,L=O.edge),"connections"in O&&n(34,F=O.connections),"useDefaults"in O&&n(4,we=O.useDefaults),"center"in O&&n(5,Ce=O.center),"dynamic"in O&&n(35,Me=O.dynamic),"title"in O&&n(6,P=O.title),"$$scope"in O&&n(45,u=O.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&128|t.$$.dirty[1]&8&&J&&J.connections.set(F),t.$$.dirty[0]&131200&&J&&J.bgColor.set(w),t.$$.dirty[0]&16777344&&J&&J.label.set(j),t.$$.dirty[0]&4194432&&J&&J.textColor.set(M),t.$$.dirty[0]&524416&&J&&J.borderColor.set(A),t.$$.dirty[0]&2097280&&J&&J.selectionColor.set(I),t.$$.dirty[0]&8388736&&J&&J.resizable.set(N),t.$$.dirty[0]&1073741952&&J&&J.editable.set(ne),t.$$.dirty[0]&128|t.$$.dirty[1]&1&&J&&J.locked.set(v),t.$$.dirty[0]&33554560&&J&&J.inputs.set(q),t.$$.dirty[0]&67108992&&J&&J.outputs.set($),t.$$.dirty[0]&536871040&&J&&J.zIndex.set(W),t.$$.dirty[0]&128&&s(n(9,o=J&&(J==null?void 0:J.position))),t.$$.dirty[0]&32896|t.$$.dirty[1]&96&&J){const{x:O,y:tt}=Z,{x:ot,y:D}=i,{x:Se,y:Ue}=h;(Se!==ot||Ue!==D)&&(Se!==O||Ue!==tt?(n(36,Z=h),J.position.set(h)):(n(36,Z=i),n(15,h=i)))}t.$$.dirty[0]&33554560&&J&&J.inputs.set(q),t.$$.dirty[0]&67108992&&J&&J.outputs.set($)},[_,b,ie,G,we,Ce,P,J,ze,o,r,a,me,$e,he,h,m,w,S,A,z,I,M,N,j,q,$,x,H,W,ne,v,K,L,F,Me,Z,i,c,ae,ye,ke,Ke,ct,et,u]}class ln extends je{constructor(e){super(),Xe(this,e,gr,hr,Be,{position:15,drop:0,dimensions:1,id:16,bgColor:17,borderRadius:18,borderColor:19,borderWidth:20,selectionColor:21,textColor:22,resizable:23,label:24,inputs:25,outputs:26,width:2,height:3,TD:27,LR:28,zIndex:29,editable:30,locked:31,rotation:32,edge:33,connections:34,useDefaults:4,center:5,dynamic:35,title:6},null,[-1,-1])}}function _r(t){t.parentNodes.forEach(l=>mr(l));const[e,n]=br(t);pr(e,t),yr(e);for(let l=0;l<10;l++){let s=!1;for(let r=0;r<=n;r++)if(e[r])for(let c=0;c<e[r].length;c++){const u=e[r][c],f=kr(e,u,c);f&&(xt(e[r],c,f),s=!0)}if(!s)break}const o=Cr(e);for(let l=0;l<10&&Sr(e,o);l++);for(let l=0;l<2;l++){let s=!1;for(let r=0;r<=n;r++)for(let c=0;c<e[r].length;c++){const u=e[r][c],f=wr(e,u,c);f&&(xt(e[r],c,f),s=!0)}if(!s)break}const i=[];for(let l=0;l<=n;l++)i.push(e[l]);return i}function mr(t,e=0,n=0){const o=[],i=(l,s=0,r=0)=>{l.depth=Math.max(l.depth,s),l.nesting=Math.max(l.nesting,r),o.push(l);for(const c of l.children){const{node:u,length:f}=c;i(u,f+s,r+1)}};i(t,e,n);for(const l of o)if(l.children.length){l.nesting=l.children[0].node.nesting-1,l.depth=l.children[0].node.depth-l.children[0].length;for(const s of l.children)l.nesting=Math.min(l.nesting,s.node.nesting-1),l.depth=Math.min(l.depth,s.node.depth-s.length)}}function br(t){let e=0;const n={};for(const o in t.nodeList){const{depth:i,parents:l,children:s,type:r,data:c}=t.nodeList[o];e=Math.max(e,i),n[i]||(n[i]=[]);const u={id:o,children:[],parents:[],layer:i,type:r.trim()};c.props&&(u.propsId=c.props.trim());for(const f of l)u.parents.push(f.node.id);for(const f of s)u.children.push(f.node.id);n[i].push(u)}return[n,e]}function pr(t,e){for(const n in e.nodeList)for(const o of e.nodeList[n].children)if(o.node.depth-1>e.nodeList[n].depth){const i=e.nodeList[n].depth+1,l=o.node.depth-1,s=[];let r=0;for(let c=i;c<=l;c++){const u={id:`GHOST_${o.node.id}_${r}`,children:[],parents:[],layer:c,ignore:!0};s.push(u),r++}for(const c of o.node.parents)s[0].parents.push(c.node.id);s[s.length-1].children.push(o.node.id);for(let c=0;c<s.length-1;c++)s[c].children.push(`GHOST_${o.node.id}_${c+1}`);for(let c=l;c>=i;c--)s.length>0&&t[c].push(s[0]);for(const c of t[e.nodeList[n].depth])c.id===n&&(c.children.push(s[0].id),c.children=c.children.filter(u=>u!==o.node.id))}}function yr(t){let e=0;for(const n in t)e=Math.max(t[n].length,e);for(const n in t)if(t[n].length<e){const o=Array.from({length:e-t[n].length},()=>({id:"NULL_NODE",children:[],parents:[],layer:parseInt(n),ignore:!0}));t[n]=t[n].concat(o)}}function ni(t,e,n){let o=0,i=0;for(const l of e.parents){for(let s=0;s<t[e.layer-1].length;s++)if(l===t[e.layer-1][s].id){o+=Math.abs(n-s);break}i++}for(const l of e.children){for(let s=0;s<t[e.layer+1].length;s++)if(l===t[e.layer+1][s].id){o+=Math.abs(n-s);break}i++}return isNaN(o/i)?0:o/i}function oi(t,e,n){let o=0,i=0;for(const l of e.parents){for(let s=0;s<t[e.layer-1].length;s++)if(l===t[e.layer-1][s].id){o+=Math.abs(n-s);break}i++}return isNaN(o/i)?0:o/i}function ii(t,e,n){let o=0,i=0;for(const l of e.children){for(let s=0;s<t[e.layer+1].length;s++)if(l===t[e.layer+1][s].id){o+=Math.abs(n-s);break}i++}return isNaN(o/i)?0:o/i}function wr(t,e,n){const o=Jn(t,e.layer);let i=0;e.layer===0?i=ii(t,e,n):i=oi(t,e,n);let l=i,s=n;for(let r=0;r<t[e.layer].length;r++)if(t[e.layer][r].id==="NULL_NODE"){xt(t[e.layer],n,r);const u=Jn(t,e.layer);let f=0;e.layer===0?f=ii(t,e,r):f=oi(t,e,r),u<=o&&f<l&&(l=f,s=r),xt(t[e.layer],r,n)}return s===n?null:s}function kr(t,e,n){const o={};let i=1/0,l=0;for(let s=0;s<t[e.layer].length;s++){const r=ni(t,e,s),c=ni(t,t[e.layer][s],n);o[s]=r+c}for(const s in o)o[s]<i&&(i=o[s],l=parseInt(s));return l===n?null:l}function xt(t,e,n){const o=t[e];t[e]=t[n],t[n]=o}function Cr(t){const e=[];for(const n in t)for(const o of t[n])e.push(o);return e.sort((n,o)=>o.parents.length+o.children.length-(n.parents.length+n.children.length))}function Jn(t,e){let n=0;for(let o=0;o<t[e].length;o++){const i=t[e][o],l=[],s=[];if(t[e-1])for(let r=o+1;r<t[e-1].length;r++)i.parents.includes(t[e-1][r].id)&&l.push(r);if(t[e+1])for(let r=o+1;r<t[e+1].length;r++)i.children.includes(t[e+1][r].id)&&s.push(r);for(let r=o+1;r<t[e].length;r++){const c=t[e][r];if(l.length)for(let u=0;u<t[e-1].length;u++)c.parents.includes(t[e-1][u].id)&&l.forEach(f=>{u<f&&n++});if(s.length)for(let u=0;u<t[e+1].length;u++)c.children.includes(t[e+1][u].id)&&s.forEach(f=>{u<f&&n++})}}return n}function Sr(t,e){let n=!1;for(const o of e){if(o.children.length+o.parents.length===0)return n;let i=0;for(let r=0;r<t[o.layer].length;r++)if(t[o.layer][r].id===o.id){i=r;break}let l=1/0,s=i;for(let r=0;r<t[o.layer].length;r++){xt(t[o.layer],i,r);const c=Jn(t,o.layer);c<l&&(l=c,s=r),xt(t[o.layer],r,i)}s!==i&&(xt(t[o.layer],i,s),n=!0)}return n}function li(t,e,n){const o=t.slice();return o[6]=e[n],o}function si(t,e,n){const o=t.slice();return o[9]=e[n],o}function Nr(t){let e,n;const o=[{label:t[9].id},{id:t[9].id},{TD:!0},t[0][t[9].id],{connections:t[9].children.map(ui)}];let i={};for(let l=0;l<o.length;l+=1)i=xn(i,o[l]);return e=new ln({props:i}),{c(){ue(e.$$.fragment)},m(l,s){re(e,l,s),n=!0},p(l,s){const r=s&3?Gi(o,[s&2&&{label:l[9].id},s&2&&{id:l[9].id},o[2],Yi(l[0][l[9].id]),s&2&&{connections:l[9].children.map(ui)}]):{};e.$set(r)},i(l){n||(p(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function ri(t){let e,n,o=!t[9].ignore&&Nr(t);return{c(){o&&o.c(),e=He()},m(i,l){o&&o.m(i,l),R(i,e,l),n=!0},p(i,l){i[9].ignore||o.p(i,l)},i(i){n||(p(o),n=!0)},o(i){k(o),n=!1},d(i){i&&B(e),o&&o.d(i)}}}function ci(t){let e,n,o=yt(t[6]),i=[];for(let s=0;s<o.length;s+=1)i[s]=ri(si(t,o,s));const l=s=>k(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=He()},m(s,r){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,r);R(s,e,r),n=!0},p(s,r){if(r&3){o=yt(s[6]);let c;for(c=0;c<o.length;c+=1){const u=si(s,o,c);i[c]?(i[c].p(u,r),p(i[c],1)):(i[c]=ri(u),i[c].c(),p(i[c],1),i[c].m(e.parentNode,e))}for(Le(),c=o.length;c<i.length;c+=1)l(c);Ie()}},i(s){if(!n){for(let r=0;r<o.length;r+=1)p(i[r]);n=!0}},o(s){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)k(i[r]);n=!1},d(s){s&&B(e),En(i,s)}}}function Er(t){let e,n,o=yt(t[1]),i=[];for(let s=0;s<o.length;s+=1)i[s]=ci(li(t,o,s));const l=s=>k(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=He()},m(s,r){for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,r);R(s,e,r),n=!0},p(s,[r]){if(r&3){o=yt(s[1]);let c;for(c=0;c<o.length;c+=1){const u=li(s,o,c);i[c]?(i[c].p(u,r),p(i[c],1)):(i[c]=ci(u),i[c].c(),p(i[c],1),i[c].m(e.parentNode,e))}for(Le(),c=o.length;c<i.length;c+=1)l(c);Ie()}},i(s){if(!n){for(let r=0;r<o.length;r+=1)p(i[r]);n=!0}},o(s){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)k(i[r]);n=!1},d(s){s&&B(e),En(i,s)}}}const Mr=100,Ar=100,ui=t=>[t,"0"];function vr(t,e,n){let{mermaid:o=""}=e,{mermaidConfig:i={}}=e;const l=Rl(o),s=_r(l),r=Ne("graph");let c;return Ft(()=>{r.nodes.subscribe(f=>c=f);let u=0;for(const f of s){let a=0,g=-1/0;for(const h of f)h.ignore||(c[`N-${h.id}`].position.update(()=>({x:a,y:u})),c[`N-${h.id}`].dimensions.width.subscribe(_=>a+=_),c[`N-${h.id}`].dimensions.height.subscribe(_=>g=Math.max(g,_))),a+=Mr;u+=g+Ar}}),t.$$set=u=>{"mermaid"in u&&n(2,o=u.mermaid),"mermaidConfig"in u&&n(0,i=u.mermaidConfig)},[i,s,o]}class Pr extends je{constructor(e){super(),Xe(this,e,vr,Er,Be,{mermaid:2,mermaidConfig:0})}}const Dr="modulepreload",Lr=function(t){return"https://caviato.xyz/"+t},fi={},Sn=function(e,n,o){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(l=>{if(l=Lr(l),l in fi)return;fi[l]=!0;const s=l.endsWith(".css"),r=s?'[rel="stylesheet"]':"";if(!!o)for(let f=i.length-1;f>=0;f--){const a=i[f];if(a.href===l&&(!s||a.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${r}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":Dr,s||(u.as="script",u.crossOrigin=""),u.href=l,document.head.appendChild(u),s)return new Promise((f,a)=>{u.addEventListener("load",f),u.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>e()).catch(l=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=l,window.dispatchEvent(s),!s.defaultPrevented)throw l})},Ir=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"],zr=new Set(Ir),Qn=t=>zr.has(t);function Or(t){let e,n,o,i,l,s,r;return{c(){e=te("div"),n=te("div"),o=te("p"),i=Kt(t[2]),l=se(),s=te("p"),r=Kt(t[6]),d(o,"class","svelte-1okgqig"),d(s,"class","svelte-1okgqig"),d(n,"class","slider-input connected svelte-1okgqig"),d(n,"aria-label",t[2]),T(n,"--percentage","100%"),d(e,"class","wrapper connected svelte-1okgqig")},m(c,u){R(c,e,u),V(e,n),V(n,o),V(o,i),V(n,l),V(n,s),V(s,r)},p(c,u){u[0]&4&&$t(i,c[2]),u[0]&64&&$t(r,c[6]),u[0]&4&&d(n,"aria-label",c[2])},d(c){c&&B(e)}}}function Tr(t){let e,n,o,i,l,s,r,c,u,f,a,g,h,_;return{c(){e=te("div"),n=te("button"),n.textContent="",o=se(),i=te("div"),l=te("label"),s=Kt(t[2]),r=se(),c=te("input"),a=se(),g=te("button"),g.textContent="+",d(n,"class","button svelte-1okgqig"),d(l,"for","slider-input"),d(l,"class","input-label svelte-1okgqig"),d(c,"tabindex",0),d(c,"id","slider-input"),d(c,"class","slider-input svelte-1okgqig"),d(c,"type","text"),c.value=u=t[6].toFixed(t[3]),d(c,"aria-label",t[2]),T(c,"background",t[9]),T(c,"--percentage",t[5]),d(i,"class","slider svelte-1okgqig"),bn(()=>t[31].call(i)),d(g,"class","button svelte-1okgqig"),d(e,"class","wrapper svelte-1okgqig"),T(e,"color",t[4])},m(b,m){R(b,e,m),V(e,n),V(e,o),V(e,i),V(i,l),V(l,s),V(i,r),V(i,c),t[30](c),f=Bi(i,t[31].bind(i)),V(e,a),V(e,g),h||(_=[pe(n,"touchstart",bt(t[26]),{passive:!0}),pe(n,"mousedown",bt(t[27])),pe(c,"wheel",bt(Mt(t[28]))),pe(c,"keydown",bt(t[29])),Ht(t[15].call(null,c)),pe(g,"touchstart",bt(t[32]),{passive:!0}),pe(g,"mousedown",bt(t[33]))],h=!0)},p(b,m){m[0]&4&&$t(s,b[2]),m[0]&72&&u!==(u=b[6].toFixed(b[3]))&&c.value!==u&&(c.value=u),m[0]&4&&d(c,"aria-label",b[2]),m[0]&512&&T(c,"background",b[9]),m[0]&32&&T(c,"--percentage",b[5]),m[0]&16&&T(e,"color",b[4])},d(b){b&&B(e),t[30](null),f(),h=!1,ht(_)}}}function Br(t){let e;function n(l,s){return l[12]?Or:Tr}let o=n(t),i=o(t);return{c(){i.c(),e=He()},m(l,s){i.m(l,s),R(l,e,s)},p(l,s){o===(o=n(l))&&i?i.p(l,s):(i.d(1),i=o(l),i&&(i.c(),i.m(e.parentNode,e)))},i:ee,o:ee,d(l){l&&B(e),i.d(l)}}}function Rr(t,e,n){let o,i,l,s,r,c,u,f=ee,a=()=>(f(),f=Ve(I,D=>n(6,u=D)),I),g,h=ee,_=()=>(h(),h=Ve(i,D=>n(36,g=D)),i),b,m=ee,w=()=>(m(),m=Ve(l,D=>n(25,b=D)),l),S,A,z;X(t,dt,D=>n(37,S=D)),t.$$.on_destroy.push(()=>f()),t.$$.on_destroy.push(()=>h()),t.$$.on_destroy.push(()=>m());let{parameterStore:I}=e;a();let{min:M=0}=e,{max:N=100}=e,{step:j=1}=e,{label:q="Value"}=e,{fixed:$=2}=e,{fontColor:ie=null}=e,{barColor:G=null}=e,{bgColor:x=null}=e,H=Ne("graph"),W=Ne("node");const ne=H.groups;X(t,ne,D=>n(39,z=D));const v=z.selected,K=H.activeGroup;X(t,K,D=>n(38,A=D));let L,F,we=!1,Ce=0,Me=0;function P(D){D.stopPropagation(),D.preventDefault(),oe(dt,S={x:b.x,y:b.y},S),n(23,Ce=b.x),window.addEventListener("mouseup",ze,{once:!0}),n(22,we=!0)}let me=u;function J(D){oe(K,A=null,A),v.nodes.set(new Set),wt.set(!1),D.stopPropagation(),D.preventDefault(),oe(dt,S={x:b.x,y:b.y},S),n(23,Ce=b.x),window.addEventListener("touchend",ze,{once:!0}),n(22,we=!0)}function ze(){me===u?(F.focus(),F.select()):me=u,n(22,we=!1),window.removeEventListener("mouseup",ze)}function $e(D){return D.addEventListener("mousedown",P),D.addEventListener("touchstart",J),{destroy(){D.removeEventListener("mousedown",P)}}}function he(D,Se=j){typeof u=="number"&&oe(I,u=_o(Math.max(M,Math.min(u+D*Se,N)),3),u)}function Z(D,Se=j){if(typeof u!="number")return;const Ue=g*.7/((N-M)/Se);if(Me+=D,Math.abs(Me)>=Ue){const be=Math.floor(Math.abs(Me)/Ue);Me>0?he(be):he(-be),Me=Me>0?Me-be*Ue:Me+be*Ue}}function ae(){const D=parseFloat(F.value);Number.isNaN(D)||(D<=M?oe(I,u=M,u):D>=N?oe(I,u=N,u):oe(I,u=_o(D,2),u)),n(8,F.value=JSON.stringify(u),F),F.blur()}const ye=()=>he(-1),ke=()=>he(-1),Ke=D=>{he(Math.sign(D.deltaY),j)},ct=D=>{const{key:Se}=D;Qn(Se)&&(D.preventDefault(),he(Se=="ArrowDown"?-1:Se=="ArrowUp"?1:0)),Se==="Enter"&&ae()};function et(D){qt[D?"unshift":"push"](()=>{F=D,n(8,F)})}function O(){L=this.offsetWidth,n(7,L)}const tt=()=>he(1),ot=()=>he(1);return t.$$set=D=>{"parameterStore"in D&&a(n(0,I=D.parameterStore)),"min"in D&&n(18,M=D.min),"max"in D&&n(19,N=D.max),"step"in D&&n(1,j=D.step),"label"in D&&n(2,q=D.label),"fixed"in D&&n(3,$=D.fixed),"fontColor"in D&&n(4,ie=D.fontColor),"barColor"in D&&n(20,G=D.barColor),"bgColor"in D&&n(21,x=D.bgColor)},t.$$.update=()=>{if(t.$$.dirty[0]&1&&n(12,o=typeof I.set!="function"),t.$$.dirty[0]&46137344&&we){const D=b.x-Ce;Z(D),n(23,Ce=b.x)}t.$$.dirty[0]&786496&&n(24,s=(u-M)/(N-M)*100),t.$$.dirty[0]&16777216&&n(5,r=`${s}%`),t.$$.dirty[0]&3145760&&n(9,c=`linear-gradient(
			90deg,
			${G||"var(--primary-color, var(--default-primary-color))"} ${r},
			${x||"var(--accent-color, var(--default-accent-color))"} ${r}
		)`)},_(n(11,i=W.dimensions.width)),w(n(10,l=H.cursor)),[I,j,q,$,ie,r,u,L,F,c,l,i,o,ne,K,$e,he,ae,M,N,G,x,we,Ce,s,b,ye,ke,Ke,ct,et,O,tt,ot]}class Wr extends je{constructor(e){super(),Xe(this,e,Rr,Br,Be,{parameterStore:0,min:18,max:19,step:1,label:2,fixed:3,fontColor:4,barColor:20,bgColor:21},null,[-1,-1])}}function Xr(t){let e,n,o;return{c(){e=te("input"),d(e,"placeholder",t[0]),d(e,"type","text")},m(i,l){R(i,e,l),uo(e,t[1]),n||(o=[pe(e,"keydown",bt(t[3])),pe(e,"click",bt(t[4])),pe(e,"mousedown",bt(t[5])),pe(e,"input",t[6])],n=!0)},p(i,[l]){l&1&&d(e,"placeholder",i[0]),l&2&&e.value!==i[1]&&uo(e,i[1])},i:ee,o:ee,d(i){i&&B(e),n=!1,ht(o)}}}function jr(t,e,n){let o,{placeholder:i}=e;const l=Ne("textStore");X(t,l,f=>n(1,o=f));function s(f){xe.call(this,t,f)}function r(f){xe.call(this,t,f)}function c(f){xe.call(this,t,f)}function u(){o=this.value,l.set(o)}return t.$$set=f=>{"placeholder"in f&&n(0,i=f.placeholder)},[i,o,l,s,r,c,u]}class Gr extends je{constructor(e){super(),Xe(this,e,jr,Xr,Be,{placeholder:0})}}function Yr(t){let e,n,o,i,l,s,r,c,u,f,a;return i=new Wr({props:{parameterStore:t[0].dimensions.width,max:1e3}}),s=new Gr({props:{placeholder:"Node Label"}}),{c(){e=te("div"),n=te("button"),n.textContent="X",o=se(),ue(i.$$.fragment),l=se(),ue(s.$$.fragment),r=se(),c=te("button"),c.textContent="Delete Node",d(e,"class","editor svelte-xh8yyu")},m(g,h){R(g,e,h),V(e,n),V(e,o),re(i,e,null),V(e,l),re(s,e,null),V(e,r),V(e,c),u=!0,f||(a=[pe(n,"click",t[5]),pe(c,"click",t[4]),Ht(t[6].call(null,e))],f=!0)},p(g,h){const _={};h&1&&(_.parameterStore=g[0].dimensions.width),i.$set(_)},i(g){u||(p(i.$$.fragment,g),p(s.$$.fragment,g),u=!0)},o(g){k(i.$$.fragment,g),k(s.$$.fragment,g),u=!1},d(g){g&&B(e),ce(i),ce(s),f=!1,ht(a)}}}function Hr(t){let e,n;return e=new ln({props:{zIndex:1/0,position:{x:t[2].x,y:t[2].y},bgColor:"white",id:"editor",$$slots:{default:[Yr,({grabHandle:o})=>({6:o}),({grabHandle:o})=>o?64:0]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p(o,[i]){const l={};i&4&&(l.position={x:o[2].x,y:o[2].y}),i&129&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Kr(t,e,n){let o,i,l=ee,s=()=>(l(),l=Ve(o,a=>n(2,i=a)),o);t.$$.on_destroy.push(()=>l());let{editing:r}=e;const c=Ne("graph");We("graph",c),We("textStore",r.label),We("colorStore",r.bgColor);function u(){c.nodes.delete(r.id),c.editing.set(null)}const f=()=>c.editing.set(null);return t.$$set=a=>{"editing"in a&&n(0,r=a.editing)},s(n(1,o=c.cursor)),[r,o,i,c,u,f]}class qr extends je{constructor(e){super(),Xe(this,e,Kr,Hr,Be,{editing:0})}}function Fr(t){let e,n,o,i;return{c(){e=te("div"),n=te("div"),d(n,"class","bounding-box svelte-1e5jg43"),T(n,"background-color",t[6]),d(e,"role","button"),d(e,"tabindex","0"),d(e,"class","bounding-box-border svelte-1e5jg43"),d(e,"id",t[2]),T(e,"border","solid 4px "+t[6]),T(e,"top",`${t[3].y}px`),T(e,"left",`${t[3].x}px`),T(e,"width",`${t[4]}px`),T(e,"height",`${t[5]}px`)},m(l,s){R(l,e,s),V(e,n),o||(i=[pe(e,"contextmenu",bt(Mt(t[12]))),pe(e,"mousedown",bt(Mt(t[9])))],o=!0)},p(l,[s]){s&64&&T(n,"background-color",l[6]),s&4&&d(e,"id",l[2]),s&64&&T(e,"border","solid 4px "+l[6]);const r=s&64;(s&72||r)&&T(e,"top",`${l[3].y}px`),(s&72||r)&&T(e,"left",`${l[3].x}px`),(s&80||r)&&T(e,"width",`${l[4]}px`),(s&96||r)&&T(e,"height",`${l[5]}px`)},i:ee,o:ee,d(l){l&&B(e),o=!1,ht(i)}}}function Zr(t,e,n){let o,i,l=ee,s=()=>(l(),l=Ve(h,I=>n(3,i=I)),h),r,c,u,f=ee,a=()=>(f(),f=Ve(_,I=>n(6,u=I)),_);t.$$.on_destroy.push(()=>l()),t.$$.on_destroy.push(()=>f());let{dimensions:g}=e,{position:h}=e;s();let{color:_}=e;a();let{groupName:b}=e;const{width:m,height:w}=g;X(t,m,I=>n(4,r=I)),X(t,w,I=>n(5,c=I));const S=cn();function A(){S("groupClick",{groupName:b})}function z(I){xe.call(this,t,I)}return t.$$set=I=>{"dimensions"in I&&n(10,g=I.dimensions),"position"in I&&s(n(0,h=I.position)),"color"in I&&a(n(1,_=I.color)),"groupName"in I&&n(11,b=I.groupName)},t.$$.update=()=>{t.$$.dirty&2048&&n(2,o=`${b}-bounding-box`)},[h,_,o,i,r,c,u,m,w,A,g,b,z]}class Vr extends je{constructor(e){super(),Xe(this,e,Zr,Fr,Be,{dimensions:10,position:0,color:1,groupName:11})}}function ai(t,e,n){const o=t.slice();return o[4]=e[n][0],o[5]=e[n][1],o}function di(t,e){let n,o,i;const l=[e[5],{groupName:e[4]}];let s={};for(let r=0;r<l.length;r+=1)s=xn(s,l[r]);return o=new Vr({props:s}),o.$on("groupClick",e[2]),{key:t,first:null,c(){n=He(),ue(o.$$.fragment),this.first=n},m(r,c){R(r,n,c),re(o,r,c),i=!0},p(r,c){e=r;const u=c&1?Gi(l,[Yi(e[5]),{groupName:e[4]}]):{};o.$set(u)},i(r){i||(p(o.$$.fragment,r),i=!0)},o(r){k(o.$$.fragment,r),i=!1},d(r){r&&B(n),ce(o,r)}}}function Ur(t){let e=[],n=new Map,o,i,l=yt(Array.from(t[0]));const s=r=>r[4];for(let r=0;r<l.length;r+=1){let c=ai(t,l,r),u=s(c);n.set(u,e[r]=di(u,c))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();o=He()},m(r,c){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(r,c);R(r,o,c),i=!0},p(r,[c]){c&1&&(l=yt(Array.from(r[0])),Le(),e=An(e,c,s,1,r,l,n,o.parentNode,Mn,di,o,ai),Ie())},i(r){if(!i){for(let c=0;c<l.length;c+=1)p(e[c]);i=!0}},o(r){for(let c=0;c<e.length;c+=1)k(e[c]);i=!1},d(r){r&&B(o);for(let c=0;c<e.length;c+=1)e[c].d(r)}}}function Jr(t,e,n){let o;const l=Ne("graph").groupBoxes;X(t,l,r=>n(0,o=r));function s(r){xe.call(this,t,r)}return[o,l,s]}class Qr extends je{constructor(e){super(),Xe(this,e,Jr,Ur,Be,{})}}function xr(t){let e,n,o,i;const l=t[11].default,s=Ae(l,t,t[10],null);return{c(){e=te("div"),s&&s.c(),d(e,"class","svelvet-graph-wrapper svelte-19pa6i0"),d(e,"role","presentation"),T(e,"transform",t[0])},m(r,c){R(r,e,c),s&&s.m(e,null),n=!0,o||(i=[pe(e,"contextmenu",hn(Mt(t[12]))),pe(e,"click",hn(Mt(t[13]))),pe(e,"touchstart",hn(Mt(t[14])))],o=!0)},p(r,[c]){s&&s.p&&(!n||c&1024)&&Pe(s,l,r,r[10],n?ve(l,r[10],c,null):De(r[10]),null),c&1&&T(e,"transform",r[0])},i(r){n||(p(s,r),n=!0)},o(r){k(s,r),n=!1},d(r){r&&B(e),s&&s.d(r),o=!1,ht(i)}}}function $r(t,e,n){let o,i,l,s,r,{$$slots:c={},$$scope:u}=e;const f=Ne("graph"),a=f.transforms,g=a.scale;X(t,g,M=>n(9,r=M));const h=a.translation;X(t,h,M=>n(8,s=M));const _=f.cursor;X(t,_,M=>n(15,l=M));let{isMovable:b}=e,m,w=!1;function S(){oe(h,s=Vl(U(dt),l,a),s),n(5,m=requestAnimationFrame(S))}function A(M){xe.call(this,t,M)}function z(M){xe.call(this,t,M)}function I(M){xe.call(this,t,M)}return t.$$set=M=>{"isMovable"in M&&n(4,b=M.isMovable),"$$scope"in M&&n(10,u=M.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(7,o=s),t.$$.dirty&640&&n(0,i=`translate(${o.x}px, ${o.y}px) scale(${r})`),t.$$.dirty&112&&(b&&!w?(n(6,w=!0),n(5,m=requestAnimationFrame(S))):(!b||!w)&&(n(6,w=!1),cancelAnimationFrame(m)))},[i,g,h,_,b,m,w,o,s,r,u,c,A,z,I]}class ec extends je{constructor(e){super(),Xe(this,e,$r,xr,Be,{isMovable:4})}}function tc(t){let e,n,o;const i=t[8].default,l=Ae(i,t,t[9],null);return n=new Qr({}),n.$on("groupClick",t[5]),{c(){l&&l.c(),e=se(),ue(n.$$.fragment)},m(s,r){l&&l.m(s,r),R(s,e,r),re(n,s,r),o=!0},p(s,r){l&&l.p&&(!o||r&512)&&Pe(l,i,s,s[9],o?ve(i,s[9],r,null):De(s[9]),null)},i(s){o||(p(l,s),p(n.$$.fragment,s),o=!0)},o(s){k(l,s),k(n.$$.fragment,s),o=!1},d(s){s&&B(e),l&&l.d(s),ce(n,s)}}}function nc(t){let e,n;return e=new ec({props:{isMovable:t[0],$$slots:{default:[tc]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p(o,[i]){const l={};i&1&&(l.isMovable=o[0]),i&512&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function oc(t,e,n){let o,i,l,s,r,c;X(t,dt,A=>n(13,s=A)),X(t,wt,A=>n(7,c=A));let{$$slots:u={},$$scope:f}=e;const a=Ne("graph"),g=Ne("snapTo");let{isMovable:h}=e;const _=a.activeGroup;X(t,_,A=>n(6,r=A));const b=a.groups;X(t,b,A=>n(10,o=A));const m=a.initialNodePositions;X(t,m,A=>n(11,i=A));const w=a.cursor;X(t,w,A=>n(12,l=A));function S(A){oe(wt,c=!0,c);const{groupName:z}=A.detail;oe(_,r=z,r),oe(dt,s=l,s),oe(m,i=Ui(o[z].nodes),i)}return t.$$set=A=>{"isMovable"in A&&n(0,h=A.isMovable),"$$scope"in A&&n(9,f=A.$$scope)},t.$$.update=()=>{t.$$.dirty&192&&r&&c&&os(a,g)},[h,_,b,m,w,S,r,c,u,f]}class ic extends je{constructor(e){super(),Xe(this,e,oc,nc,Be,{isMovable:0})}}function lc(t){let e,n;return{c(){e=pt("line"),n=pt("line"),d(e,"class","background-line svelte-rryw83"),d(e,"x1",t[11]),d(e,"y1",0),d(e,"x2",t[11]),d(e,"y2",t[6]),d(e,"stroke-width",t[5]),T(e,"--calculated-dot-color",t[2]),d(n,"class","background-line svelte-rryw83"),d(n,"y1",t[11]),d(n,"x1",0),d(n,"y2",t[11]),d(n,"x2",t[6]),d(n,"stroke-width",t[5]),T(n,"--calculated-dot-color",t[2])},m(o,i){R(o,e,i),R(o,n,i)},p(o,i){i&2048&&d(e,"x1",o[11]),i&2048&&d(e,"x2",o[11]),i&64&&d(e,"y2",o[6]),i&32&&d(e,"stroke-width",o[5]),i&4&&T(e,"--calculated-dot-color",o[2]),i&2048&&d(n,"y1",o[11]),i&2048&&d(n,"y2",o[11]),i&64&&d(n,"x2",o[6]),i&32&&d(n,"stroke-width",o[5]),i&4&&T(n,"--calculated-dot-color",o[2])},d(o){o&&(B(e),B(n))}}}function sc(t){let e;return{c(){e=pt("circle"),d(e,"class","background-dot svelte-rryw83"),d(e,"r",t[5]),d(e,"cx",t[11]),d(e,"cy",t[11]),T(e,"--calculated-dot-color",t[2])},m(n,o){R(n,e,o)},p(n,o){o&32&&d(e,"r",n[5]),o&2048&&d(e,"cx",n[11]),o&2048&&d(e,"cy",n[11]),o&4&&T(e,"--calculated-dot-color",n[2])},d(n){n&&B(e)}}}function hi(t){let e,n,o;function i(r,c){if(r[0]==="dots")return cc;if(r[0]==="lines")return rc}let l=i(t),s=l&&l(t);return{c(){e=pt("pattern"),s&&s.c(),d(e,"id","graph-coarse-pattern"),d(e,"x",t[7]),d(e,"y",t[8]),d(e,"width",n=t[6]*t[3]),d(e,"height",o=t[6]*t[3]),d(e,"patternUnits","userSpaceOnUse")},m(r,c){R(r,e,c),s&&s.m(e,null)},p(r,c){l===(l=i(r))&&s?s.p(r,c):(s&&s.d(1),s=l&&l(r),s&&(s.c(),s.m(e,null))),c&128&&d(e,"x",r[7]),c&256&&d(e,"y",r[8]),c&72&&n!==(n=r[6]*r[3])&&d(e,"width",n),c&72&&o!==(o=r[6]*r[3])&&d(e,"height",o)},d(r){r&&B(e),s&&s.d()}}}function rc(t){let e,n,o,i,l,s;return{c(){e=pt("line"),i=pt("line"),d(e,"class","background-line svelte-rryw83"),d(e,"x1",t[11]),d(e,"y1",0),d(e,"x2",t[11]),d(e,"y2",n=t[6]*t[3]),d(e,"stroke-width",o=t[5]*1.2),T(e,"--calculated-dot-color",t[2]),d(i,"class","background-line svelte-rryw83"),d(i,"y1",t[11]),d(i,"x1",0),d(i,"y2",t[11]),d(i,"x2",l=t[6]*t[3]),d(i,"stroke-width",s=t[5]*1.2),T(i,"--calculated-dot-color",t[2])},m(r,c){R(r,e,c),R(r,i,c)},p(r,c){c&2048&&d(e,"x1",r[11]),c&2048&&d(e,"x2",r[11]),c&72&&n!==(n=r[6]*r[3])&&d(e,"y2",n),c&32&&o!==(o=r[5]*1.2)&&d(e,"stroke-width",o),c&4&&T(e,"--calculated-dot-color",r[2]),c&2048&&d(i,"y1",r[11]),c&2048&&d(i,"y2",r[11]),c&72&&l!==(l=r[6]*r[3])&&d(i,"x2",l),c&32&&s!==(s=r[5]*1.2)&&d(i,"stroke-width",s),c&4&&T(i,"--calculated-dot-color",r[2])},d(r){r&&(B(e),B(i))}}}function cc(t){let e,n;return{c(){e=pt("circle"),d(e,"class","background-dot svelte-rryw83"),d(e,"r",n=t[5]*2),d(e,"cx",t[11]),d(e,"cy",t[11]),T(e,"--calculated-dot-color",t[2])},m(o,i){R(o,e,i)},p(o,i){i&32&&n!==(n=o[5]*2)&&d(e,"r",n),i&2048&&d(e,"cx",o[11]),i&2048&&d(e,"cy",o[11]),i&4&&T(e,"--calculated-dot-color",o[2])},d(o){o&&B(e)}}}function gi(t){let e;return{c(){e=pt("rect"),d(e,"width","100%"),d(e,"height","100%"),d(e,"fill","url(#graph-coarse-pattern)"),d(e,"opacity",t[10])},m(n,o){R(n,e,o)},p(n,o){o&1024&&d(e,"opacity",n[10])},d(n){n&&B(e)}}}function uc(t){let e,n,o,i,l;function s(a,g){if(a[0]==="dots")return sc;if(a[0]==="lines")return lc}let r=s(t),c=r&&r(t),u=t[3]>0&&hi(t),f=t[3]>0&&gi(t);return{c(){e=te("div"),n=pt("svg"),o=pt("defs"),i=pt("pattern"),c&&c.c(),u&&u.c(),l=pt("rect"),f&&f.c(),d(i,"id","graph-pattern"),d(i,"x",t[7]),d(i,"y",t[8]),d(i,"width",t[6]),d(i,"height",t[6]),d(i,"patternUnits","userSpaceOnUse"),d(l,"width","100%"),d(l,"height","100%"),d(l,"fill","url(#graph-pattern)"),d(l,"opacity",t[9]),d(n,"class","svelte-rryw83"),d(e,"id","background-wrapper"),d(e,"class","svelte-rryw83"),T(e,"--calculated-background-color",t[1])},m(a,g){R(a,e,g),V(e,n),V(n,o),V(o,i),c&&c.m(i,null),u&&u.m(o,null),V(n,l),f&&f.m(n,null),t[24](e)},p(a,[g]){r===(r=s(a))&&c?c.p(a,g):(c&&c.d(1),c=r&&r(a),c&&(c.c(),c.m(i,null))),g&128&&d(i,"x",a[7]),g&256&&d(i,"y",a[8]),g&64&&d(i,"width",a[6]),g&64&&d(i,"height",a[6]),a[3]>0?u?u.p(a,g):(u=hi(a),u.c(),u.m(o,null)):u&&(u.d(1),u=null),g&512&&d(l,"opacity",a[9]),a[3]>0?f?f.p(a,g):(f=gi(a),f.c(),f.m(n,null)):f&&(f.d(1),f=null),g&2&&T(e,"--calculated-background-color",a[1])},i:ee,o:ee,d(a){a&&B(e),c&&c.d(),u&&u.d(),f&&f.d(),t[24](null)}}}function fc(t,e,n){let o,i,l,s,r,c,u;const f=Ne("graph");let{style:a="dots"}=e,{gridWidth:g=vl}=e,{dotSize:h=Pl}=e,{bgColor:_=null}=e,{dotColor:b=null}=e,{opacityThreshold:m=3}=e,{majorGrid:w=0}=e,{minOpacity:S=.4}=e;const A=f.transforms,z=A.scale;X(t,z,H=>n(22,c=H));const I=A.translation;X(t,I,H=>n(23,u=H));let M,N,j,q,$,ie=1,G=1;function x(H){qt[H?"unshift":"push"](()=>{M=H,n(4,M)})}return t.$$set=H=>{"style"in H&&n(0,a=H.style),"gridWidth"in H&&n(14,g=H.gridWidth),"dotSize"in H&&n(15,h=H.dotSize),"bgColor"in H&&n(1,_=H.bgColor),"dotColor"in H&&n(2,b=H.dotColor),"opacityThreshold"in H&&n(16,m=H.opacityThreshold),"majorGrid"in H&&n(3,w=H.majorGrid),"minOpacity"in H&&n(17,S=H.minOpacity)},t.$$.update=()=>{t.$$.dirty&8388608&&n(21,o=u),t.$$.dirty&4194304&&n(20,i=c),t.$$.dirty&1064960&&n(6,l=i*g),t.$$.dirty&1081344&&n(5,s=i*h/2),t.$$.dirty&64&&n(11,r=l/2),t.$$.dirty&4128816&&(n(18,N=(M==null?void 0:M.offsetWidth)||0),n(19,j=(M==null?void 0:M.offsetHeight)||0),n(7,q=(N+s)*(1-i)/2+o.x),n(8,$=(j+s)*(1-i)/2+o.y),n(9,ie=i>m?1:i/m+S),n(10,G=i>m/3?1:i/(m/3)+S))},[a,_,b,w,M,s,l,q,$,ie,G,r,z,I,g,h,m,S,N,j,i,o,c,u,x]}class ac extends je{constructor(e){super(),Xe(this,e,fc,uc,Be,{style:0,gridWidth:14,dotSize:15,bgColor:1,dotColor:2,opacityThreshold:16,majorGrid:3,minOpacity:17})}}function dc(t){let e,n;return{c(){e=te("div"),n=te("div"),d(n,"class","selection-box svelte-10ds4jd"),_e(n,"creating",t[0]),d(e,"class","selection-border svelte-10ds4jd"),_e(e,"creating",t[0]),T(e,"--prop-selection-box-color",t[1]),T(e,"height",t[4]),T(e,"width",t[3]),T(e,"top",t[6]),T(e,"left",t[5])},m(o,i){R(o,e,i),V(e,n),t[18](n)},p(o,[i]){i&1&&_e(n,"creating",o[0]),i&1&&_e(e,"creating",o[0]),i&2&&T(e,"--prop-selection-box-color",o[1]),i&16&&T(e,"height",o[4]),i&8&&T(e,"width",o[3]),i&64&&T(e,"top",o[6]),i&32&&T(e,"left",o[5])},i:ee,o:ee,d(o){o&&B(e),t[18](null)}}}function hc(t,e,n){let o,i,l,s,r,c,u,f,a,g,h=ee,_=()=>(h(),h=Ve(o,G=>n(20,g=G)),o),b,m;X(t,qi,G=>n(16,b=G)),t.$$.on_destroy.push(()=>h());let{graph:w}=e,{anchor:S}=e,{adding:A=!1}=e,{creating:z=!1}=e,{color:I=null}=e;const{groups:M}=w;X(t,M,G=>n(17,m=G));let N,j;Ft(q);function q(){N=Array.from(document.querySelectorAll(".svelvet-node")).map(x=>{const{top:H,left:W,width:ne,height:v}=x.getBoundingClientRect();return{id:x.id,top:H,left:W,width:ne,height:v}})}function $(){if(!N)return;const G=N.reduce((x,H)=>{if(r+S.left<=H.left&&s+S.top<=H.top&&r+S.left+Math.abs(l)>=H.left+H.width&&s+S.top+Math.abs(i)>=H.top+H.height){const W=H.id,ne=w.nodes.get(W);if(!ne)return x;x.push(ne)}return x},[]);A?G.forEach(x=>{g.add(x)}):oe(o,g=new Set(G),g),o.set(g)}function ie(G){qt[G?"unshift":"push"](()=>{j=G,n(2,j)})}return t.$$set=G=>{"graph"in G&&n(9,w=G.graph),"anchor"in G&&n(10,S=G.anchor),"adding"in G&&n(11,A=G.adding),"creating"in G&&n(0,z=G.creating),"color"in G&&n(1,I=G.color)},t.$$.update=()=>{t.$$.dirty&131072&&_(n(7,o=m.selected.nodes)),t.$$.dirty&66560&&n(12,i=b.y-S.y-S.top),t.$$.dirty&66560&&n(14,l=b.x-S.x-S.left),t.$$.dirty&5120&&n(13,s=Math.min(S.y,S.y+i)),t.$$.dirty&17408&&n(15,r=Math.min(S.x,S.x+l)),t.$$.dirty&8192&&n(6,c=`${s}px`),t.$$.dirty&32768&&n(5,u=`${r}px`),t.$$.dirty&4096&&n(4,f=`${Math.abs(i)}px`),t.$$.dirty&16384&&n(3,a=`${Math.abs(l)}px`),t.$$.dirty&20480&&(l||i)&&$()},[z,I,j,a,f,u,c,o,M,w,S,A,i,s,l,r,b,m,ie]}class gc extends je{constructor(e){super(),Xe(this,e,hc,dc,Be,{graph:9,anchor:10,adding:11,creating:0,color:1})}}const _c=t=>({}),_i=t=>({}),mc=t=>({}),mi=t=>({}),bc=t=>({}),bi=t=>({}),pc=t=>({}),pi=t=>({}),yc=t=>({}),yi=t=>({});function wi(t){let e,n;return e=new qr({props:{editing:t[21]}}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p(o,i){const l={};i[0]&2097152&&(l.editing=o[21]),e.$set(l)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function wc(t){let e,n,o=t[21]&&wi(t);const i=t[52].default,l=Ae(i,t,t[54],null);return{c(){o&&o.c(),e=se(),l&&l.c()},m(s,r){o&&o.m(s,r),R(s,e,r),l&&l.m(s,r),n=!0},p(s,r){s[21]?o?(o.p(s,r),r[0]&2097152&&p(o,1)):(o=wi(s),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(Le(),k(o,1,1,()=>{o=null}),Ie()),l&&l.p&&(!n||r[1]&8388608)&&Pe(l,i,s,s[54],n?ve(i,s[54],r,null):De(s[54]),null)},i(s){n||(p(o),p(l,s),n=!0)},o(s){k(o),k(l,s),n=!1},d(s){s&&B(e),o&&o.d(s),l&&l.d(s)}}}function kc(t){let e,n;return e=new ac({}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p:ee,i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Cc(t){let e;const n=t[52].background,o=Ae(n,t,t[54],yi);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&8388608)&&Pe(o,n,i,i[54],e?ve(n,i[54],l,yc):De(i[54]),yi)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function ki(t){let e,n,o;var i=t[12];function l(s,r){return{}}return i&&(e=Ut(i,l())),{c(){e&&ue(e.$$.fragment),n=He()},m(s,r){e&&re(e,s,r),R(s,n,r),o=!0},p(s,r){if(r[0]&4096&&i!==(i=s[12])){if(e){Le();const c=e;k(c.$$.fragment,1,0,()=>{ce(c,1)}),Ie()}i?(e=Ut(i,l()),ue(e.$$.fragment),p(e.$$.fragment,1),re(e,n.parentNode,n)):e=null}},i(s){o||(e&&p(e.$$.fragment,s),o=!0)},o(s){e&&k(e.$$.fragment,s),o=!1},d(s){s&&B(n),e&&ce(e,s)}}}function Ci(t){let e,n,o;var i=t[13];function l(s,r){return{}}return i&&(e=Ut(i,l())),{c(){e&&ue(e.$$.fragment),n=He()},m(s,r){e&&re(e,s,r),R(s,n,r),o=!0},p(s,r){if(r[0]&8192&&i!==(i=s[13])){if(e){Le();const c=e;k(c.$$.fragment,1,0,()=>{ce(c,1)}),Ie()}i?(e=Ut(i,l()),ue(e.$$.fragment),p(e.$$.fragment,1),re(e,n.parentNode,n)):e=null}},i(s){o||(e&&p(e.$$.fragment,s),o=!0)},o(s){e&&k(e.$$.fragment,s),o=!1},d(s){s&&B(n),e&&ce(e,s)}}}function Si(t){let e,n,o;var i=t[11];function l(s,r){return{}}return i&&(e=Ut(i,l())),{c(){e&&ue(e.$$.fragment),n=He()},m(s,r){e&&re(e,s,r),R(s,n,r),o=!0},p(s,r){if(r[0]&2048&&i!==(i=s[11])){if(e){Le();const c=e;k(c.$$.fragment,1,0,()=>{ce(c,1)}),Ie()}i?(e=Ut(i,l()),ue(e.$$.fragment),p(e.$$.fragment,1),re(e,n.parentNode,n)):e=null}},i(s){o||(e&&p(e.$$.fragment,s),o=!0)},o(s){e&&k(e.$$.fragment,s),o=!1},d(s){s&&B(n),e&&ce(e,s)}}}function Ni(t){let e,n,o;var i=t[14];function l(s,r){return{}}return i&&(e=Ut(i,l())),{c(){e&&ue(e.$$.fragment),n=He()},m(s,r){e&&re(e,s,r),R(s,n,r),o=!0},p(s,r){if(r[0]&16384&&i!==(i=s[14])){if(e){Le();const c=e;k(c.$$.fragment,1,0,()=>{ce(c,1)}),Ie()}i?(e=Ut(i,l()),ue(e.$$.fragment),p(e.$$.fragment,1),re(e,n.parentNode,n)):e=null}},i(s){o||(e&&p(e.$$.fragment,s),o=!0)},o(s){e&&k(e.$$.fragment,s),o=!1},d(s){s&&B(n),e&&ce(e,s)}}}function Ei(t){let e,n;return e=new gc({props:{creating:t[17],anchor:t[15],graph:t[0],adding:t[18],color:t[7]}}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p(o,i){const l={};i[0]&131072&&(l.creating=o[17]),i[0]&32768&&(l.anchor=o[15]),i[0]&1&&(l.graph=o[0]),i[0]&262144&&(l.adding=o[18]),i[0]&128&&(l.color=o[7]),e.$set(l)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Sc(t){let e,n,o,i,l,s,r,c,u,f,a,g,h,_,b,m,w,S;n=new ic({props:{isMovable:t[19],$$slots:{default:[wc]},$$scope:{ctx:t}}});const A=[Cc,kc],z=[];function I(L,F){return L[8]?0:1}i=I(t),l=z[i]=A[i](t);let M=t[3]&&ki(t),N=t[4]&&Ci(t),j=t[5]&&Si(t),q=t[10]&&Ni(t);const $=t[52].minimap,ie=Ae($,t,t[54],pi),G=t[52].drawer,x=Ae(G,t,t[54],bi),H=t[52].controls,W=Ae(H,t,t[54],mi),ne=t[52].toggle,v=Ae(ne,t,t[54],_i);let K=t[16]&&!t[6]&&Ei(t);return{c(){e=te("section"),ue(n.$$.fragment),o=se(),l.c(),s=se(),M&&M.c(),r=se(),N&&N.c(),c=se(),j&&j.c(),u=se(),q&&q.c(),f=se(),ie&&ie.c(),a=se(),x&&x.c(),g=se(),W&&W.c(),h=se(),v&&v.c(),_=se(),K&&K.c(),d(e,"role","presentation"),d(e,"id",b=t[0].id),d(e,"class","svelvet-wrapper svelte-13nq7cv"),d(e,"title",t[9]),d(e,"tabindex",0),T(e,"width",t[1]?t[1]+"px":"100%"),T(e,"height",t[2]?t[2]+"px":"100%")},m(L,F){R(L,e,F),re(n,e,null),V(e,o),z[i].m(e,null),V(e,s),M&&M.m(e,null),V(e,r),N&&N.m(e,null),V(e,c),j&&j.m(e,null),V(e,u),q&&q.m(e,null),V(e,f),ie&&ie.m(e,null),V(e,a),x&&x.m(e,null),V(e,g),W&&W.m(e,null),V(e,h),v&&v.m(e,null),V(e,_),K&&K.m(e,null),t[53](e),m=!0,w||(S=[pe(window,"touchend",t[33]),pe(window,"mouseup",t[33]),pe(window,"resize",t[32]),pe(window,"scroll",t[32]),pe(e,"wheel",Mt(t[39])),pe(e,"mousedown",hn(Mt(t[34]))),pe(e,"touchend",Mt(t[36])),pe(e,"touchstart",hn(Mt(t[35]))),pe(e,"keydown",t[37]),pe(e,"keyup",t[38])],w=!0)},p(L,F){const we={};F[0]&524288&&(we.isMovable=L[19]),F[0]&2097152|F[1]&8388608&&(we.$$scope={dirty:F,ctx:L}),n.$set(we);let Ce=i;i=I(L),i===Ce?z[i].p(L,F):(Le(),k(z[Ce],1,1,()=>{z[Ce]=null}),Ie(),l=z[i],l?l.p(L,F):(l=z[i]=A[i](L),l.c()),p(l,1),l.m(e,s)),L[3]?M?(M.p(L,F),F[0]&8&&p(M,1)):(M=ki(L),M.c(),p(M,1),M.m(e,r)):M&&(Le(),k(M,1,1,()=>{M=null}),Ie()),L[4]?N?(N.p(L,F),F[0]&16&&p(N,1)):(N=Ci(L),N.c(),p(N,1),N.m(e,c)):N&&(Le(),k(N,1,1,()=>{N=null}),Ie()),L[5]?j?(j.p(L,F),F[0]&32&&p(j,1)):(j=Si(L),j.c(),p(j,1),j.m(e,u)):j&&(Le(),k(j,1,1,()=>{j=null}),Ie()),L[10]?q?(q.p(L,F),F[0]&1024&&p(q,1)):(q=Ni(L),q.c(),p(q,1),q.m(e,f)):q&&(Le(),k(q,1,1,()=>{q=null}),Ie()),ie&&ie.p&&(!m||F[1]&8388608)&&Pe(ie,$,L,L[54],m?ve($,L[54],F,pc):De(L[54]),pi),x&&x.p&&(!m||F[1]&8388608)&&Pe(x,G,L,L[54],m?ve(G,L[54],F,bc):De(L[54]),bi),W&&W.p&&(!m||F[1]&8388608)&&Pe(W,H,L,L[54],m?ve(H,L[54],F,mc):De(L[54]),mi),v&&v.p&&(!m||F[1]&8388608)&&Pe(v,ne,L,L[54],m?ve(ne,L[54],F,_c):De(L[54]),_i),L[16]&&!L[6]?K?(K.p(L,F),F[0]&65600&&p(K,1)):(K=Ei(L),K.c(),p(K,1),K.m(e,null)):K&&(Le(),k(K,1,1,()=>{K=null}),Ie()),(!m||F[0]&1&&b!==(b=L[0].id))&&d(e,"id",b),(!m||F[0]&512)&&d(e,"title",L[9]),F[0]&2&&T(e,"width",L[1]?L[1]+"px":"100%"),F[0]&4&&T(e,"height",L[2]?L[2]+"px":"100%")},i(L){m||(p(n.$$.fragment,L),p(l),p(M),p(N),p(j),p(q),p(ie,L),p(x,L),p(W,L),p(v,L),p(K),m=!0)},o(L){k(n.$$.fragment,L),k(l),k(M),k(N),k(j),k(q),k(ie,L),k(x,L),k(W,L),k(v,L),k(K),m=!1},d(L){L&&B(e),ce(n),z[i].d(),M&&M.d(),N&&N.d(),j&&j.d(),q&&q.d(),ie&&ie.d(L),x&&x.d(L),W&&W.d(L),v&&v.d(L),K&&K.d(),t[53](null),w=!1,ht(S)}}}let Fn;function Nc(t,e,n){let o,i,l,s,r,c,u,f,a,g,h,_,b,m,w;X(t,Vn,E=>n(65,c=E)),X(t,dt,E=>n(66,u=E)),X(t,wt,E=>n(67,a=E)),X(t,Wt,E=>n(70,_=E));let{$$slots:S={},$$scope:A}=e,{graph:z}=e,{width:I}=e,{height:M}=e,{minimap:N=!1}=e,{controls:j=!1}=e,{toggle:q=!1}=e,{fixedZoom:$=!1}=e,{disableSelection:ie=!1}=e,{ZOOM_INCREMENT:G=.1}=e,{PAN_INCREMENT:x=50}=e,{PAN_TIME:H=250}=e,{MAX_SCALE:W=3}=e,{MIN_SCALE:ne=.2}=e,{selectionColor:v}=e,{backgroundExists:K}=e,{fitView:L=!1}=e,{trackpadPan:F}=e,{modifier:we}=e,{theme:Ce="light"}=e,{title:Me}=e,{drawer:P=!1}=e;const me=cn(),J={},ze=Y(!1),$e=Y(0),he=Y(null);X(t,he,E=>n(20,f=E));const Z=z.cursor,ae=z.transforms.scale;X(t,ae,E=>n(63,s=E));const ye=z.dimensions;X(t,ye,E=>n(51,m=E));const ke=z.transforms.translation;X(t,ke,E=>n(62,l=E));const Ke=z.groups;X(t,Ke,E=>n(64,r=E));const ct=z.groupBoxes,et=r.selected.nodes;X(t,et,E=>n(61,i=E));const O=z.activeGroup;X(t,O,E=>n(69,h=E));const tt=z.initialNodePositions;X(t,tt,E=>n(68,g=E));const ot=z.editing;X(t,ot,E=>n(21,w=E));const D=z.bounds.nodeBounds;X(t,D,E=>n(71,b=E));let Se=0,Ue=1,be={x:0,y:0,top:0,left:0},it=!1,ut=!1,st=!1,mt=!1,rt=!1,St=!1,Je,ft=null,gt=null,Nt=null,kt=null;const Zt={id:null,position:z.cursor,offset:Y({x:0,y:0}),connected:Y(new Set),dynamic:Y(!1),edge:null,edgeColor:Y(null),direction:Y("self"),inputKey:null,type:"output",moving:vn(!1),store:null,mounted:Y(!0),rotation:vn(0),node:{zIndex:Y(1/0),rotating:Y(!1),position:z.cursor,dimensions:{width:Y(0),height:Y(0)}}};We("graphDOMElement",he),We("cursorAnchor",Zt),We("duplicate",ze),We("graph",z),We("transforms",z.transforms),We("dimensions",z.dimensions),We("locked",z.locked),We("groups",z.groups),We("bounds",z.bounds),We("edgeStore",z.edges),We("nodeStore",z.nodes),We("mounted",$e),Ft(()=>{Ot()});async function de(){await bl(),wt.set(!0);const{x:E,y:Ee,scale:qe}=$l(Je,b);E!==null&&Ee!==null&&qe!==null&&(z.transforms.scale.set(qe),ke.set({x:E,y:Ee})),wt.set(!1),n(50,St=!0)}async function At(){n(12,gt=(await Sn(()=>import("./Minimap-fb2c3c56.js"),[])).default)}async function It(){n(11,ft=(await Sn(()=>import("./ThemeToggle-faa64a38.js"),[])).default)}async function vt(){n(13,Nt=(await Sn(()=>import("./Controls-7a5bcd30.js"),["assets/Controls-7a5bcd30.js","assets/Icon-e7bc9510.js"])).default)}async function zt(){n(14,kt=(await Sn(()=>import("./DrawerController-2492e534.js"),["assets/DrawerController-2492e534.js","assets/Icon-e7bc9510.js","assets/DrawerController-516ff9fe.css"])).default)}function Ot(){if(!f)return;const E=f.getBoundingClientRect();Je={top:E.top,left:E.left,bottom:E.bottom,right:E.right,width:E.width,height:E.height},z.dimensions.set(Je),L==="resize"&&de()}function at(E){if(ut){const Fe=`${Gl()}/${z.id}`,Qe=U(Z),y=Qe.x-u.x,le=Qe.y-u.y,ge=Math.min(u.y,u.y+le),fe=Math.min(u.x,u.x+y),Ye={width:Y(Math.abs(y)),height:Y(Math.abs(le))},lt=Y({x:fe,y:ge}),Ge={group:Y(Fe),dimensions:Ye,position:lt,color:Y(Ol()),moving:Y(!1)};ct.add(Ge,Fe),Array.from(i).forEach(C=>{C.group.set(Fe)}),Ke.update(C=>{const Te={parent:Y(Ge),nodes:Y(new Set([...i,Ge]))};return C[Fe]=Te,C}),oe(et,i=new Set,i),n(17,ut=!1),n(16,it=!1)}h&&Array.from(U(r[h].nodes)).forEach(Fe=>Fe.moving.set(!1));const Ee=z.edges.get("cursor");Ee&&(z.edges.delete("cursor"),Ee.disconnect||me("edgeDrop",{cursor:U(Z),source:{node:_==null?void 0:_.anchor.node.id.slice(2),anchor:_==null?void 0:_.anchor.id.split("/")[0].slice(2)}})),oe(O,h=null,h),oe(dt,u={x:0,y:0},u),oe(tt,g=[],g),n(16,it=!1),n(19,mt=!1),oe(wt,a=!1,a),E.shiftKey||Wt.set(null),n(15,be.y=0,be),n(15,be.x=0,be)}function Tt(E){if(E.button===2)return;f&&f.focus();const{clientX:Ee,clientY:qe}=E;if(oe(dt,u=U(Z),u),E.shiftKey||E.metaKey){E.preventDefault(),n(16,it=!0);const{top:Fe,left:Qe}=o;n(15,be.y=qe-Fe,be),n(15,be.x=Ee-Qe,be),n(15,be.top=Fe,be),n(15,be.left=Qe,be),E.shiftKey&&E.metaKey?n(17,ut=!0):n(17,ut=!1),E.metaKey&&!E.shiftKey?n(18,st=!0):n(18,st=!1)}else n(19,mt=!0),oe(et,i=new Set,i),et.set(i)}function Oe(E){oe(et,i=new Set,i),et.set(i),oe(dt,u=U(Z),u),n(19,mt=!0),E.touches.length===2&&(Dt(),Se=c,Ue=s)}function Re(){n(19,mt=!1),rt=!1}function Dt(){rt||(rt=!0,Fn=requestAnimationFrame(Ct))}function Ct(){if(!rt){cancelAnimationFrame(Fn);return}const Ee=c/Se;oe(ae,s=Ue*Ee,s),Fn=requestAnimationFrame(Ct)}function Bt(E){const{key:Ee,code:qe}=E,Fe=E.target;if(!(Fe.tagName=="INPUT"||Fe.tagName=="TEXTAREA")){if(qe==="KeyA"&&E[`${we}Key`]){const Qe=z.nodes.getAll().filter(y=>!U(y.locked));oe(et,i=new Set(Qe),i)}else if(Qn(Ee))jt(Ee,E);else if(Ee==="=")bo(-1,z.dimensions,z.transforms,G);else if(Ee==="-")bo(1,z.dimensions,z.transforms,G);else if(Ee==="0")de();else if(Ee==="Control")r.selected.nodes.set(new Set);else if(qe==="KeyD"&&E[`${we}Key`])ze.set(!0),setTimeout(()=>{ze.set(!1)},100);else return;E.preventDefault()}}function Rt(E){const{key:Ee}=E;Qn(Ee)?(clearInterval(J[Ee]),delete J[Ee]):Ee==="Shift"&&Wt.set(null)}function Xt(E){if($)return;const Ee=E.shiftKey?.15:1,{clientX:qe,clientY:Fe,deltaY:Qe}=E,y=l,le={x:qe,y:Fe};if((F||E.metaKey)&&Qe%1===0){oe(ke,l={x:oe(ke,l.x-=E.deltaX,l),y:oe(ke,l.y-=E.deltaY,l)},l);return}if(s>=W&&Qe<0||s<=ne&&Qe>0)return;const ge=Math.min(.009*Ee*Math.abs(Qe),.08),fe=Zi(s,Math.sign(Qe),ge),Ye=Fi(s,fe,y,le,Je);ae.set(fe),ke.set(Ye)}function jt(E,Ee){const qe=Ee.shiftKey?2:1,Fe=performance.now(),Qe=E==="ArrowLeft"||E==="ArrowUp"?-1:1,y=E==="ArrowLeft"||E==="ArrowRight",le=y?l.x:l.y,ge=le+Qe*x*qe;if(!J[E]){let fe=setInterval(()=>{const Ye=performance.now()-Fe;if(i.size===0){const lt=le+(ge-le)*(Ye/H);ke.set({x:y?lt:l.x,y:y?l.y:lt})}else{const lt={x:y?Qe*2:0,y:y?0:Qe*2};Array.from(i).forEach(Ge=>{const C=U(Ge.position);let Te;const _t=U(Ge.group),Pt=U(z.groupBoxes);if(_t&&(Te=Pt.get(_t)),Te){const Gt=U(Ge.dimensions.width),zn=U(Ge.dimensions.height),On=xi(Te,Gt,zn);Qi(C,lt,Ge.position,On)}else Ji(C,lt,Ge.position)})}},2);J[E]=fe}}function Vt(E){qt[E?"unshift":"push"](()=>{f=E,he.set(f)})}return t.$$set=E=>{"graph"in E&&n(0,z=E.graph),"width"in E&&n(1,I=E.width),"height"in E&&n(2,M=E.height),"minimap"in E&&n(3,N=E.minimap),"controls"in E&&n(4,j=E.controls),"toggle"in E&&n(5,q=E.toggle),"fixedZoom"in E&&n(40,$=E.fixedZoom),"disableSelection"in E&&n(6,ie=E.disableSelection),"ZOOM_INCREMENT"in E&&n(41,G=E.ZOOM_INCREMENT),"PAN_INCREMENT"in E&&n(42,x=E.PAN_INCREMENT),"PAN_TIME"in E&&n(43,H=E.PAN_TIME),"MAX_SCALE"in E&&n(44,W=E.MAX_SCALE),"MIN_SCALE"in E&&n(45,ne=E.MIN_SCALE),"selectionColor"in E&&n(7,v=E.selectionColor),"backgroundExists"in E&&n(8,K=E.backgroundExists),"fitView"in E&&n(46,L=E.fitView),"trackpadPan"in E&&n(47,F=E.trackpadPan),"modifier"in E&&n(48,we=E.modifier),"theme"in E&&n(49,Ce=E.theme),"title"in E&&n(9,Me=E.title),"drawer"in E&&n(10,P=E.drawer),"$$scope"in E&&n(54,A=E.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&1048576&&(o=m),t.$$.dirty[1]&262144&&Ce&&document.documentElement.setAttribute("svelvet-theme",Ce),t.$$.dirty[1]&557056&&!St&&L&&de(),t.$$.dirty[0]&2080&&q&&!ft&&It(),t.$$.dirty[0]&4104&&N&&!gt&&At(),t.$$.dirty[0]&8208&&j&&!Nt&&vt(),t.$$.dirty[0]&17408&&P&&!kt&&zt()},[z,I,M,N,j,q,ie,v,K,Me,P,ft,gt,Nt,kt,be,it,ut,st,mt,f,w,he,ae,ye,ke,Ke,et,O,tt,ot,D,Ot,at,Tt,Oe,Re,Bt,Rt,Xt,$,G,x,H,W,ne,L,F,we,Ce,St,m,S,Vt,A]}class Ec extends je{constructor(e){super(),Xe(this,e,Nc,Sc,Be,{graph:0,width:1,height:2,minimap:3,controls:4,toggle:5,fixedZoom:40,disableSelection:6,ZOOM_INCREMENT:41,PAN_INCREMENT:42,PAN_TIME:43,MAX_SCALE:44,MIN_SCALE:45,selectionColor:7,backgroundExists:8,fitView:46,trackpadPan:47,modifier:48,theme:49,title:9,drawer:10},null,[-1,-1,-1])}}const Mc=t=>({}),Mi=t=>({slot:"minimap"}),Ac=t=>({}),Ai=t=>({slot:"controls"}),vc=t=>({}),vi=t=>({slot:"background"}),Pc=t=>({}),Pi=t=>({slot:"toggle"}),Dc=t=>({}),Di=t=>({slot:"drawer"});function Lc(t){let e;return{c(){e=te("div"),d(e,"class","svelvet-temp svelte-1i6klh"),T(e,"width",t[2]?t[2]+"px":"100%"),T(e,"height",t[3]?t[3]+"px":"100%")},m(n,o){R(n,e,o)},p(n,o){o[0]&4&&T(e,"width",n[2]?n[2]+"px":"100%"),o[0]&8&&T(e,"height",n[3]?n[3]+"px":"100%")},i:ee,o:ee,d(n){n&&B(e)}}}function Ic(t){let e,n;return e=new Ec({props:{width:t[2],height:t[3],toggle:t[6],backgroundExists:t[17],minimap:t[4],graph:t[16],fitView:t[8],fixedZoom:t[15],theme:t[1],drawer:t[7],controls:t[5],selectionColor:t[9],disableSelection:t[10],trackpadPan:t[12],modifier:t[13],title:t[14],$$slots:{drawer:[Wc],toggle:[Rc],background:[Bc],controls:[Tc],minimap:[Oc],default:[zc]},$$scope:{ctx:t}}}),e.$on("edgeDrop",t[32]),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p(o,i){const l={};i[0]&4&&(l.width=o[2]),i[0]&8&&(l.height=o[3]),i[0]&64&&(l.toggle=o[6]),i[0]&131072&&(l.backgroundExists=o[17]),i[0]&16&&(l.minimap=o[4]),i[0]&65536&&(l.graph=o[16]),i[0]&256&&(l.fitView=o[8]),i[0]&32768&&(l.fixedZoom=o[15]),i[0]&2&&(l.theme=o[1]),i[0]&128&&(l.drawer=o[7]),i[0]&32&&(l.controls=o[5]),i[0]&512&&(l.selectionColor=o[9]),i[0]&1024&&(l.disableSelection=o[10]),i[0]&4096&&(l.trackpadPan=o[12]),i[0]&8192&&(l.modifier=o[13]),i[0]&16384&&(l.title=o[14]),i[0]&2049|i[1]&4&&(l.$$scope={dirty:i,ctx:o}),e.$set(l)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function Li(t){let e,n;return e=new Pr({props:{mermaid:t[0],mermaidConfig:t[11]}}),{c(){ue(e.$$.fragment)},m(o,i){re(e,o,i),n=!0},p(o,i){const l={};i[0]&1&&(l.mermaid=o[0]),i[0]&2048&&(l.mermaidConfig=o[11]),e.$set(l)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),n=!1},d(o){ce(e,o)}}}function zc(t){let e,n,o=t[0].length&&Li(t);const i=t[31].default,l=Ae(i,t,t[33],null);return{c(){o&&o.c(),e=se(),l&&l.c()},m(s,r){o&&o.m(s,r),R(s,e,r),l&&l.m(s,r),n=!0},p(s,r){s[0].length?o?(o.p(s,r),r[0]&1&&p(o,1)):(o=Li(s),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(Le(),k(o,1,1,()=>{o=null}),Ie()),l&&l.p&&(!n||r[1]&4)&&Pe(l,i,s,s[33],n?ve(i,s[33],r,null):De(s[33]),null)},i(s){n||(p(o),p(l,s),n=!0)},o(s){k(o),k(l,s),n=!1},d(s){s&&B(e),o&&o.d(s),l&&l.d(s)}}}function Oc(t){let e;const n=t[31].minimap,o=Ae(n,t,t[33],Mi);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&4)&&Pe(o,n,i,i[33],e?ve(n,i[33],l,Mc):De(i[33]),Mi)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function Tc(t){let e;const n=t[31].controls,o=Ae(n,t,t[33],Ai);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&4)&&Pe(o,n,i,i[33],e?ve(n,i[33],l,Ac):De(i[33]),Ai)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function Bc(t){let e;const n=t[31].background,o=Ae(n,t,t[33],vi);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&4)&&Pe(o,n,i,i[33],e?ve(n,i[33],l,vc):De(i[33]),vi)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function Rc(t){let e;const n=t[31].toggle,o=Ae(n,t,t[33],Pi);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&4)&&Pe(o,n,i,i[33],e?ve(n,i[33],l,Pc):De(i[33]),Pi)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function Wc(t){let e;const n=t[31].drawer,o=Ae(n,t,t[33],Di);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),e=!0},p(i,l){o&&o.p&&(!e||l[1]&4)&&Pe(o,n,i,i[33],e?ve(n,i[33],l,Dc):De(i[33]),Di)},i(i){e||(p(o,i),e=!0)},o(i){k(o,i),e=!1},d(i){o&&o.d(i)}}}function Xc(t){let e,n,o,i;const l=[Ic,Lc],s=[];function r(c,u){return c[16]?0:1}return e=r(t),n=s[e]=l[e](t),{c(){n.c(),o=He()},m(c,u){s[e].m(c,u),R(c,o,u),i=!0},p(c,u){let f=e;e=r(c),e===f?s[e].p(c,u):(Le(),k(s[f],1,1,()=>{s[f]=null}),Ie(),n=s[e],n?n.p(c,u):(n=s[e]=l[e](c),n.c()),p(n,1),n.m(o.parentNode,o))},i(c){i||(p(n),i=!0)},o(c){k(n),i=!1},d(c){c&&B(o),s[e].d(c)}}}function jc(t,e,n){let o,i,{$$slots:l={},$$scope:s}=e;const r=$n(l);let{mermaid:c=""}=e,{theme:u="light"}=e,{id:f=0}=e,{snapTo:a=0}=e,{zoom:g=1}=e,{TD:h=!1}=e,{editable:_=!1}=e,{locked:b=!1}=e,{width:m=0}=e,{height:w=0}=e,{minimap:S=!1}=e,{controls:A=!1}=e,{toggle:z=!1}=e,{drawer:I=!1}=e,{fitView:M=!1}=e,{selectionColor:N="lightblue"}=e,{edgeStyle:j="bezier"}=e,{edge:q=null}=e,{disableSelection:$=!1}=e,{mermaidConfig:ie={}}=e,{translation:G={x:0,y:0}}=e,{trackpadPan:x=!1}=e,{modifier:H="meta"}=e,{raiseEdgesOnSelect:W=!1}=e,{edgesAboveNode:ne=!1}=e,{title:v=""}=e,{fixedZoom:K=!1}=e;const L=cn();let F,we=h?"TD":"LR";We("snapTo",a),We("edgeStyle",j),We("graphEdge",q),We("raiseEdgesOnSelect",W),We("edgesAboveNode",ne),Ft(()=>{const P=localStorage.getItem("state");if(P)n(16,F=is(P)),Gn.add(F,F.id);else{let me=`G-${f||Gn.count()+1}`;n(16,F=Vi(me,{zoom:g,direction:we,editable:_,locked:b,translation:G})),Gn.add(F,me)}});function Ce(P,me){const J=`N-${P[0]}`,ze=F.nodes.get(J);if(!ze)return;const $e=ze.anchors.get(`A-${P[1]}/N-${P[0]}`);if(!$e)return;const he=`N-${me[0]}`,Z=F.nodes.get(he);if(!Z)return;const ae=Z.anchors.get(`A-${me[1]}/N-${me[0]}`);if(!ae)return;const ye=F.edges.match($e,ae);ye&&F.edges.delete(ye[0])}function Me(P){xe.call(this,t,P)}return t.$$set=P=>{"mermaid"in P&&n(0,c=P.mermaid),"theme"in P&&n(1,u=P.theme),"id"in P&&n(18,f=P.id),"snapTo"in P&&n(19,a=P.snapTo),"zoom"in P&&n(20,g=P.zoom),"TD"in P&&n(21,h=P.TD),"editable"in P&&n(22,_=P.editable),"locked"in P&&n(23,b=P.locked),"width"in P&&n(2,m=P.width),"height"in P&&n(3,w=P.height),"minimap"in P&&n(4,S=P.minimap),"controls"in P&&n(5,A=P.controls),"toggle"in P&&n(6,z=P.toggle),"drawer"in P&&n(7,I=P.drawer),"fitView"in P&&n(8,M=P.fitView),"selectionColor"in P&&n(9,N=P.selectionColor),"edgeStyle"in P&&n(24,j=P.edgeStyle),"edge"in P&&n(25,q=P.edge),"disableSelection"in P&&n(10,$=P.disableSelection),"mermaidConfig"in P&&n(11,ie=P.mermaidConfig),"translation"in P&&n(26,G=P.translation),"trackpadPan"in P&&n(12,x=P.trackpadPan),"modifier"in P&&n(13,H=P.modifier),"raiseEdgesOnSelect"in P&&n(27,W=P.raiseEdgesOnSelect),"edgesAboveNode"in P&&n(28,ne=P.edgesAboveNode),"title"in P&&n(14,v=P.title),"fixedZoom"in P&&n(15,K=P.fixedZoom),"$$scope"in P&&n(33,s=P.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&65536&&n(30,i=F&&F.edges),t.$$.dirty[0]&1114112&&F&&F.transforms.scale.set(g),t.$$.dirty[0]&1073741824&&i&&i.onEdgeChange((P,me)=>{L(me,{sourceAnchor:P.source,targetAnchor:P.target,sourceNode:P.source.node,targetNode:P.target.node})})},n(17,o=r.background),[c,u,m,w,S,A,z,I,M,N,$,ie,x,H,v,K,F,o,f,a,g,h,_,b,j,q,G,W,ne,Ce,i,l,Me,s]}class Gc extends je{constructor(e){super(),Xe(this,e,jc,Xc,Be,{mermaid:0,theme:1,id:18,snapTo:19,zoom:20,TD:21,editable:22,locked:23,width:2,height:3,minimap:4,controls:5,toggle:6,drawer:7,fitView:8,selectionColor:9,edgeStyle:24,edge:25,disableSelection:10,mermaidConfig:11,translation:26,trackpadPan:12,modifier:13,raiseEdgesOnSelect:27,edgesAboveNode:28,title:14,fixedZoom:15,disconnect:29},null,[-1,-1])}get disconnect(){return this.$$.ctx[29]}}function Yc(t){let e,n,o,i,l,s,r,c;return e=new ln({props:{bgColor:"white",label:"Just",position:{x:50,y:50},connections:[]}}),o=new ln({props:{bgColor:"white",label:"Simply",position:{x:350,y:50},connections:[]}}),l=new ln({props:{bgColor:"white",label:"Connect",position:{x:350,y:350},connections:[]}}),r=new ln({props:{bgColor:"white",label:"Blocks",position:{x:650,y:350},connections:[]}}),{c(){ue(e.$$.fragment),n=se(),ue(o.$$.fragment),i=se(),ue(l.$$.fragment),s=se(),ue(r.$$.fragment)},m(u,f){re(e,u,f),R(u,n,f),re(o,u,f),R(u,i,f),re(l,u,f),R(u,s,f),re(r,u,f),c=!0},p:ee,i(u){c||(p(e.$$.fragment,u),p(o.$$.fragment,u),p(l.$$.fragment,u),p(r.$$.fragment,u),c=!0)},o(u){k(e.$$.fragment,u),k(o.$$.fragment,u),k(l.$$.fragment,u),k(r.$$.fragment,u),c=!1},d(u){u&&(B(n),B(i),B(s)),ce(e,u),ce(o,u),ce(l,u),ce(r,u)}}}function Hc(t){let e,n,o,i,l;return n=new Gc({props:{height:window.innerHeight*.4,theme:"custom",controls:!0,$$slots:{default:[Yc]},$$scope:{ctx:t}}}),{c(){e=te("div"),ue(n.$$.fragment),o=se(),i=te("p"),i.textContent="*our build tool is currently in beta, sign up to try our beta for free",d(e,"class","container svelte-7ham4z"),d(i,"class","subtitle")},m(s,r){R(s,e,r),re(n,e,null),R(s,o,r),R(s,i,r),l=!0},p(s,[r]){const c={};r&1&&(c.$$scope={dirty:r,ctx:s}),n.$set(c)},i(s){l||(p(n.$$.fragment,s),l=!0)},o(s){k(n.$$.fragment,s),l=!1},d(s){s&&(B(e),B(o),B(i)),ce(n)}}}class Kc extends je{constructor(e){super(),Xe(this,e,null,Hc,Be,{})}}function qc(t){let e;return{c(){e=te("div"),e.innerHTML=`<div class="top svelte-613ztf">Build your own AI Assistant in 5 minutes</div> <div class="bottom svelte-613ztf"><span class="name svelte-613ztf">Caviato</span>
    provides you all the building block and an intuitive drag-and-drop interface
    to build your own AI Assistant in less than 5 minutes.</div>`,d(e,"class","container svelte-613ztf")},m(n,o){R(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&B(e)}}}class Fc extends je{constructor(e){super(),Xe(this,e,null,qc,Be,{})}}const Zc="https://caviato.xyz/assets/Full-b423ab52.png";function Vc(t){let e;return{c(){e=te("div"),e.innerHTML=`<img src="${Zc}" alt="Logo" height="60"/>`,d(e,"class","navbar svelte-1l3yvuw")},m(n,o){R(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&B(e)}}}class Uc extends je{constructor(e){super(),Xe(this,e,null,Vc,Be,{})}}function Jc(t){let e;return{c(){e=te("footer"),e.innerHTML='<p class="svelte-17sbm2t">Copyright  2023 Caviato. All rights reserved.</p> <a href="https://www.flaticon.com/free-icons/support" title="support icons">Support icons created by Freepik - Flaticon</a>',d(e,"class","container svelte-17sbm2t")},m(n,o){R(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&B(e)}}}class Qc extends je{constructor(e){super(),Xe(this,e,null,Jc,Be,{})}}function xc(t){let e,n,o,i,l,s,r,c;const u=t[3].default,f=Ae(u,t,t[2],null);return{c(){e=te("div"),n=te("div"),o=Kt(t[0]),i=se(),l=te("div"),s=se(),r=te("div"),f&&f.c(),d(n,"class","title svelte-tjjucb"),d(l,"class","content svelte-tjjucb"),d(r,"class","options svelte-tjjucb"),d(e,"class","container svelte-tjjucb")},m(a,g){R(a,e,g),V(e,n),V(n,o),V(e,i),V(e,l),l.innerHTML=t[1],V(e,s),V(e,r),f&&f.m(r,null),c=!0},p(a,[g]){(!c||g&1)&&$t(o,a[0]),(!c||g&2)&&(l.innerHTML=a[1]),f&&f.p&&(!c||g&4)&&Pe(f,u,a,a[2],c?ve(u,a[2],g,null):De(a[2]),null)},i(a){c||(p(f,a),c=!0)},o(a){k(f,a),c=!1},d(a){a&&B(e),f&&f.d(a)}}}function $c(t,e,n){let{$$slots:o={},$$scope:i}=e,{title:l="Tempor eu eiusmod ut"}=e,{content:s="Aliquip consectetur magna culpa cillum laborum eiusmod laboris ipsum magna. Irure dolore deserunt commodo proident reprehenderit reprehenderit consectetur esse ex reprehenderit nulla quis velit. Enim sint tempor excepteur ut Lorem minim ullamco veniam irure laboris id magna exercitation magna sit. Eiusmod excepteur esse non ea fugiat eu culpa sit sunt mollit. Eiusmod tempor eiusmod ex elit. Eiusmod occaecat deserunt nostrud deserunt amet. Laborum voluptate deserunt nostrud magna ipsum ut"}=e;return t.$$set=r=>{"title"in r&&n(0,l=r.title),"content"in r&&n(1,s=r.content),"$$scope"in r&&n(2,i=r.$$scope)},[l,s,i,o]}class Ii extends je{constructor(e){super(),Xe(this,e,$c,xc,Be,{title:0,content:1})}}function eu(t){let e,n,o,i,l,s;const r=t[3].default,c=Ae(r,t,t[2],null);return{c(){e=te("div"),n=te("div"),c&&c.c(),o=se(),i=te("div"),l=Kt(t[0]),d(n,"class","icon svelte-39ysn9"),d(i,"class","description svelte-39ysn9"),d(e,"class","container svelte-39ysn9"),_e(e,"green",t[1])},m(u,f){R(u,e,f),V(e,n),c&&c.m(n,null),V(e,o),V(e,i),V(i,l),s=!0},p(u,[f]){c&&c.p&&(!s||f&4)&&Pe(c,r,u,u[2],s?ve(r,u[2],f,null):De(u[2]),null),(!s||f&1)&&$t(l,u[0]),(!s||f&2)&&_e(e,"green",u[1])},i(u){s||(p(c,u),s=!0)},o(u){k(c,u),s=!1},d(u){u&&B(e),c&&c.d(u)}}}function tu(t,e,n){let{$$slots:o={},$$scope:i}=e,{description:l="Occaecat excepteur velit consequat eiusmod incididunt proident eu ullamco cillum Lorem quis qui eu"}=e,{green:s=!1}=e;return t.$$set=r=>{"description"in r&&n(0,l=r.description),"green"in r&&n(1,s=r.green),"$$scope"in r&&n(2,i=r.$$scope)},[l,s,i,o]}class rn extends je{constructor(e){super(),Xe(this,e,tu,eu,Be,{description:0,green:1})}}function nu(t){let e,n,o,i,l,s,r,c,u,f;return{c(){e=te("div"),n=te("div"),o=te("div"),i=se(),l=te("a"),s=te("button"),s.textContent="Sign Up",r=se(),c=te("div"),c.textContent="for early access now!",d(o,"class","shadow svelte-109hp4o"),d(s,"class","svelte-109hp4o"),d(l,"href",ou),d(l,"target","_blank"),d(l,"class","svelte-109hp4o"),d(n,"class","button-container svelte-109hp4o"),d(c,"class","subtitle svelte-109hp4o"),d(e,"class","container svelte-109hp4o")},m(a,g){R(a,e,g),V(e,n),V(n,o),V(n,i),V(n,l),V(l,s),V(e,r),V(e,c),u||(f=pe(l,"click",iu),u=!0)},p:ee,i:ee,o:ee,d(a){a&&B(e),u=!1,f()}}}const ou="https://docs.google.com/forms/d/e/1FAIpQLSeOZ8LkPIeBIkSYywnYVeGFGHPl50eaMtdgKEX4ixIMdxjxcg/viewform?usp=sf_link";function iu(t){t.preventDefault(),setTimeout(()=>{window.open(t.target.parentNode.href)},300)}class zi extends je{constructor(e){super(),Xe(this,e,null,nu,Be,{})}}function lu(t){let e,n;return{c(){e=te("img"),un(e.src,n="   https://cdn-icons-png.flaticon.com/512/4187/4187334.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){R(o,e,i)},p:ee,d(o){o&&B(e)}}}function su(t){let e,n;return{c(){e=te("img"),un(e.src,n="   https://cdn-icons-png.flaticon.com/512/4041/4041438.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){R(o,e,i)},p:ee,d(o){o&&B(e)}}}function ru(t){let e,n;return{c(){e=te("img"),un(e.src,n="   https://cdn-icons-png.flaticon.com/512/1584/1584892.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){R(o,e,i)},p:ee,d(o){o&&B(e)}}}function cu(t){let e,n,o,i,l,s;return e=new rn({props:{green:!0,description:`
            Build out your logic
        `,$$slots:{default:[lu]},$$scope:{ctx:t}}}),o=new rn({props:{green:!0,description:`
          Upload your business document and knowledge
        `,$$slots:{default:[su]},$$scope:{ctx:t}}}),l=new rn({props:{green:!0,description:`
          Deploy to anywhere in 5 minutes
        `,$$slots:{default:[ru]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment),n=se(),ue(o.$$.fragment),i=se(),ue(l.$$.fragment)},m(r,c){re(e,r,c),R(r,n,c),re(o,r,c),R(r,i,c),re(l,r,c),s=!0},p(r,c){const u={};c&8&&(u.$$scope={dirty:c,ctx:r}),e.$set(u);const f={};c&8&&(f.$$scope={dirty:c,ctx:r}),o.$set(f);const a={};c&8&&(a.$$scope={dirty:c,ctx:r}),l.$set(a)},i(r){s||(p(e.$$.fragment,r),p(o.$$.fragment,r),p(l.$$.fragment,r),s=!0)},o(r){k(e.$$.fragment,r),k(o.$$.fragment,r),k(l.$$.fragment,r),s=!1},d(r){r&&(B(n),B(i)),ce(e,r),ce(o,r),ce(l,r)}}}function uu(t){let e,n;return{c(){e=te("img"),un(e.src,n="   https://cdn-icons-png.flaticon.com/512/780/780623.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){R(o,e,i)},p:ee,d(o){o&&B(e)}}}function fu(t){let e,n;return{c(){e=te("img"),un(e.src,n="https://cdn-icons-png.flaticon.com/512/5828/5828521.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){R(o,e,i)},p:ee,d(o){o&&B(e)}}}function au(t){let e,n;return{c(){e=te("img"),un(e.src,n="   https://cdn-icons-png.flaticon.com/512/10472/10472979.png ")||d(e,"src",n),d(e,"width","100"),d(e,"height","100"),d(e,"alt",""),d(e,"title",""),d(e,"class","img-small")},m(o,i){R(o,e,i)},p:ee,d(o){o&&B(e)}}}function du(t){let e,n,o,i,l,s;return e=new rn({props:{description:`
            Build your own assistant to help you with managing your daily 
            task such as drafting email and schedule meeting
        `,$$slots:{default:[uu]},$$scope:{ctx:t}}}),o=new rn({props:{description:`
          Build a customized virtual personality for your hospitality robot
        `,$$slots:{default:[fu]},$$scope:{ctx:t}}}),l=new rn({props:{description:`
          Build a smart chatbot that helps sell products to your customer
        `,$$slots:{default:[au]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment),n=se(),ue(o.$$.fragment),i=se(),ue(l.$$.fragment)},m(r,c){re(e,r,c),R(r,n,c),re(o,r,c),R(r,i,c),re(l,r,c),s=!0},p(r,c){const u={};c&8&&(u.$$scope={dirty:c,ctx:r}),e.$set(u);const f={};c&8&&(f.$$scope={dirty:c,ctx:r}),o.$set(f);const a={};c&8&&(a.$$scope={dirty:c,ctx:r}),l.$set(a)},i(r){s||(p(e.$$.fragment,r),p(o.$$.fragment,r),p(l.$$.fragment,r),s=!0)},o(r){k(e.$$.fragment,r),k(o.$$.fragment,r),k(l.$$.fragment,r),s=!1},d(r){r&&(B(n),B(i)),ce(e,r),ce(o,r),ce(l,r)}}}function hu(t){let e,n,o,i,l,s,r,c,u,f,a,g,h,_,b,m,w,S,A,z,I,M;return n=new Uc({}),l=new Fc({}),r=new zi({}),u=new Kc({}),a=new Ii({props:{title:gu,content:t[0],$$slots:{default:[cu]},$$scope:{ctx:t}}}),b=new Ii({props:{title:_u,content:t[1],$$slots:{default:[du]},$$scope:{ctx:t}}}),A=new zi({}),I=new Qc({}),{c(){e=te("div"),ue(n.$$.fragment),o=se(),i=te("div"),ue(l.$$.fragment),s=se(),ue(r.$$.fragment),c=se(),ue(u.$$.fragment),f=se(),ue(a.$$.fragment),g=se(),h=te("br"),_=se(),ue(b.$$.fragment),m=se(),w=te("br"),S=se(),ue(A.$$.fragment),z=se(),ue(I.$$.fragment),d(i,"class","body svelte-qcnued"),d(e,"class","container svelte-qcnued")},m(N,j){R(N,e,j),re(n,e,null),V(e,o),V(e,i),re(l,i,null),V(i,s),re(r,i,null),V(i,c),re(u,i,null),V(i,f),re(a,i,null),V(i,g),V(i,h),V(i,_),re(b,i,null),V(i,m),V(i,w),V(i,S),re(A,i,null),V(e,z),re(I,e,null),M=!0},p(N,[j]){const q={};j&8&&(q.$$scope={dirty:j,ctx:N}),a.$set(q);const $={};j&8&&($.$$scope={dirty:j,ctx:N}),b.$set($)},i(N){M||(p(n.$$.fragment,N),p(l.$$.fragment,N),p(r.$$.fragment,N),p(u.$$.fragment,N),p(a.$$.fragment,N),p(b.$$.fragment,N),p(A.$$.fragment,N),p(I.$$.fragment,N),M=!0)},o(N){k(n.$$.fragment,N),k(l.$$.fragment,N),k(r.$$.fragment,N),k(u.$$.fragment,N),k(a.$$.fragment,N),k(b.$$.fragment,N),k(A.$$.fragment,N),k(I.$$.fragment,N),M=!1},d(N){N&&B(e),ce(n),ce(l),ce(r),ce(u),ce(a),ce(b),ce(A),ce(I)}}}const gu="What is Caviato?",_u="What can you build with Caviato?";function mu(t){return[`
    Caviato is a simple drag-and-drop AI Assistant build tools that lets ANYONE
    build their own custom AI Assistant or Virtual Personalities.
  `,`
    With Caviato, the possibility is only limited by your imagination.
    Whether to help you settle your daily tasks or
    to help streamline your cusomter support process,
    Caviato can empower you to do more with less.
  `]}class bu extends je{constructor(e){super(),Xe(this,e,mu,hu,Be,{})}}new bu({target:document.getElementById("app")});export{Ut as $,re as A,Gi as B,Yi as C,ce as D,Mn as E,Kt as F,bt as G,$t as H,ht as I,Ae as J,Pe as K,De as L,ve as M,bo as N,wt as O,oe as P,$l as Q,uo as R,je as S,bn as T,wu as U,Mt as V,yu as W,Y as X,ku as Y,qt as Z,pt as _,d as a,T as b,R as c,B as d,te as e,X as f,Ve as g,yt as h,Xe as i,se as j,V as k,pe as l,Le as m,ee as n,Ft as o,Ie as p,p as q,k as r,Be as s,_e as t,An as u,Ne as v,Ln as w,He as x,xn as y,ue as z};
